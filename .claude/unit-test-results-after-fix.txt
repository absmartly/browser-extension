
> absmartly-launchpad@0.0.2 test:unit
> jest

  console.log
    ✅ Running integration tests with config: {
      apiEndpoint: 'https://demo-2.absmartly.com/v1',
      authMethod: 'apikey',
      hasApiKey: true,
      applicationId: undefined
    }

      at Object.<anonymous> (background/core/__tests__/api-client-integration.test.ts:80:15)

PASS src/sdk-bridge/__tests__/sdk/sdk-detector.test.ts
  SDKDetector
    detectSDK
      ✓ should return null when no SDK or context is found (3 ms)
      ✓ should detect SDK instance with createContext method (1 ms)
      ✓ should detect context at window.ABsmartlyContext (1 ms)
      ✓ should detect context at window.absmartly
      ✓ should detect context at window.sdk.context
      ✓ should detect context with context property (1 ms)
      ✓ should detect context from contexts array
      ✓ should skip invalid contexts in array
      ✓ should log context details when found
      ✓ should return cached context on subsequent calls
      ✓ should prioritize SDK locations in order
      ✓ should prioritize context locations in order
    getCachedContext
      ✓ should return null when no context is cached (1 ms)
      ✓ should return cached context after detection
    getContextPath
      ✓ should return null when no context is cached
      ✓ should return context path after detection
    clearCache
      ✓ should clear cached context and path
      ✓ should allow re-detection after clearing cache (6 ms)

  console.log
    hello world

      at eval (eval at execute (src/sdk-bridge/experiment/code-executor.ts:46:25), <anonymous>:3:9)

  console.log
    [ABsmartly Extension] [CodeExecutor] JavaScript code executed successfully for experiment: undefined

      at Function.log (src/sdk-bridge/utils/logger.ts:17:15)

  console.log
    [ABsmartly Extension] [CodeExecutor] JavaScript code executed successfully for experiment: undefined

      at Function.log (src/sdk-bridge/utils/logger.ts:17:15)

  console.log
    [ABsmartly Extension] [CodeExecutor] JavaScript code executed successfully for experiment: undefined

      at Function.log (src/sdk-bridge/utils/logger.ts:17:15)

  console.log
    [ABsmartly Extension] [CodeExecutor] JavaScript code executed successfully for experiment: undefined

      at Function.log (src/sdk-bridge/utils/logger.ts:17:15)

  console.log
       Current user: jonas@absmartly.com

      at Object.<anonymous> (background/core/__tests__/api-client-integration.test.ts:108:15)

  console.log
    [ABsmartly Extension] [CodeExecutor] JavaScript code executed successfully for experiment: test-exp

      at Function.log (src/sdk-bridge/utils/logger.ts:17:15)

  console.log
    [ABsmartly Extension] [CodeExecutor] JavaScript code executed successfully for experiment: undefined

      at Function.log (src/sdk-bridge/utils/logger.ts:17:15)

  console.log
    [ABsmartly Extension] [CodeExecutor] JavaScript code executed successfully for experiment: undefined

      at Function.log (src/sdk-bridge/utils/logger.ts:17:15)

  console.log
    [ABsmartly Extension] [CodeExecutor] JavaScript code executed successfully for experiment: undefined

      at Function.log (src/sdk-bridge/utils/logger.ts:17:15)

  console.log
    Generated selector: div[data-framer-name="Hero section"] div[data-framer-name="home_page_subtitle"] p

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:68:13)

FAIL src/__tests__/manifest-permissions.test.ts
  Manifest Permissions
    Required Permissions
      ✓ should have cookies permission declared (3 ms)
      ✓ should have storage permission declared
      ✓ should have tabs permission declared
    Host Permissions Configuration
      ✓ should have host_permissions array defined (5 ms)
      ✓ should NOT have empty host_permissions array (4 ms)
      ✓ should include ABsmartly wildcard domain in host_permissions (1 ms)
      ✓ should use HTTPS for ABsmartly host permission (4 ms)
      ✓ should use wildcard pattern for all ABsmartly subdomains (8 ms)
    Manifest V3 Compliance
      ✓ should have both cookies permission AND host_permissions for cookie access
      ✓ should not use manifest_version 2 patterns (1 ms)
    Cookie Access Requirements
      ✓ should meet all requirements for chrome.cookies.getAll() to work
      ✓ should have host_permissions that cover API endpoint subdomains (1 ms)
    Security Best Practices
      ✓ should not request excessive host permissions (2 ms)
      ✕ should use HTTPS for all host permissions (4 ms)
      ✓ should have minimal necessary permissions (6 ms)
    Web Accessible Resources
      ✓ should declare web_accessible_resources
      ✓ should have proper resource configuration
  Cookie Access Functionality
    getJWTCookie Function Requirements
      ✓ should have proper URL parsing for cookie domains (1 ms)
      ✓ should extract base domain correctly (1 ms)
      ✓ should query cookies with correct domain patterns
      ✓ should recognize JWT cookie formats (1 ms)
      ✓ should recognize JWT token by structure (3 parts separated by dots)
      ✓ should reject non-JWT strings
    Cookie Domain Scoping
      ✓ should understand cookie domain hierarchy
      ✓ should query multiple domain patterns to find cookies (1 ms)
    Chrome Cookies API Mock Tests
      ✓ should handle empty cookie result gracefully
      ✓ should deduplicate cookies by name-value combination
      ✓ should find JWT cookie by name priority
      ✓ should fallback to JWT structure detection if no named JWT cookie found

  ● Manifest Permissions › Security Best Practices › should use HTTPS for all host permissions

    expect(received).toMatch(expected)

    Expected pattern: /^https:\/\//
    Received string:  "http://localhost/*"

      132 |       // All host permissions should use HTTPS for security
      133 |       manifest.host_permissions.forEach((permission: string) => {
    > 134 |         expect(permission).toMatch(/^https:\/\//)
          |                            ^
      135 |       })
      136 |     })
      137 |

      at src/__tests__/manifest-permissions.test.ts:134:28
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/__tests__/manifest-permissions.test.ts:133:33)

  console.error
    [ABsmartly Extension] [CodeExecutor] Error executing JavaScript code: SyntaxError: Unexpected identifier 'is'
        at new Function (<anonymous>)
        at Function.execute (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/sdk-bridge/experiment/code-executor.ts:46:25)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/sdk-bridge/__tests__/experiment/code-executor.test.ts:108:36)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      24 |   static error(...args: any[]): void {
      25 |     if (this.DEBUG) {
    > 26 |       console.error('[ABsmartly Extension]', ...args)
         |               ^
      27 |     }
      28 |   }
      29 |

      at Function.error (src/sdk-bridge/utils/logger.ts:26:15)
      at Function.execute (src/sdk-bridge/experiment/code-executor.ts:70:14)
      at Object.<anonymous> (src/sdk-bridge/__tests__/experiment/code-executor.test.ts:108:36)

  console.log
    Selector 1: div[data-framer-name="Hero section"] div[data-framer-name="home_page_subtitle"] p

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:97:13)

  console.log
    Selector 2: div[data-framer-name="Features section"] div[data-framer-name="home_page_subtitle"] p

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:98:13)

  console.error
    Failed to change image source: Error: Test error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:441:52)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      187 |       this.notifications.show('Image source updated', '', 'success')
      188 |     } catch (error) {
    > 189 |       console.error('Failed to change image source:', error)
          |               ^
      190 |       this.notifications.show('Failed to change image source', '', 'error')
      191 |     }
      192 |   }

      at ElementActions.changeImageSource (src/visual-editor/core/element-actions.ts:189:15)
      at Object.<anonymous> (src/visual-editor/core/__tests__/element-actions.test.ts:444:7)

  console.log
    Semantic selector: div[data-framer-name="Hero section"] div[data-framer-name="home_page_subtitle"] p

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:121:13)

  console.warn
    [ABsmartly Extension] Invalid code provided to CodeExecutor

      33 |   static warn(...args: any[]): void {
      34 |     if (this.DEBUG) {
    > 35 |       console.warn('[ABsmartly Extension]', ...args)
         |               ^
      36 |     }
      37 |   }
      38 |

      at Function.warn (src/sdk-bridge/utils/logger.ts:35:15)
      at Function.execute (src/sdk-bridge/experiment/code-executor.ts:37:14)
      at Object.<anonymous> (src/sdk-bridge/__tests__/experiment/code-executor.test.ts:113:36)

  console.warn
    [ABsmartly Extension] Invalid code provided to CodeExecutor

      33 |   static warn(...args: any[]): void {
      34 |     if (this.DEBUG) {
    > 35 |       console.warn('[ABsmartly Extension]', ...args)
         |               ^
      36 |     }
      37 |   }
      38 |

      at Function.warn (src/sdk-bridge/utils/logger.ts:35:15)
      at Function.execute (src/sdk-bridge/experiment/code-executor.ts:37:14)
      at Object.<anonymous> (src/sdk-bridge/__tests__/experiment/code-executor.test.ts:118:36)

  console.error
    [ABsmartly Extension] [CodeExecutor] Error executing JavaScript code: Error: intentional error
        at eval (eval at execute (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/sdk-bridge/experiment/code-executor.ts:46:25), <anonymous>:4:15)
        at Function.execute (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/sdk-bridge/experiment/code-executor.ts:57:7)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/sdk-bridge/__tests__/experiment/code-executor.test.ts:126:36)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      24 |   static error(...args: any[]): void {
      25 |     if (this.DEBUG) {
    > 26 |       console.error('[ABsmartly Extension]', ...args)
         |               ^
      27 |     }
      28 |   }
      29 |

      at Function.error (src/sdk-bridge/utils/logger.ts:26:15)
      at Function.execute (src/sdk-bridge/experiment/code-executor.ts:70:14)
      at Object.<anonymous> (src/sdk-bridge/__tests__/experiment/code-executor.test.ts:126:36)

  console.log
    [ABsmartly Extension] [CodeExecutor] JavaScript code executed successfully for experiment: undefined

      at Function.log (src/sdk-bridge/utils/logger.ts:17:15)

  console.warn
    [ABsmartly Extension] [CodeExecutor] Potentially sensitive pattern detected: Direct eval() call

      33 |   static warn(...args: any[]): void {
      34 |     if (this.DEBUG) {
    > 35 |       console.warn('[ABsmartly Extension]', ...args)
         |               ^
      36 |     }
      37 |   }
      38 |

      at Function.warn (src/sdk-bridge/utils/logger.ts:35:15)
      at src/sdk-bridge/experiment/code-executor.ts:113:16
          at Array.forEach (<anonymous>)
      at Function.validate (src/sdk-bridge/experiment/code-executor.ts:111:23)
      at Object.<anonymous> (src/sdk-bridge/__tests__/experiment/code-executor.test.ts:212:35)

  console.warn
    [ABsmartly Extension] [CodeExecutor] Potentially sensitive pattern detected: Function constructor (allowed but unusual)

      33 |   static warn(...args: any[]): void {
      34 |     if (this.DEBUG) {
    > 35 |       console.warn('[ABsmartly Extension]', ...args)
         |               ^
      36 |     }
      37 |   }
      38 |

      at Function.warn (src/sdk-bridge/utils/logger.ts:35:15)
      at src/sdk-bridge/experiment/code-executor.ts:113:16
          at Array.forEach (<anonymous>)
      at Function.validate (src/sdk-bridge/experiment/code-executor.ts:111:23)
      at Object.<anonymous> (src/sdk-bridge/__tests__/experiment/code-executor.test.ts:217:35)

PASS src/components/__tests__/ExtensionUI-storage.test.tsx
  ExtensionUI Storage Clearing
    handleCreateExperiment behavior
      ✓ should clear storage for new experiments (experimentId: 0) (2 ms)
      ✓ should not load saved DOM changes after clearing storage
    handleCreateFromTemplate behavior
      ✓ should clear storage before loading template
      ✓ should use experimentId 0 when creating from template (1 ms)
    handleEditExperiment behavior
      ✓ should clear storage with the actual experiment ID
      ✓ should clear storage for each different experiment being edited
      ✓ should prevent loading stale data when switching between experiments
    handleExperimentClick behavior
      ✓ should clear storage before loading experiment details (1 ms)
      ✓ should clear storage for each different experiment being viewed
    Storage clearing across different navigation actions
      ✓ should clear with experimentId 0 for create actions
      ✓ should clear with actual ID for edit and detail actions
      ✓ should clear storage independently for different navigation flows (14 ms)
    Edge cases and error handling
      ✓ should handle large experiment IDs (1 ms)
      ✓ should not throw if clearAllExperimentStorage rejects (2 ms)

PASS src/sdk-bridge/__tests__/experiment/code-executor.test.ts
  CodeExecutor
    execute
      ✓ should execute simple console.log code (31 ms)
      ✓ should have access to element parameter (4 ms)
      ✓ should have access to document object (3 ms)
      ✓ should have access to window object (33 ms)
      ✓ should pass experimentName as parameter (4 ms)
      ✓ should handle multiple statements (11 ms)
      ✓ should handle loops (3 ms)
      ✓ should handle conditional logic (3 ms)
      ✓ should return false for invalid code (8 ms)
      ✓ should return false for null code (18 ms)
      ✓ should return false for empty string code (1 ms)
      ✓ should handle runtime errors gracefully (1 ms)
      ✓ should be able to modify element styles (13 ms)
      ○ skipped should prevent direct access to eval
    validate
      ✓ should validate simple code as valid (1 ms)
      ✓ should reject null code
      ✓ should reject empty string
      ✓ should reject code exceeding max length (1 ms)
      ✓ should warn about eval patterns
      ✓ should warn about Function constructor
      ✓ should allow normal code patterns (1 ms)

  console.error
    [ElementActions] Failed to insert new block: Error: Dialog error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:724:52)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      374 |       }
      375 |     } catch (error) {
    > 376 |       console.error('[ElementActions] Failed to insert new block:', error)
          |               ^
      377 |       this.notifications.show('Failed to insert element', '', 'error')
      378 |     }
      379 |   }

      at ElementActions.insertNewBlock (src/visual-editor/core/element-actions.ts:376:15)
      at Object.<anonymous> (src/visual-editor/core/__tests__/element-actions.test.ts:727:7)

  console.error
    Failed to hide element: Error: Selector generation failed
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:939:15
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:305:39
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:312:13
        at mockConstructor (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:102:19)
        at generateRobustSelector (eval at _createMockFunction (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:460:31), <anonymous>:3:68)
        at ElementActions.getSelector (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/element-actions.ts:697:34)
        at ElementActions.hideElement (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/element-actions.ts:122:29)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:949:35
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/expect/build/index.js:1824:9)
        at Object.throwingMatcher [as toThrow] (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/expect/build/index.js:2235:93)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:949:54)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      134 |       this.deselectElement()
      135 |     } catch (error) {
    > 136 |       console.error('Failed to hide element:', error)
          |               ^
      137 |       this.notifications.show('Failed to hide element', '', 'error')
      138 |     }
      139 |   }

      at ElementActions.hideElement (src/visual-editor/core/element-actions.ts:136:15)
      at src/visual-editor/core/__tests__/element-actions.test.ts:949:35
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.<anonymous> (src/visual-editor/core/__tests__/element-actions.test.ts:949:54)

  console.error
    Failed to copy to clipboard: Error: Clipboard write failed
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:976:57)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      250 |           this.notifications.show('Element HTML copied to clipboard!', '', 'success')
      251 |         }).catch((error) => {
    > 252 |           console.error('Failed to copy to clipboard:', error)
          |                   ^
      253 |           this.notifications.show('Failed to copy to clipboard', '', 'error')
      254 |         })
      255 |       } else {

      at src/visual-editor/core/element-actions.ts:252:19

PASS src/components/__tests__/VariantList-storage.test.tsx
  VariantList Storage Key Logic
    Storage key generation for experimentId 0 (new experiments)
      ✓ should use experiment-new-variants key instead of experiment-0-variants
      ✓ should preserve variants saved with experiment-new-variants key
    Storage key generation for real experiments
      ✓ should use experiment-{id}-variants key for experimentId > 0
      ✓ should maintain separate storage for different experiments (1 ms)
    Key consistency across load and save operations
      ✓ should use same key for loading and saving when experimentId is 0
      ✓ should use same key for loading and saving when experimentId is real
    Edge cases
      ✓ should handle negative experiment IDs correctly
      ✓ should not mix new and real experiment storage

  console.error
    Failed to copy selector to clipboard: Error: Clipboard write failed
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:1002:57)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      271 |           this.notifications.show(`Selector copied: ${selector}`, '', 'success')
      272 |         }).catch((error) => {
    > 273 |           console.error('Failed to copy selector to clipboard:', error)
          |                   ^
      274 |           this.notifications.show('Failed to copy selector to clipboard', '', 'error')
      275 |         })
      276 |       } else {

      at src/visual-editor/core/element-actions.ts:273:19

  console.error
    Failed to copy element: Error: Failed to access outerHTML
        at HTMLElement.get (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:1052:17)
        at ElementActions.copyElement (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/element-actions.ts:247:41)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:1061:28)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      257 |       }
      258 |     } catch (error) {
    > 259 |       console.error('Failed to copy element:', error)
          |               ^
      260 |       this.notifications.show('Failed to copy element', '', 'error')
      261 |     }
      262 |   }

      at ElementActions.copyElement (src/visual-editor/core/element-actions.ts:259:15)
      at Object.<anonymous> (src/visual-editor/core/__tests__/element-actions.test.ts:1061:28)

  console.error
    Failed to copy selector: Error: Selector generation error
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:1071:15
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:305:39
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:312:13
        at mockConstructor (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:102:19)
        at generateRobustSelector (eval at _createMockFunction (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:460:31), <anonymous>:3:68)
        at ElementActions.getSelector (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/element-actions.ts:697:34)
        at ElementActions.copySelectorPath (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/element-actions.ts:268:29)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/element-actions.test.ts:1080:28)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      278 |       }
      279 |     } catch (error) {
    > 280 |       console.error('Failed to copy selector:', error)
          |               ^
      281 |       this.notifications.show('Failed to copy selector', '', 'error')
      282 |     }
      283 |   }

      at ElementActions.copySelectorPath (src/visual-editor/core/element-actions.ts:280:15)
      at Object.<anonymous> (src/visual-editor/core/__tests__/element-actions.test.ts:1080:28)

PASS src/visual-editor/core/__tests__/element-actions.test.ts
  ElementActions
    Constructor and Initialization
      ✓ should initialize with correct dependencies (9 ms)
      ✓ should sync with state manager changes (2 ms)
    Element Selection
      ✓ should select an element successfully (2 ms)
      ✓ should deselect previous element when selecting new one (1 ms)
      ✓ should deselect current element (2 ms)
      ✓ should handle deselection when no element is selected (1 ms)
    Hover Tooltip Management
      ✓ should show hover tooltip at correct position (42 ms)
      ✓ should adjust tooltip position to stay within viewport (1 ms)
      ✓ should remove existing tooltip before showing new one (1 ms)
      ✓ should remove hover tooltip (1 ms)
      ✓ should handle removeHoverTooltip when no tooltip exists (1 ms)
    Element Manipulation - Hide
      ✓ should hide selected element (110 ms)
      ✓ should not hide when no element is selected (1 ms)
    Element Manipulation - Change Image Source
      ✓ should change img src attribute (18 ms)
      ✓ should change background-image style (10 ms)
      ✓ should not change when dialog is cancelled (1 ms)
      ✓ should not change when no element is selected (1 ms)
      ✓ should handle errors gracefully (80 ms)
    Element Manipulation - Delete
      ✓ should delete selected element (3 ms)
      ✓ should not delete when no element is selected
    Copy Operations
      ✓ should copy element HTML to clipboard (1 ms)
      ✓ should copy selector path to clipboard (1 ms)
      ✓ should not copy when no element is selected
    Move Element Operations
      ✓ should move element up (1 ms)
      ✓ should move element down (1 ms)
      ✓ should not move element up when it is first child (1 ms)
      ✓ should not move element down when it is last child
      ✓ should not move when no element is selected (7 ms)
      ✓ should not move when element has no parent (3 ms)
    Insert New Block
      ✓ should not insert when no element is selected (14 ms)
      ✓ should insert block when dialog returns options (12 ms)
      ✓ should not insert when dialog is cancelled (2 ms)
      ✓ should handle errors gracefully (13 ms)
      ✓ should sanitize HTML before insertion (4 ms)
    Show Relative Element Selector
      ✓ should show placeholder notification for relative element selector (1 ms)
    Clear All Changes
      ✓ should clear all changes when confirmed (1 ms)
      ✓ should not clear changes when cancelled
    Utility Methods - Selector Generation
      ✓ should generate selector for element (1 ms)
      ✓ should use consistent selector options (1 ms)
    Utility Methods - Extension Element Detection
      ✓ should detect ABSmartly extension elements by ID
      ✓ should detect ABSmartly extension elements by className string (7 ms)
      ✓ should detect ABSmartly extension elements by className object (SVG) (1 ms)
      ✓ should detect ABSmartly extension elements in parent hierarchy (1 ms)
      ✓ should not detect regular elements as extension elements (1 ms)
      ✓ should handle elements with no className
      ✓ should handle elements with null className (1 ms)
    Edge Cases and Error Handling
      ✓ should handle element selection with no existing classes
      ✓ should handle selector generation errors gracefully (13 ms)
      ✓ should handle clipboard API not available
      ✓ should handle clipboard writeText failure for copyElement (1 ms)
      ✓ should handle clipboard writeText failure for copySelectorPath (50 ms)
      ✓ should handle clipboard API not available for copySelectorPath (11 ms)
      ✓ should handle exceptions in copyElement method (10 ms)
      ✓ should handle exceptions in copySelectorPath method (7 ms)
      ✓ should handle DOM manipulation on detached elements (4 ms)
      ✓ should handle empty text content in tooltip (2 ms)
      ✓ should handle multiple consecutive tooltip operations (2 ms)
    Integration with StateManager
      ✓ should properly sync with state changes (4 ms)
      ✓ should handle state updates with null elements (2 ms)
      ✓ should handle state updates with complex changes (19 ms)

PASS src/sdk-bridge/__tests__/dom/preview-manager.test.ts
  PreviewManager
    applyPreviewChange
      ✓ should return false for invalid change without selector (8 ms)
      ✓ should return false for invalid change without type (1 ms)
      ✓ should skip disabled changes (1 ms)
      ✓ should return false when no elements match selector (4 ms)
      ✓ should apply text change (17 ms)
      ✓ should apply HTML change (6 ms)
      ✓ should sanitize HTML during change (2 ms)
      ✓ should apply style change with object (9 ms)
      ✓ should apply style change with string (47 ms)
      ✓ should apply class change (2 ms)
      ✓ should apply attribute change (3 ms)
      ✓ should apply delete change by hiding (2 ms)
      ✓ should execute javascript code (2 ms)
      ✓ should have access to element in javascript execution (1 ms)
      ✓ should have access to document in javascript execution (2 ms)
      ✓ should pass experimentName to javascript execution (5 ms)
      ✓ should return false for javascript with missing value (2 ms)
      ✓ should return false for javascript with non-string value (1 ms)
      ✓ should handle javascript execution errors gracefully (1 ms)
      ✓ should store original state before applying change (3 ms)
      ✓ should apply changes to multiple elements (2 ms)
      ✓ should not reapply changes to already tracked elements (5 ms)
    removePreviewChanges
      ✓ should restore element to original state (3 ms)
      ✓ should remove tracking attributes (3 ms)
      ✓ should not affect elements from other experiments (1 ms)
      ✓ should return false when no elements were restored (2 ms)
      ✓ should restore elements with __preview__ marker (1 ms)
      ✓ should restore elements from data-absmartly-original attribute (14 ms)
      ✓ should handle invalid JSON in data-absmartly-original gracefully (2 ms)
      ✓ should restore complete element state (24 ms)
    clearAll
      ✓ should remove all preview changes (5 ms)
    getPreviewCount
      ✓ should return 0 initially
      ✓ should return correct count after applying changes (2 ms)
      ✓ should return correct count after removing changes (1 ms)
    integration scenarios
      ✓ should handle complete preview lifecycle (13 ms)
      ✓ should handle multiple changes to same element (10 ms)
      ✓ should handle overlapping experiments (2 ms)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
       Found 28 experiments

      at Object.<anonymous> (background/core/__tests__/api-client-integration.test.ts:146:15)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: [ { selector: '.test', type: 'text', value: 'Test content' } ]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: { experiments: [Array] },
        timestamp: '2025-10-28T20:52:15.188Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: { experiments: [ 'exp1', 'exp2' ] },
      timestamp: '2025-10-28T20:52:15.188Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.196Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received window message: SDK_EVENT_BROADCAST {
      source: 'absmartly-extension-incoming',
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: { experiments: [Array] },
        timestamp: '2025-10-28T20:52:15.210Z'
      }
    }

      at handleWindowMessage (src/components/EventsDebugPage.tsx:84:17)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      source: 'absmartly-extension-incoming',
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: { experiments: [Array] },
        timestamp: '2025-10-28T20:52:15.210Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: { experiments: [ 'exp1', 'exp2' ] },
      timestamp: '2025-10-28T20:52:15.210Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.211Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Already active, returning

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:161:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.213Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: null,
        timestamp: '2025-01-01T10:00:00.000Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: null,
      timestamp: '2025-01-01T10:00:00.000Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.234Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Already active, returning

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:161:15)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'exposure',
        data: { experiment: 'test_exp', variant: 1 },
        timestamp: '2025-01-01T10:00:01.000Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'exposure',
      data: { experiment: 'test_exp', variant: 1 },
      timestamp: '2025-01-01T10:00:01.000Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 1 New count: 2

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.239Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.244Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Preview header found, keeping it visible

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:174:15)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.249Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
       Found 7 applications

      at Object.<anonymous> (background/core/__tests__/api-client-integration.test.ts:168:15)

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'error',
        data: null,
        timestamp: '2025-10-28T20:52:15.263Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'error',
      data: null,
      timestamp: '2025-10-28T20:52:15.263Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: null,
        timestamp: '2025-10-28T20:52:15.265Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: null,
      timestamp: '2025-10-28T20:52:15.265Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 1 New count: 2

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    Case 1 (Features section) selector: div[data-framer-name="Features"] div[data-framer-name="Feature"]:nth-of-type(1) p

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:172:13)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'refresh',
        data: null,
        timestamp: '2025-10-28T20:52:15.267Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'refresh',
      data: null,
      timestamp: '2025-10-28T20:52:15.267Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 2 New count: 3

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'publish',
        data: null,
        timestamp: '2025-10-28T20:52:15.269Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'publish',
      data: null,
      timestamp: '2025-10-28T20:52:15.269Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 3 New count: 4

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'exposure',
        data: null,
        timestamp: '2025-10-28T20:52:15.271Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'exposure',
      data: null,
      timestamp: '2025-10-28T20:52:15.271Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.274Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:210:13)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 4 New count: 5

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'goal',
        data: null,
        timestamp: '2025-10-28T20:52:15.275Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'goal',
      data: null,
      timestamp: '2025-10-28T20:52:15.275Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 5 New count: 6

      at src/components/EventsDebugPage.tsx:72:21

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/visual-editor.ts:211:13)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/visual-editor.test.ts:351:14)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modulePASS src/sdk-bridge/__tests__/utils/html-sanitizer.test.ts
  sanitizeHTML
    basic functionality
      ✓ should return empty string for null/undefined/empty input (3 ms)
      ✓ should preserve safe HTML (13 ms)
      ✓ should preserve safe elements (2 ms)
    dangerous tag removal
      ✓ should remove script tags (21 ms)
      ✓ should remove iframe tags (6 ms)
      ✓ should remove object tags (6 ms)
      ✓ should remove embed tags
      ✓ should remove link tags (1 ms)
      ✓ should remove style tags (1 ms)
      ✓ should remove meta tags (1 ms)
      ✓ should remove base tags (1 ms)
    event handler removal
      ✓ should remove onerror attributes (1 ms)
      ✓ should remove onclick attributes
      ✓ should remove onload attributes (1 ms)
      ✓ should remove all on* event handlers (2 ms)
      ✓ should remove mixed case event handlers (1 ms)
    dangerous URI removal
      ✓ should remove javascript: URIs from href
      ✓ should remove javascript: URIs from src (1 ms)
      ✓ should remove data: URIs from href
      ✓ should remove data: URIs from src
      ✓ should allow safe URLs
      ✓ should allow safe image sources
    complex XSS attempts
      ✓ should handle multiple attack vectors in one string (1 ms)
      ✓ should handle nested malicious elements (1 ms)
      ✓ should handle encoded attack attempts
    edge cases
      ✓ should handle empty tags (9 ms)
      ✓ should handle self-closing tags (1 ms)
      ✓ should handle deeply nested safe HTML
      ✓ should handle HTML with attributes (15 ms)
      ✓ should handle mixed safe and unsafe content (7 ms)
    real-world use cases
      ✓ should sanitize user-generated content (1 ms)
      ✓ should sanitize rich text editor output (4 ms)
      ✓ should handle DOM changes from experiments (3 ms)

PASS src/components/ui/__tests__/SearchableSelect.test.tsx
  SearchableSelect
    Dropdown Opening/Closing
      ✓ should open dropdown when trigger is clicked (79 ms)
      ✓ should close dropdown when trigger is clicked again (6 ms)
      ✓ should close dropdown when clicking outside (14 ms)
    Single Select Mode
      ✓ should select option and close dropdown when option is clicked (3 ms)
      ✓ should display selected option in trigger (2 ms)
    Multi Select Mode
      ✓ should keep dropdown open when option is clicked (6 ms)
      ✓ should select multiple options (11 ms)
      ✓ should deselect option when clicking selected option (5 ms)
      ✓ should show "Clear all" button when options are selected (4 ms)
      ✓ should clear all selections when "Clear all" is clicked (3 ms)
      ✓ should keep dropdown open when "Clear all" is clicked (38 ms)
    Search Functionality
      ✓ should filter options based on search term (9 ms)
      ✓ should keep dropdown open when clicking in search box (7 ms)
    Avatar Rendering
      ✓ should render avatar image when avatar URL is provided (14 ms)
      ✓ should render initials when no avatar is provided (4 ms)
      ✓ should fallback to initials when avatar fails to load (8 ms)
      ✓ should render team initials and color (10 ms)
    Event Propagation
      ✓ should not close dropdown when clicking option (stopPropagation) (28 ms)
      ✓ should not close dropdown when clicking "Clear all" (stopPropagation) (30 ms)
    Disabled State
      ✓ should not open dropdown when disabled (14 ms)
      ✓ should not open dropdown when loading (6 ms)

PASS src/visual-editor/core/__tests__/visual-editor.test.ts
  VisualEditor
    Constructor
      ✓ should initialize with valid options (40 ms)
      ✓ should initialize with initial changes (3 ms)
      ✓ should initialize all core modules (26 ms)
      ✓ should initialize ElementActions with correct parameters (2 ms)
      ✓ should initialize EditorCoordinator with all modules and callbacks (2 ms)
    start()
      ✓ should start successfully when not active (16 ms)
      ✓ should return already active when editor is already active via isActive flag (3 ms)
      ✓ should return already active when editor is already active (23 ms)
      ✓ should inject styles when starting (7 ms)
      ✓ should keep preview header visible when starting (4 ms)
      ✓ should set isActive flag when starting (8 ms)
      ✓ should log version and timestamp (2 ms)
    stop()
      ✓ should stop when active and not send changes (22 ms)
      ✓ should not call teardown when not active (16 ms)
      ✓ should remove styles when stopping (6 ms)
      ✓ should reset isActive flag when stopping (20 ms)
      ✓ should not send unsaved changes when stopping (5 ms)
    destroy()
      ✓ should call stop when destroyed (5 ms)
    getChanges()
      ✓ should return empty array by default (21 ms)
      ✓ should return initial changes if provided (13 ms)
    Style Management
      ✓ should inject editor styles (3 ms)
      ✓ should inject global styles (4 ms)
      ✓ should remove styles when stopped (20 ms)
    Change Management
      ✓ should add text change to undoRedoManager but not auto-save (5 ms)
      ✓ should add style change to undoRedoManager but not auto-save (2 ms)
      ✓ should save changes when saveChanges is called (11 ms)
      ✓ should handle multiple change types (2 ms)
    saveChanges()
      ✓ should save changes and show notification (12 ms)
      ✓ should handle empty changes (4 ms)
    Integration with ElementActions
      ✓ should delegate getSelector to ElementActions (5 ms)
      ✓ should delegate element operations to ElementActions (13 ms)
    Integration with EditorCoordinator
      ✓ should setup all modules when starting (4 ms)
      ✓ should teardown all modules when stopping (19 ms)
      ✓ should provide correct callbacks to coordinator (3 ms)
      ✓ should call stop through coordinator callback (1 ms)
    Edge Cases and Error Handling
      ✓ should handle missing preview header gracefully (4 ms)
      ✓ should handle chrome API errors gracefully (1 ms)
      ✓ should handle multiple start calls gracefully (24 ms)
      ✓ should handle multiple stop calls gracefully (11 ms)
      ✓ should handle removeStyles callback (1 ms)
      ✓ should return early when already active (2 ms)
      ✓ should handle onChangesUpdate callback errors in saveChanges (11 ms)
      ✓ should handle chrome API unavailable gracefully (17 ms)
  initVisualEditor
    ✓ should create and start visual editor (4 ms)
    ✓ should handle initial changes (10 ms)
    ✓ should setup message handler for changes (12 ms)
    ✓ should create new editor and start it when called (12 ms)
    ✓ should store editor instance globally (3 ms)
    ✓ should handle onChangesUpdate callback correctly (2 ms)

PASS src/utils/__tests__/selector-generator-visual.test.ts
  isAutoGenerated
    ✓ should detect ABSmartly-added attributes (4 ms)
    ✓ should detect IDs starting with numbers (3 ms)
    ✓ should detect framework-specific patterns (1 ms)
    ✓ should detect hex strings and random patterns (1 ms)
  getSelector - Performance Priority
    Priority 1: Unique IDs (fastest)
      ✓ should return ID selector for element with unique ID (8 ms)
      ✓ should use unique ID directly when element has one (10 ms)
      ✓ should escape special characters in IDs (2 ms)
    Priority 2: Duplicate IDs with simple parent (1.08x slower)
      ✓ should handle duplicate IDs with parent context (15 ms)
      ✓ should disambiguate duplicate IDs at same level (21 ms)
    Priority 3: Tag paths with parent IDs (2-3x slower)
      ✓ should build tag path from parent ID (5 ms)
      ✓ should prefer descendant over child combinator for performance (5 ms)
    Priority 4: Data attributes (30-40x slower)
      ✓ should use data-testid when no stable ID available (2 ms)
      ✓ should prefer unique ID over data-testid for performance (14 ms)
      ✓ should use data-test when data-testid not available (5 ms)
      ✓ should use data-cy for Cypress tests (6 ms)
      ✓ should ignore data-absmartly attributes (4 ms)
    Priority 5: Avoiding nth-child (100x+ slower)
      ✓ should not add nth-child for single children (6 ms)
      ✓ should use nth-of-type when absolutely necessary (16 ms)
      ✓ should handle multiple identical siblings efficiently (15 ms)
  getSelector - Complex Real-World Cases
    E-commerce layouts (Amazon-like)
      ✓ should handle product cards with duplicate IDs (9 ms)
      ✓ should handle deeply nested product listings (9 ms)
    Auto-generated IDs and classes
      ✓ should ignore all types of auto-generated IDs (6 ms)
      ✓ should handle Tailwind and CSS module classes (1 ms)
    Edge cases
      ✓ should handle empty element gracefully
      ✓ should handle body element
      ✓ should handle elements at max depth (3 ms)
      ✓ should handle special HTML5 semantic elements (8 ms)
      ✓ should handle SVG elements (2 ms)
    Performance considerations
      ✓ should prefer descendant selector over child combinator (1 ms)
      ✓ should minimize use of nth-child selectors (3 ms)
      ✓ should create shortest possible unique selector (1 ms)

PASS src/__tests__/sdk-api.test.ts
  ABsmartly SDK API Connection
    ✓ should create SDK instance (1 ms)
    ✓ should create context and check experiments (54 ms)
    ✓ should test SDK event methods (227 ms)

PASS src/components/settings/__tests__/QueryStringOverridesSection.test.tsx
  QueryStringOverridesSection
    Rendering with DEFAULT_CONFIG
      ✓ should render with DEFAULT_CONFIG.queryPrefix as placeholder (3 ms)
      ✓ should display example text with DEFAULT_CONFIG.queryPrefix (3 ms)
      ✓ should render with correct default queryPrefix value "_" (2 ms)
    Input interactions
      ✓ should call onQueryPrefixChange when input value changes (8 ms)
      ✓ should call onPersistQueryToCookieChange when checkbox is toggled (5 ms)
    Props display
      ✓ should display custom queryPrefix value when provided (2 ms)
      ✓ should show checkbox checked when persistQueryToCookie is true (27 ms)
      ✓ should show checkbox unchecked when persistQueryToCookie is false (2 ms)
    Component structure
      ✓ should render section heading (1 ms)
      ✓ should render input label (1 ms)
      ✓ should render helper text for query prefix (1 ms)
      ✓ should render helper text for persist to cookie checkbox (1 ms)
    DEFAULT_CONFIG integration
      ✓ should correctly use DEFAULT_CONFIG placeholder value (1 ms)
      ✓ should display correct example with DEFAULT_CONFIG value
    Memoization
      ✓ should be wrapped with React.memo (3 ms)

PASS src/utils/__tests__/selector-generator-nth-type.test.ts
  nth-of-type selector generation
    ✓ should use semantic parent (Hero section) instead of positional selectors (39 ms)
    ✓ should disambiguate between sections using semantic parents (12 ms)
    ✓ should prefer semantic attributes over auto-generated classes (5 ms)
  Real-world absmartly.com scenarios
    ✓ Case 1: Features section - "Discuss experiments" paragraph (551 ms)
    ✓ Case 2: Product Highlights - paragraph that needs Features Row disambiguation (302 ms)
    ✓ Case 3: GST engine paragraph - requires Product Highlights + Features Row 1 disambiguation (270 ms)
  Target with semantic attributes but no semantic ancestors
    ✓ should use semantic attribute with positional ancestors when no semantic ancestors exist (10 ms)
    ✓ should generate shortest selector with semantic target attribute (3 ms)

PASS src/visual-editor/core/__tests__/context-menu.test.ts
  ContextMenu
    Constructor and Initialization
      ✓ should create ContextMenu instance with StateManager (5 ms)
      ✓ should have default handleAction method that logs action (2 ms)
      ✓ should allow overriding handleAction method
    Menu Items
      ✓ should not include Move up and Move down in menu items (34 ms)
      ✓ should include Change image source for img elements (10 ms)
      ✓ should include Change image source for elements with background-image (7 ms)
      ✓ should not include Change image source for regular elements (2 ms)
      ✓ should include standard menu items (29 ms)
    show() method
      ✓ should create menu host element with correct ID and positioning (2 ms)
      ✓ should remove existing menu before showing new one (2 ms)
      ✓ should create shadow DOM with open mode (1 ms)
      ✓ should position menu correctly within viewport bounds (13 ms)
      ✓ should use absolute positioning when menu is taller than viewport (1 ms)
      ✓ should handle viewport boundaries correctly (8 ms)
    Menu Items Creation
      ✓ should create all menu actions (4 ms)
      ✓ should create menu items with correct structure (14 ms)
      ✓ should include shortcuts for specific actions (1 ms)
    Menu Item Rendering
      ✓ should create menu item HTML element with correct structure (1 ms)
      ✓ should create menu item without shortcut when not provided
    Event Handling and Interactions
      ✓ should handle menu item clicks and call handleAction (5 ms)
      ✓ should remove menu when handleAction is called (19 ms)
      ✓ should stop event propagation for menu clicks (1 ms)
    Click Outside to Close
      ✓ should close menu when clicking outside (3 ms)
      ✓ should handle backdrop click events (4 ms)
    Shadow DOM and Style Injection
      ✓ should inject correct styles for menu positioning (1 ms)
      ✓ should generate styles for absolute positioning (14 ms)
      ✓ should generate styles for fixed positioning (5 ms)
      ✓ should include scrollbar styles for overflow content (3 ms)
      ✓ should include hover styles for menu items (1 ms)
    Menu Positioning Edge Cases
      ✓ should handle negative coordinates (11 ms)
      ✓ should handle coordinates beyond viewport (3 ms)
      ✓ should handle scrolled page positioning (2 ms)
      ✓ should calculate menu dimensions correctly (1 ms)
    Menu Actions Catalog
      ✓ should have all expected edit actions (1 ms)
      ✓ should have all expected movement actions
      ✓ should have all expected clipboard actions
      ✓ should have all expected content actions
      ✓ should have all expected destructive actions (1 ms)
    Menu Item Icons and Labels
      ✓ should have appropriate icons for each action type (7 ms)
      ✓ should have descriptive labels for actions
      ✓ should use appropriate emoji icons (1 ms)
    Error Handling and Edge Cases
      ✓ should handle missing element gracefully (3 ms)
      ✓ should handle multiple rapid show calls (11 ms)
      ✓ should handle extreme viewport dimensions (2 ms)
    Accessibility and Keyboard Support
      ✓ should include user-select: none for menu items (1 ms)
      ✓ should have proper cursor styles for interactive elements (1 ms)
      ✓ should have adequate color contrast
      ✓ should have hover states for better UX
    Performance Considerations
      ✓ should reuse menu calculations efficiently (2 ms)
      ✓ should clean up previous menu before creating new one (8 ms)
    Shadow DOM Event Handlers
      ✓ should handle backdrop click events to close menu (5 ms)
      ✓ should handle menu container click events (2 ms)
      ✓ should handle menu container click without menu item (3 ms)
      ✓ should handle showNotification method
      ✓ should handle menu container click with action but no dataset (5 ms)

PASS src/visual-editor/ui/__tests__/image-source-dialog.test.ts
  ImageSourceDialog
    getCurrentImageSource
      ✓ should return src for img elements (3 ms)
      ✓ should extract URL from background-image (31 ms)
      ✓ should extract URL from background-image with double quotes (7 ms)
      ✓ should extract URL from background-image without quotes (2 ms)
      ✓ should return empty string for elements without images (1 ms)
      ✓ should return background-image string if URL cannot be extracted (4 ms)
    validateImageUrl
      ✓ should validate https URLs
      ✓ should validate http URLs (1 ms)
      ✓ should validate data URLs
      ✓ should validate absolute paths
      ✓ should reject empty strings (1 ms)
      ✓ should reject whitespace-only strings (2 ms)
      ✓ should reject invalid URLs
      ✓ should reject relative paths
    show
      ✓ should create dialog in DOM (23 ms)
      ✓ should pre-fill input with current source (13 ms)
      ✓ should return null when cancelled via backdrop (15 ms)
      ✓ should return null when cancelled via button (16 ms)
      ✓ should return new URL when applied with valid URL (15 ms)
      ✓ should show error for invalid URL (13 ms)
      ✓ should handle Enter key to apply (13 ms)
      ✓ should handle Escape key to cancel (13 ms)
      ✓ should hide error when user types (17 ms)
    remove
      ✓ should remove dialog from DOM (13 ms)
      ✓ should be safe to call multiple times

PASS background/core/__tests__/api-client.test.ts
  api-client
    isAuthError
      ✓ should return true for 401 status (2 ms)
      ✓ should return true for 403 status (1 ms)
      ✓ should return false for 404 status (1 ms)
      ✓ should return false for 500 status
      ✓ should return false for errors without response (1 ms)
    getJWTCookie
      ✓ should find JWT cookie by exact name "jwt"
      ✓ should find JWT cookie by name "JWT"
      ✓ should find JWT cookie by name "access_token" (1 ms)
      ✓ should find JWT-like cookie (3 parts with dots)
      ✓ should return null when no JWT cookie is found (1 ms)
      ✓ should handle invalid domain gracefully
      ✓ should deduplicate cookies from multiple sources
      ✓ should handle errors from chrome.cookies API (1 ms)
    validateAPIRequest
      ✓ should validate GET request
      ✓ should validate POST request with data (1 ms)
      ✓ should validate all HTTP methods (7 ms)
      ✓ should reject invalid HTTP method (1 ms)
      ✓ should reject empty path (1 ms)
    makeAPIRequest
      ✓ should make successful GET request with API key (2 ms)
      ✓ should make successful POST request with data
      ✓ should convert GET request data to query parameters
      ✓ should use JWT authentication when authMethod is jwt
      ✓ should handle JWT token that looks like Bearer token
      ✓ should throw AUTH_EXPIRED on 401 error (11 ms)
      ✓ should throw AUTH_EXPIRED when API key fails with 401
      ✓ should throw AUTH_EXPIRED when JWT fails with 401 (1 ms)
      ✓ should not retry when retryWithJWT is false
      ✓ should throw original error for non-auth errors (3 ms)
      ✓ should throw error when no API endpoint is configured
      ✓ should clean up API endpoint with trailing slashes
      ✓ should add /v1 to endpoint if not present
      ✓ should handle path without leading slash (1 ms)
      ✓ should filter out undefined and null query parameters
    openLoginPage
      ✓ should open login page when config is valid
      ✓ should not open login page when user is authenticated
      ✓ should return false when no config is provided (1 ms)
      ✓ should strip /v1 from endpoint URL

PASS src/components/__tests__/EventsDebugPage.test.tsx
  EventsDebugPage
    Initial State
      ✓ renders empty state when no events (136 ms)
      ✓ renders pause and clear buttons (50 ms)
    Event Capture
      ✓ captures SDK events from chrome.runtime.onMessage (33 ms)
      ✓ captures SDK events from window.postMessage (sidebar forwarding) (9 ms)
      ✓ captures multiple events in chronological order (newest first) (35 ms)
      ✓ displays different event types with correct colors (50 ms)
    Pause/Resume Functionality
      ✓ pauses event capture when pause button clicked (145 ms)
      ✓ resumes event capture when resume button clicked (29 ms)
    Clear Functionality
      ✓ shows confirmation dialog and clears events when confirmed (55 ms)
      ✓ cancels clear when cancel button clicked (25 ms)
      ✓ clears all events when confirmed (21 ms)
    Event Selection and Event Viewer
      ✓ opens event viewer when event is clicked (66 ms)
      ✓ sends correct data for event with null data (71 ms)
      ✓ opens event viewer for different events (66 ms)
    Event Data Formatting
      ✓ truncates long event data preview in list (13 ms)
    Timestamp Formatting
      ✓ formats timestamp as HH:MM:SS.mmm in event list (8 ms)
    Edge Cases
      ✓ handles events without data (9 ms)
      ✓ ignores non-SDK events (111 ms)
      ✓ handles events while paused without losing existing events (120 ms)

PASS src/__tests__/security-fixes.test.ts
  Security Fixes
    Fix #1: innerHTML XSS Protection
      ✓ should have DOMPurify available (1 ms)
      ✓ should sanitize malicious HTML (3 ms)
      ✓ should sanitize script tags (2 ms)
      ✓ should preserve safe HTML (1 ms)
    Fix #2: Code Injection Prevention
      ✓ should not execute code from new Function() (6 ms)
    Fix #3: Message Origin Validation
      ✓ should validate sender ID matches extension ID
      ✓ should reject messages without sender ID
    Fix #4: SSRF Protection
      ✓ should block localhost URLs (1 ms)
      ✓ should block private network URLs
      ✓ should allow public URLs (1 ms)
    Fix #5: API Key Encryption
      ✓ should use Plasmo Storage with secretKeyring option
    Fix #6: Input Validation with Zod
      ✓ should validate API request method (16 ms)
      ✓ should validate API request path (1 ms)
      ✓ should validate config schema (2 ms)
    Fix #7: JSON.parse Error Handling
      ✓ should handle malformed JSON gracefully
      ✓ should handle null/undefined JSON gracefully
      ✓ should parse valid JSON correctly
      ✓ should handle nested JSON parsing errors
    Integration: Multiple Security Layers
      ✓ should combine validation, sanitization, and error handling (5 ms)

PASS background/core/__tests__/api-client-integration.test.ts (5.247 s)
  API Client Integration Tests
    GET /auth/current-user
      ✓ should get current user info (449 ms)
      ✓ should fail with invalid API key (173 ms)
    GET /experiments
      ✓ should fetch experiments list (295 ms)
    GET /applications
      ✓ should fetch applications list (139 ms)
    GET /unit_types
      ✓ should fetch unit types list (136 ms)
    GET /metrics
      ✓ should fetch metrics list (163 ms)
    GET /experiment_tags
      ✓ should fetch experiment tags list (122 ms)
    GET /teams
      ✓ should fetch teams list (124 ms)
    GET /users
      ✓ should fetch users list (130 ms)
    GET /environments
      ✓ should fetch environments list (138 ms)
    Error Handling
      ✓ should identify auth errors correctly (1 ms)

PASS src/visual-editor/ui/__tests__/notifications.test.ts
  Notifications
    show() method
      ✓ should create and display a notification with title only (3 ms)
      ✓ should create a notification with title and message (1 ms)
      ✓ should display success notification with correct styling (2 ms)
      ✓ should display error notification with correct styling (1 ms)
      ✓ should display info notification with correct styling
      ✓ should default to info type when no type specified (1 ms)
      ✓ should apply correct CSS positioning and styling (1 ms)
      ✓ should append notification to document body (1 ms)
    Auto-dismiss functionality
      ✓ should auto-dismiss notification after 3 seconds (5 ms)
      ✓ should not auto-dismiss if manually removed first (4 ms)
    Multiple notification handling
      ✓ should create new notifications when called multiple times (1 ms)
      ✓ should update currentNotification reference (6 ms)
    remove() method
      ✓ should remove notification with slide-down animation (1 ms)
      ✓ should handle removal when no notification exists
      ✓ should handle multiple remove calls gracefully (1 ms)
    Animation styles management
      ✓ should add animation styles to document head
      ✓ should not duplicate animation styles (1 ms)
      ✓ should include slideUp animation keyframes (1 ms)
      ✓ should include slideDown animation keyframes
    Background color mapping
      ✓ should return correct color for success type (1 ms)
      ✓ should return correct color for error type
      ✓ should return correct color for info type (1 ms)
    Memory management
      ✓ should clear currentNotification reference on removal
      ✓ should clear currentNotification on auto-dismiss (1 ms)
    DOM manipulation safety
      ✓ should handle missing document.body gracefully (8 ms)
      ✓ should handle HTML content safely (1 ms)
    Z-index and positioning
      ✓ should use maximum z-index for overlay
      ✓ should center notification horizontally
      ✓ should position notification at bottom of viewport
    Accessibility considerations
      ✓ should use appropriate semantic markup (1 ms)
      ✓ should be readable with system fonts
      ✓ should have sufficient contrast with white text (1 ms)
    Edge cases
      ✓ should handle empty title
      ✓ should handle empty message with title (1 ms)
      ✓ should handle very long content
      ✓ should handle special characters in content (1 ms)
    Performance considerations
      ✓ should reuse style element across instances (4 ms)
      ✓ should track currentNotification reference correctly with rapid calls (4 ms)

PASS src/sdk-bridge/__tests__/sdk/sdk-interceptor.test.ts
  SDKInterceptor
    interceptEventLogger
      ✓ should intercept event logger on context
      ✓ should not intercept if context is null (1 ms)
      ✓ should not intercept if already intercepted
      ✓ should warn if _eventLogger is undefined
      ✓ should call callback with event data
      ✓ should call original event logger
      ✓ should handle null event data
      ✓ should handle callback errors gracefully (1 ms)
      ✓ should work without callback
      ✓ should clone event data to prevent mutation
      ✓ should log context details
    interceptSDKCreateContext
      ✓ should intercept SDK createContext method (1 ms)
      ✓ should not intercept if SDK is null
      ✓ should not intercept if createContext does not exist
      ✓ should not intercept if already intercepted
      ✓ should call original createContext
      ✓ should return context from original createContext
      ✓ should intercept eventLogger on new context
      ✓ should log interception (1 ms)
    interceptSDKConstructor
      ✓ should intercept SDK constructor
      ✓ should not intercept if sdkModule is null
      ✓ should not intercept if SDK class does not exist
      ✓ should not intercept if already intercepted
      ✓ should create SDK instance with original constructor
      ✓ should intercept createContext on new SDK instance
      ✓ should preserve static properties (1 ms)
      ✓ should log constructor interception
      ✓ should handle SDK instance without createContext (3 ms)
    constructor
      ✓ should accept callbacks (1 ms)
      ✓ should work without callbacks (1 ms)

PASS background/utils/__tests__/security.test.ts
  Security Utilities
    validateAPIEndpoint
      allowed domains
        ✓ should allow exact domain match for absmartly.com (1 ms)
        ✓ should allow exact domain match for absmartly.io
        ✓ should allow subdomain of absmartly.com
        ✓ should allow subdomain of absmartly.io
        ✓ should allow nested subdomain
        ✓ should allow HTTPS protocol (1 ms)
        ✓ should allow HTTP protocol
        ✓ should allow endpoint with path
        ✓ should allow endpoint with port
        ✓ should allow endpoint with query string
        ✓ should allow endpoint with fragment
      blocked domains
        ✓ should block different domain (16 ms)
        ✓ should block localhost (1 ms)
        ✓ should block domain that contains allowed domain but is not subdomain (1 ms)
        ✓ should block domain with similar name (1 ms)
        ✓ should block IP address
        ✓ should block empty domain (2 ms)
        ✓ should block domain without TLD match (1 ms)
      invalid URLs
        ✓ should reject invalid URL format (1 ms)
        ✓ should reject empty string
        ✓ should reject URL without protocol (1 ms)
        ✓ should reject malformed URL (1 ms)
    isSSRFSafe
      safe URLs
        ✓ should allow public domain
        ✓ should allow CDN URL
        ✓ should allow HTTPS URL
        ✓ should allow public IP outside private ranges
        ✓ should allow URL with port (1 ms)
        ✓ should allow URL with path
      blocked localhost
        ✓ should block localhost
        ✓ should block localhost with port (1 ms)
        ✓ should block 127.0.0.1
        ✓ should block 127.0.0.1 with port (1 ms)
        ✓ should block 0.0.0.0 (1 ms)
      blocked private networks
        ✓ should block 192.168.x.x network (6 ms)
        ✓ should block 10.x.x.x network (2 ms)
        ✓ should block 172.16-31.x.x networks (2 ms)
        ✓ should block all 172.16-31 subnets (11 ms)
      invalid URLs
        ✓ should reject invalid URL format
        ✓ should reject empty string (1 ms)
        ✓ should reject malformed URL (1 ms)
    validateAvatarUrl
      valid avatar URLs
        ✓ should validate public HTTPS URL
        ✓ should validate CDN URL
        ✓ should validate URL with query parameters
      invalid avatar URLs
        ✓ should reject localhost URL (1 ms)
        ✓ should reject private IP (1 ms)
        ✓ should reject invalid URL format
        ✓ should reject empty string (5 ms)
        ✓ should reject 127.0.0.1 (1 ms)
    validateExtensionSender
      valid senders
        ✓ should validate matching sender ID
        ✓ should validate exact string match
      invalid senders
        ✓ should reject different sender ID (1 ms)
        ✓ should reject undefined sender ID (1 ms)
        ✓ should reject empty sender ID
        ✓ should reject similar but not exact match (1 ms)
        ✓ should reject case-different match (1 ms)
        ✓ should reject sender with extra characters (1 ms)
    sanitizeHostname
      ✓ should extract hostname from valid URL
      ✓ should extract hostname with subdomain
      ✓ should extract hostname with port
      ✓ should extract hostname from HTTP URL
      ✓ should return original string for invalid URL
      ✓ should return original string for empty input
      ✓ should extract hostname from complex URL (1 ms)
      ✓ should handle localhost
      ✓ should handle IP addresses
    constants
      ✓ should have correct ALLOWED_API_DOMAINS
      ✓ should have comprehensive BLOCKED_HOSTS (1 ms)
      ✓ should include all 172.16-31 subnets in BLOCKED_HOSTS
      ✓ should not mutate ALLOWED_API_DOMAINS
      ✓ should not mutate BLOCKED_HOSTS
    edge cases and security scenarios
      URL encoding attacks
        ✓ should block URL-encoded localhost (1 ms)
        ✓ should handle double-encoded URLs
      protocol variations
        ✓ should handle FTP protocol for SSRF check (1 ms)
        ✓ should handle file protocol
      IPv6 addresses
        ✓ should handle IPv6 localhost
        ✓ should handle IPv6 address
      domain validation edge cases
        ✓ should not allow domain that starts with allowed domain
        ✓ should handle punycode domains (1 ms)
        ✓ should handle trailing dots in hostname (1 ms)
      null and undefined handling
        ✓ should handle validateExtensionSender with null
        ✓ should handle sanitizeHostname with special characters
    integration scenarios
      ✓ should validate complete avatar proxy flow (1 ms)
      ✓ should block complete SSRF attack flow (4 ms)
      ✓ should validate API endpoint security flow (1 ms)

PASS background/utils/__tests__/validation.test.ts
  Validation Utilities
    ConfigSchema
      valid configurations
        ✓ should validate minimal valid config (8 ms)
        ✓ should validate full valid config with all fields (2 ms)
        ✓ should validate config with apikey auth method
        ✓ should accept optional fields as undefined (4 ms)
      invalid configurations
        ✓ should reject config without apiEndpoint
        ✓ should reject config with invalid URL for apiEndpoint
        ✓ should reject config with invalid URL for sdkEndpoint (1 ms)
        ✓ should reject config with invalid URL for sdkUrl
        ✓ should reject config with negative applicationId
        ✓ should reject config with zero applicationId
        ✓ should reject config with non-integer applicationId
        ✓ should reject config with invalid authMethod
        ✓ should reject config with non-boolean injectSDK (3 ms)
        ✓ should reject config with non-boolean persistQueryToCookie
    APIRequestSchema
      valid requests
        ✓ should validate GET request without data
        ✓ should validate POST request with data
        ✓ should validate all HTTP methods
        ✓ should validate request with complex data
        ✓ should validate request with null data
        ✓ should validate request with undefined data
      invalid requests
        ✓ should reject request without method (1 ms)
        ✓ should reject request without path (1 ms)
        ✓ should reject request with empty path
        ✓ should reject request with invalid HTTP method
        ✓ should reject request with lowercase method (1 ms)
        ✓ should reject request with number as path
    validateConfig
      ✓ should return validated config for valid input
      ✓ should throw ZodError for invalid input (11 ms)
      ✓ should throw for missing required fields
    validateAPIRequest
      ✓ should return validated request for valid input
      ✓ should throw ZodError for invalid method
      ✓ should throw for missing path (1 ms)
    safeValidateConfig
      ✓ should return success result for valid config
      ✓ should return error result for invalid config
      ✓ should not throw for invalid input
    safeValidateAPIRequest
      ✓ should return success result for valid request (5 ms)
      ✓ should return error result for invalid request (1 ms)
      ✓ should not throw for invalid input
    edge cases
      ✓ should handle null input
      ✓ should handle undefined input
      ✓ should handle array input
      ✓ should handle string input
      ✓ should handle number input (1 ms)

PASS src/__tests__/inject-sdk-plugin.test.ts
  inject-sdk-plugin.js - parseCookieOverrides
    basic functionality
      ✓ should return empty result for null/empty input
      ✓ should parse simple running experiments
      ✓ should parse development experiments with env flag
      ✓ should parse API fetch experiments with full format
    dev environment handling
      ✓ should parse dev environment prefix
      ✓ should handle URL encoded dev environment names
      ✓ should handle special characters in dev environment
      ✓ should handle empty dev environment (1 ms)
      ✓ should handle dev environment without experiments
    mixed formats
      ✓ should handle mixed experiment formats in same cookie
      ✓ should handle mixed formats with dev environment
    URL encoding and special characters
      ✓ should handle URL encoded experiment names
      ✓ should handle experiment names with special characters (3 ms)
      ✓ should handle Unicode characters in experiment names (1 ms)
    error handling and edge cases
      ✓ should skip malformed experiment entries
      ✓ should handle invalid numeric values (1 ms)
      ✓ should handle empty experiment segments
      ✓ should handle malformed dev environment segment (1 ms)
      ✓ should gracefully handle complete parsing failure (1 ms)
      ✓ should handle very long cookie values
      ✓ should handle zero values correctly (1 ms)
      ✓ should handle negative numbers
      ✓ should handle extra commas in values
    backward compatibility
      ✓ should maintain compatibility with old simple format
      ✓ should maintain compatibility with variant,env format
      ✓ should handle legacy format mixed with new format
    real-world scenarios
      ✓ should handle realistic production cookie
      ✓ should handle realistic development cookie with environment (1 ms)
      ✓ should handle cookie size near browser limits

PASS background/handlers/__tests__/storage-handler.test.ts
  storage-handler
    handleStorageGet
      ✓ should retrieve value from session storage (1 ms)
      ✓ should return null for non-existent key
      ✓ should throw error on storage failure (6 ms)
    handleStorageSet
      ✓ should set value in session storage
      ✓ should handle string values
      ✓ should handle number values (1 ms)
      ✓ should handle array values
      ✓ should throw error on storage failure
    handleStorageRemove
      ✓ should remove key from session storage
      ✓ should throw error on storage failure (4 ms)
    getLocalStorage
      ✓ should retrieve value from local storage (1 ms)
      ✓ should return null for non-existent key
      ✓ should throw error on storage failure (1 ms)
    setLocalStorage
      ✓ should set value in local storage (1 ms)
      ✓ should throw error on storage failure
    getSecureStorage
      ✓ should retrieve value from secure storage (1 ms)
      ✓ should return null for non-existent key
      ✓ should throw error on storage failure
    setSecureStorage
      ✓ should set value in secure storage
      ✓ should throw error on storage failure
    Storage initialization
      ✓ should create session storage with correct options (1 ms)
      ✓ should create local storage with correct options
      ✓ should create secure storage with correct options

PASS background/handlers/__tests__/avatar-proxy.test.ts
  AvatarProxy
    isBlockedHost
      ✓ should block localhost (1 ms)
      ✓ should block 127.0.0.1
      ✓ should block 0.0.0.0
      ✓ should block private network ranges (1 ms)
      ✓ should allow public domains
    handleAvatarFetch
      ✓ should block SSRF attempts
      ✓ should return cached avatar if available (1 ms)
      ✓ should fetch avatar with JWT authentication (1 ms)
      ✓ should fetch avatar with API key authentication
      ✓ should handle JWT token not available (1 ms)
      ✓ should handle fetch failure
      ✓ should handle missing endpoint configuration
      ✓ should handle exceptions during fetch (9 ms)
      ✓ should cache successful avatar fetches (1 ms)
      ✓ should set appropriate cache headers (1 ms)
    handleFetchEvent
      ✓ should intercept /api/avatar requests (2 ms)
      ✓ should not intercept non-avatar requests
      ✓ should extract URL parameters correctly (1 ms)
      ✓ should use apikey auth method from URL params (2 ms)
    initializeAvatarProxy
      ✓ should register fetch event listener in Service Worker context (5 ms)
      ✓ should not register if not in Service Worker context
    edge cases
      ✓ should handle missing Content-Type header (1 ms)
      ✓ should handle empty API key

PASS src/__tests__/overrides-storage.test.ts
  Storage Functions
    loadOverridesFromStorage
      ✓ should load overrides from storage successfully (1 ms)
      ✓ should return empty object when no overrides in storage
      ✓ should handle storage errors gracefully
    saveOverrides
      ✓ should save valid overrides to storage and sync to cookie (9 ms)
      ✓ should filter out disabled experiments (variant -1) (4 ms)
      ✓ should handle chrome API not available (3 ms)
      ✓ should handle tab query errors gracefully (1 ms)
      ✓ should handle storage errors gracefully (1 ms)
    saveDevelopmentEnvironment
      ✓ should save development environment to storage and cookie (1 ms)
      ✓ should handle special characters in environment name
      ✓ should handle chrome API not available (1 ms)
      ✓ should handle errors gracefully
    getDevelopmentEnvironment
      ✓ should load development environment from storage
      ✓ should return null when no environment in storage (4 ms)
      ✓ should return null for empty string
      ✓ should handle storage errors gracefully
    integration scenarios
      ✓ should save and load overrides correctly (2 ms)
      ✓ should save and load development environment correctly (2 ms)
      ✓ should handle concurrent operations (2 ms)

PASS src/sdk-bridge/__tests__/utils/message-bridge.test.ts
  MessageBridge
    sendToExtension
      ✓ should post message to window (1 ms)
      ✓ should log the message
    onMessage
      ✓ should call handler for matching message type
      ✓ should not call handler for different message type
      ✓ should not call handler for messages from other sources (1 ms)
    onAnyMessage
      ✓ should call handler for any extension message
      ✓ should not call handler for non-extension messages

PASS src/sdk-bridge/__tests__/utils/url-filter.test.ts
  URLFilterMatcher
    matchesUrlFilter
      ✓ should return true when no filter is provided (1 ms)
      string filters
        ✓ should match exact path
        ✓ should not match different path
        ✓ should match path with wildcards
        ✓ should match path with question mark wildcard (1 ms)
      array filters
        ✓ should match if any pattern matches
        ✓ should not match if no patterns match
      object filters with matchType
        ✓ should match by path (default)
        ✓ should match by full URL
        ✓ should match by domain (1 ms)
        ✓ should match by query string
        ✓ should match by hash
      exclude patterns
        ✓ should exclude URLs matching exclude patterns
        ✓ should include URLs not matching exclude patterns (1 ms)
        ✓ should exclude with wildcards
        ✓ should check exclude patterns before include patterns (5 ms)
      regex mode
        ✓ should match with regex patterns
        ✓ should not match non-matching regex
        ✓ should exclude with regex patterns
        ✓ should handle invalid regex patterns gracefully (1 ms)
      wildcard mode
        ✓ should convert * to .* for any characters (1 ms)
        ✓ should convert ? to . for single character (1 ms)
        ✓ should require exact match with wildcards
      empty include patterns
        ✓ should return true if no include patterns (not excluded)
        ✓ should return false if excluded with no include patterns (1 ms)
      logging
        ✓ should log when URL is excluded
        ✓ should log when URL matches pattern (1 ms)
        ✓ should log when URL does not match any patterns
      edge cases
        ✓ should handle URLs with special characters (1 ms)
        ✓ should handle empty path
        ✓ should handle case-sensitive matching (1 ms)

PASS src/config/__tests__/defaults.test.ts
  DEFAULT_CONFIG
    ✓ should export a DEFAULT_CONFIG object (1 ms)
    ✓ should have queryPrefix set to "_"
    ✓ should have persistQueryToCookie set to true
    ✓ should have injectSDK set to false
    ✓ should have sdkUrl set to empty string
    ✓ should be frozen and immutable
    ✓ should have all expected keys
    ✓ should not have any additional unexpected properties (1 ms)

PASS src/visual-editor/core/__tests__/state-manager.test.ts
  StateManager
    Constructor and Initial State
      ✓ should initialize with correct default state (1 ms)
      ✓ should initialize with initial changes from config (13 ms)
      ✓ should store config correctly (14 ms)
    State Getters
      ✓ should return immutable state copy (1 ms)
      ✓ should return immutable config copy (1 ms)
    State Updates
      ✓ should update state with partial updates (3 ms)
      ✓ should replace entire state with setState
      ✓ should maintain immutability during updates
    State Change Listeners
      ✓ should notify listeners on state changes (3 ms)
      ✓ should return unsubscribe function
      ✓ should handle multiple unsubscribes safely (1 ms)
      ✓ should not notify on setState calls
    Element Selection and Hover
      ✓ should set selected element
      ✓ should clear selected element
      ✓ should set hovered element
      ✓ should clear hovered element
      ✓ should handle same element for selected and hovered
    Changes Management
      ✓ should add change to empty changes array
      ✓ should add multiple changes
      ✓ should maintain immutability when adding changes (1 ms)
      ✓ should set changes array
      ✓ should replace existing changes when setting
    Undo/Redo Stack Management
      Undo Stack
        ✓ should push action to undo stack
        ✓ should push multiple actions to undo stack
        ✓ should clear redo stack when pushing to undo stack
        ✓ should pop action from undo stack (1 ms)
        ✓ should return null when popping from empty undo stack
        ✓ should maintain immutability of undo stack
      Redo Stack
        ✓ should push action to redo stack
        ✓ should push multiple actions to redo stack
        ✓ should pop action from redo stack
        ✓ should return null when popping from empty redo stack (1 ms)
        ✓ should maintain immutability of redo stack
    Original Values Management
      ✓ should set original value
      ✓ should get original value
      ✓ should return undefined for non-existent key
      ✓ should overwrite existing original value
      ✓ should handle different data types as values (20 ms)
    Mode State Management
      ✓ should allow both rearranging and resizing to be true simultaneously
      Rearranging Mode
        ✓ should set rearranging mode to true (11 ms)
        ✓ should set rearranging mode to false (1 ms)
        ✓ should notify listeners when rearranging mode changes
      Resizing Mode
        ✓ should set resizing mode to true (1 ms)
        ✓ should set resizing mode to false
        ✓ should notify listeners when resizing mode changes (1 ms)
    Dragged Element Management
      ✓ should set dragged element
      ✓ should clear dragged element
      ✓ should notify listeners when dragged element changes (2 ms)
      ✓ should handle setting same element multiple times (1 ms)
    Deactivation
      ✓ should deactivate the state manager (3 ms)
      ✓ should notify listeners when deactivated (1 ms)
      ✓ should allow multiple deactivation calls
    Complex State Transitions
      ✓ should handle editing workflow: select element, start resizing, make changes (1 ms)
      ✓ should handle drag and drop workflow
      ✓ should handle undo/redo workflow
    Concurrent State Updates
      ✓ should handle rapid sequential updates (1 ms)
      ✓ should maintain state consistency with batch updates
    Edge Cases
      ✓ should handle null and undefined values gracefully
      ✓ should handle empty changes array operations
      ✓ should handle setting original values with special keys (1 ms)
      ✓ should handle large undo/redo stacks (97 ms)
      ✓ should handle many state change listeners (24 ms)
      ✓ should handle state reset to initial values (4 ms)
    Memory and Performance
      ✓ should not leak memory with listeners
      ✓ should handle complex objects in state (shallow immutability) (1 ms)

PASS background/core/__tests__/config-manager.test.ts
  config-manager
    validateAPIEndpoint
      ✓ should accept valid absmartly.com domain (1 ms)
      ✓ should accept valid absmartly.io domain
      ✓ should accept subdomains of absmartly.com
      ✓ should accept subdomains of absmartly.io
      ✓ should reject non-absmartly domains (1 ms)
      ✓ should reject invalid URLs
      ✓ should reject similar but different domains
    validateConfig
      ✓ should validate a valid config
      ✓ should validate config with all optional fields (4 ms)
      ✓ should reject config with missing apiEndpoint (1 ms)
      ✓ should reject config with invalid apiEndpoint (3 ms)
      ✓ should reject config with invalid authMethod
      ✓ should reject config with negative applicationId (1 ms)
      ✓ should reject config with non-integer applicationId
    getConfig
      ✓ should return null when no config is stored (1 ms)
      ✓ should return stored config with API key from secure storage
      ✓ should use apiKey from config if secure storage is empty (1 ms)
      ✓ should throw error for invalid API endpoint domain (4 ms)
    initializeConfig
      ✓ should initialize config from environment variables when storage is empty (1 ms)
      ✓ should not override existing config values
      ✓ should use default JWT auth method when not specified
      ✓ should parse applicationId as integer
      ✓ should handle missing environment variables gracefully

PASS src/sdk-bridge/__tests__/sdk/plugin-detector.test.ts
  PluginDetector
    detectPlugin
      ✓ should return null when no plugin is found (1 ms)
      ✓ should detect plugin via context.__domPlugin registration (1 ms)
      ✓ should return null if __domPlugin exists but not initialized (1 ms)
      ✓ should detect plugin at window.__absmartlyPlugin
      ✓ should detect plugin at window.__absmartlyDOMChangesPlugin
      ✓ should prioritize context.__domPlugin over window properties
      ✓ should prioritize window.__absmartlyPlugin over __absmartlyDOMChangesPlugin
      ✓ should detect plugin via DOM artifacts with data-absmartly-modified (1 ms)
      ✓ should detect plugin via DOM artifacts with data-absmartly-created
      ✓ should detect plugin via DOM artifacts with data-absmartly-injected
      ✓ should detect plugin via multiple DOM artifacts (1 ms)
      ✓ should return null when context is null
      ✓ should return null when context is undefined
      ✓ should handle context without __domPlugin property
    isPluginAccessible
      ✓ should return true for plugin instance
      ✓ should return false for "active-but-inaccessible"
      ✓ should return false for null (1 ms)
      ✓ should return true for any object instance
    isPluginActive
      ✓ should return true for plugin instance
      ✓ should return true for "active-but-inaccessible"
      ✓ should return false for null
      ✓ should return true for any truthy value
    edge cases
      ✓ should handle DOM query selector errors gracefully (5 ms)
      ✓ should work with empty context object
      ✓ should detect multiple detection methods simultaneously (1 ms)
      ✓ should handle context with initialized=false

PASS src/utils/__tests__/cookie-serialization.test.ts
  cookie-serialization
    parseCookieValue
      ✓ should return empty overrides for empty string
      ✓ should parse simple running experiment format
      ✓ should parse multiple running experiments (1 ms)
      ✓ should parse experiment with env
      ✓ should parse experiment with env and id
      ✓ should parse dev environment with experiments
      ✓ should decode URL-encoded experiment names
      ✓ should decode URL-encoded dev environment (1 ms)
      ✓ should handle mixed experiment formats (4 ms)
      ✓ should skip malformed experiment entries
      ✓ should handle dev env without experiments (1 ms)
    serializeOverrides
      ✓ should serialize empty overrides (1 ms)
      ✓ should serialize simple running experiment
      ✓ should serialize multiple running experiments
      ✓ should serialize experiment with env
      ✓ should serialize experiment with env and id
      ✓ should not include env when it is PRODUCTION (0)
      ✓ should serialize with dev environment (1 ms)
      ✓ should URL-encode experiment names (4 ms)
      ✓ should URL-encode dev environment (2 ms)
      ✓ should handle mixed experiment formats (1 ms)
      ✓ should ignore null dev environment
    generateCookieParserScript
      ✓ should generate script with correct cookie name (1 ms)
      ✓ should generate valid JavaScript
      ✓ should handle empty cookie value
      ✓ should parse dev environment
      ✓ should parse experiment formats
    round-trip serialization
      ✓ should correctly round-trip simple overrides
      ✓ should correctly round-trip complex overrides (1 ms)
      ✓ should correctly round-trip with dev environment
      ✓ should correctly round-trip with URL-encoded names

PASS src/__tests__/overrides.test.ts
  overrides.ts
    ENV_TYPE constants
      ✓ should have correct environment type values (1 ms)
    parseCookieFormat
      ✓ should return empty overrides for null/empty input (1 ms)
      ✓ should parse simple running experiment format
      ✓ should parse development experiment format with env
      ✓ should parse full format with env and id
      ✓ should parse dev environment prefix (1 ms)
      ✓ should handle URL encoded dev environment names
      ✓ should handle URL encoded experiment names
      ✓ should handle mixed formats in the same cookie
      ✓ should skip malformed entries
      ✓ should handle empty experiments string with dev env
      ✓ should handle malformed cookie gracefully
      ✓ should handle special characters in experiment names (1 ms)
    serializeToCookieFormat
      ✓ should serialize simple running experiments
      ✓ should serialize development experiments with env
      ✓ should serialize API fetch experiments with full format
      ✓ should handle mixed experiment types (1 ms)
      ✓ should include dev environment prefix when provided
      ✓ should URL encode dev environment names
      ✓ should URL encode experiment names with special characters
      ✓ should handle object experiments with production env as simple format
      ✓ should handle development experiments without id
      ✓ should return empty string for empty overrides without dev env (1 ms)
      ✓ should include dev env prefix even with empty experiments
    round-trip tests (serialize then parse)
      ✓ should preserve simple running experiments (1 ms)
      ✓ should preserve development experiments
      ✓ should preserve API fetch experiments with IDs (11 ms)
      ✓ should preserve mixed experiment types (1 ms)
      ✓ should preserve dev environment names (5 ms)
      ✓ should preserve experiment names with special characters (1 ms)
    getCookieOverridesScript
      ✓ should generate script that parses cookie correctly (19 ms)
      ✓ should generate script that handles empty cookie
    setCookieOverridesScript
      ✓ should generate script to set cookie with overrides (2 ms)
      ✓ should generate script to clear cookie when no overrides (1 ms)
      ✓ should filter out disabled experiments (variant -1)
      ✓ should set expiration date 30 days in future (1 ms)
    edge cases and error handling
      ✓ should handle very long experiment names (1 ms)
      ✓ should handle invalid numeric values gracefully
      ✓ should handle empty experiment names (1 ms)
      ✓ should handle empty values
      ✓ should handle maximum cookie size considerations (4 ms)
      ✓ should handle Unicode characters in experiment names
      ✓ should handle malformed dev environment

PASS src/utils/__tests__/syntax-highlighter.test.tsx
  syntax-highlighter
    highlightCSSSelector
      ✓ should return null for empty selector
      ✓ should highlight class selectors (6 ms)
      ✓ should highlight ID selectors (2 ms)
      ✓ should highlight pseudo-selectors (1 ms)
      ✓ should highlight combinators (44 ms)
      ✓ should highlight attribute selectors (16 ms)
      ✓ should highlight strings in attribute selectors (1 ms)
      ✓ should handle complex selectors (2 ms)
    highlightHTML
      ✓ should return null for empty HTML
      ✓ should highlight tag brackets (1 ms)
      ✓ should highlight tag names (2 ms)
      ✓ should highlight attributes (1 ms)
      ✓ should highlight attribute values as strings (1 ms)
      ✓ should handle self-closing tags (1 ms)
      ✓ should handle complex HTML (5 ms)
      ✓ should preserve text content outside tags (3 ms)

PASS background/handlers/__tests__/event-buffer.test.ts
  event-buffer
    bufferSDKEvent
      ✓ should buffer a new event
      ✓ should append to existing buffer
      ✓ should trim buffer to MAX_BUFFER_SIZE
      ✓ should generate unique event IDs (1 ms)
      ✓ should broadcast event via chrome.runtime.sendMessage
      ✓ should handle broadcast failure gracefully
      ✓ should throw error on storage failure (4 ms)
      ✓ should keep newest events when trimming (1 ms)
    getBufferedEvents
      ✓ should retrieve all buffered events
      ✓ should return empty array when no events buffered
      ✓ should throw error on storage failure
    clearBufferedEvents
      ✓ should clear all buffered events (1 ms)
      ✓ should throw error on storage failure
    event structure
      ✓ should create events with all required fields (1 ms)
      ✓ should handle complex event data
    buffer size management
      ✓ should maintain exactly MAX_BUFFER_SIZE events (1 ms)
      ✓ should remove oldest events when over limit (2 ms)

PASS src/sdk-bridge/__tests__/dom/element-state.test.ts
  ElementStateManager
    captureElementState
      ✓ should capture text content (1 ms)
      ✓ should capture innerHTML
      ✓ should capture all attributes
      ✓ should capture inline styles (1 ms)
      ✓ should capture class list
      ✓ should handle empty text content
      ✓ should handle elements with no attributes
      ✓ should handle elements with no inline styles
      ✓ should handle elements with no classes (1 ms)
      ✓ should capture complete element state
    restoreElementState
      ✓ should restore text content via innerHTML (1 ms)
      ✓ should restore innerHTML with sanitization (1 ms)
      ✓ should sanitize dangerous HTML during restoration
      ✓ should restore attributes
      ✓ should remove attributes not in original state (1 ms)
      ✓ should restore inline styles
      ✓ should clear all inline styles before restoring
      ✓ should restore class list (4 ms)
      ✓ should remove tracking attributes (1 ms)
      ✓ should log restoration (1 ms)
      ✓ should handle restoration errors gracefully
      ✓ should restore complete element state (1 ms)
      ✓ should handle empty original state
    capture and restore cycle
      ✓ should fully restore element after capture (1 ms)
      ✓ should handle multiple capture/restore cycles (1 ms)

PASS src/sdk-bridge/__tests__/experiment/code-injector.test.ts
  CodeInjector
    injectExperimentCode
      ✓ should do nothing when context is null (1 ms)
      ✓ should do nothing when context has no data_
      ✓ should do nothing when context has no experiments
      ✓ should skip experiments without assignment (1 ms)
      ✓ should skip experiments without variant config
      ✓ should skip experiments without __inject_html
      ✓ should parse string variant config (1 ms)
      ✓ should handle object variant config (1 ms)
      ✓ should skip injection when URL filter does not match (7 ms)
      ✓ should inject code at all locations when URL matches (4 ms)
      ✓ should handle invalid JSON in variant config (1 ms)
      ✓ should handle invalid JSON in __inject_html (1 ms)
      ✓ should handle errors during injection (1 ms)
      ✓ should process multiple experiments (2 ms)
    executeScriptsInHTML
      ✓ should extract and execute external scripts (33 ms)
      ✓ should preserve script async attribute (6 ms)
      ✓ should preserve script defer attribute
      ✓ should block inline scripts for security (1 ms)
      ✓ should process multiple external scripts (7 ms)
      ✓ should call sanitizeHTML before processing (2 ms)
      ✓ should handle script execution errors (3 ms)
      ✓ should handle mixed inline and external scripts (8 ms)
    insertAtLocation
      ✓ should insert at headStart when head is empty (4 ms)
      ✓ should insert at headStart before existing children (4 ms)
      ✓ should insert at headEnd (1 ms)
      ✓ should insert at bodyStart when body is empty (1 ms)
      ✓ should insert at bodyStart before existing children (3 ms)
      ✓ should insert at bodyEnd (1 ms)
      ✓ should warn for unknown location (6 ms)
    edge cases
      ✓ should handle context with undefined assignments_ (1 ms)
      ✓ should handle empty experiments array (1 ms)
      ✓ should handle variant without variants array (1 ms)
      ✓ should handle assignment to non-existent variant (1 ms)
      ✓ should sanitize HTML before processing scripts (3 ms)

PASS src/__tests__/background-config.test.ts
  Background Script - Config Usage
    DEFAULT_CONFIG usage in background.ts
      ✓ should use DEFAULT_CONFIG.queryPrefix when config.queryPrefix is undefined
      ✓ should use config.queryPrefix when provided (1 ms)
      ✓ should use DEFAULT_CONFIG.persistQueryToCookie when config value is undefined
      ✓ should use config.persistQueryToCookie when explicitly set to false
      ✓ should use DEFAULT_CONFIG.injectSDK when config value is undefined
      ✓ should use config.injectSDK when explicitly set to true
      ✓ should use DEFAULT_CONFIG.sdkUrl when config.sdkUrl is empty
      ✓ should use config.sdkUrl when provided
    Config data preparation for SDK plugin
      ✓ should prepare correct config data with all defaults
      ✓ should prepare correct config data with custom values (1 ms)
      ✓ should prepare correct config data with partial config
    Edge cases for nullish coalescing
      ✓ should handle false values correctly with ?? operator
      ✓ should handle empty string values correctly with || operator

PASS background/handlers/__tests__/injection-handler.test.ts
  InjectionHandler
    registerFileUrlContentScript
      ✓ should register content script for file:// URLs on first attempt (1 ms)
      ✓ should handle already registered script by unregistering and re-registering (1 ms)
      ✓ should handle re-registration failure
      ✓ should handle missing content scripts in manifest
      ✓ should handle manifest without content_scripts field
    isRestrictedUrl
      ✓ should identify chrome:// URLs as restricted (1 ms)
      ✓ should identify edge:// URLs as restricted
      ✓ should identify about: URLs as restricted
      ✓ should identify chrome-extension:// URLs as restricted
      ✓ should identify regular URLs as not restricted
    injectOrToggleSidebar
      ✓ should not inject sidebar on restricted URLs (1 ms)
      ✓ should inject sidebar on valid URLs
      ✓ should handle injection errors
    initializeInjectionHandler
      ✓ should register all event listeners (3 ms)
      ✓ should handle tab updates (1 ms)
      ✓ should handle action clicks with valid tab
      ✓ should not inject on action click without tab id
      ✓ should not inject on action click without tab url
    toggleSidebarFunc integration
      ✓ should execute sidebar toggle function in page context (1 ms)
    sidebar function serialization
      ✓ should serialize sidebar toggle function correctly (1 ms)

PASS src/visual-editor/core/__tests__/undo-redo-manager.test.ts
  UndoRedoManager
    Basic functionality
      ✓ should start with empty stacks (1 ms)
      ✓ should add changes to undo stack
      ✓ should clear redo stack when new change is added
    Individual change tracking (no auto-squashing)
      ✓ should track multiple changes to same element individually (1 ms)
      ✓ should track changes to different selectors individually
      ✓ should track changes to different types individually
    Undo functionality
      ✓ should undo a single change
      ✓ should undo multiple changes in correct order (1 ms)
      ✓ should return null when undo stack is empty
    Redo functionality
      ✓ should redo a single change
      ✓ should redo multiple changes in correct order (4 ms)
      ✓ should return null when redo stack is empty (1 ms)
    squashChanges() method
      ✓ should squash multiple changes to same element (1 ms)
      ✓ should not squash changes to different selectors (1 ms)
      ✓ should not squash changes to different types
      ✓ should squash mixed changes correctly (1 ms)
      ✓ should return empty array when no changes (1 ms)
      ✓ should squash style changes correctly
    Reference isolation
      ✓ should deep copy changes to prevent mutation
      ✓ should deep copy old values to prevent mutation
      ✓ should isolate undo and redo stacks
    Stack size limit
      ✓ should respect max stack size (2 ms)
      ✓ should not exceed max size without squashing (2 ms)
    Clear functionality
      ✓ should clear all stacks (1 ms)
    Complex scenarios
      ✓ should handle alternating undo/redo operations with individual changes
  E2E scenario simulation
    ✓ should handle the exact E2E test flow: 3 text changes, 3 undos, 3 redos (1 ms)
  Change counting accuracy
    ✓ should correctly count undo changes with pointer approach
    ✓ should count changes correctly after adding new change mid-history
    ✓ should maintain accurate counts with mixed operations (1 ms)
    ✓ should count squashed changes correctly regardless of undo/redo state (3 ms)
    ✓ should handle edge case: canUndo/canRedo at boundaries (1 ms)

PASS src/sdk-bridge/__tests__/experiment/override-manager.test.ts
  OverrideManager
    parseCookieOverrides
      ✓ should return empty overrides for empty string
      ✓ should parse simple format (variant only) (4 ms)
      ✓ should parse format with env (variant.env)
      ✓ should parse full format (variant.env.id) (1 ms)
      ✓ should parse devEnv prefix (1 ms)
      ✓ should decode URL-encoded devEnv (1 ms)
      ✓ should decode URL-encoded experiment names
      ✓ should handle mixed format overrides
      ✓ should skip invalid entries with no name
      ✓ should skip invalid entries with no values (1 ms)
      ✓ should skip invalid entries with no colon
      ✓ should handle devEnv without experiments (1 ms)
      ✓ should handle empty devEnv
      ✓ should handle malformed cookie gracefully
      ✓ should log warning for parsing errors (1 ms)
      ✓ should handle single experiment
      ✓ should parse variant numbers correctly
    checkOverridesCookie
      ✓ should log when cookie is found
      ✓ should log when cookie is not found
      ✓ should log devEnv when present
      ✓ should decode devEnv URL encoding
      ✓ should handle errors gracefully
    getCookieValue
      ✓ should return cookie value when cookie exists
      ✓ should return null when cookie does not exist
      ✓ should handle multiple cookies (1 ms)
      ✓ should handle errors gracefully
    getOverrides
      ✓ should return parsed overrides when cookie exists
      ✓ should return empty overrides when cookie does not exist
      ✓ should return parsed overrides with devEnv
    custom cookie name
      ✓ should use custom cookie name
      ✓ should check custom cookie name (1 ms)
    edge cases
      ✓ should handle very long experiment names
      ✓ should handle many experiments
      ✓ should handle special characters in experiment names
      ✓ should handle whitespace in cookie value
      ✓ should handle variant value of 0
      ✓ should handle large variant numbers

PASS src/utils/__tests__/selector-generator.test.ts
  Auto-generated value detection
    Pattern detection for Framer framework
      ✓ should detect FWXWbKqd8 as auto-generated (9 ms)
      ✓ should detect similar Framer auto-generated patterns (1 ms)
      ✓ should NOT detect valid naming patterns as auto-generated
    Previously caught auto-generated patterns
      ✓ should detect various auto-generated ID patterns

PASS src/sdk-bridge/__tests__/utils/logger.test.ts
  Logger
    log
      ✓ should log messages when debug is enabled (1 ms)
      ✓ should log multiple arguments
      ✓ should not log when debug is disabled
    error
      ✓ should log errors when debug is enabled
      ✓ should not log errors when debug is disabled (1 ms)
    warn
      ✓ should log warnings when debug is enabled
      ✓ should not log warnings when debug is disabled
    setDebug
      ✓ should enable debug mode
      ✓ should disable debug mode
    isDebugEnabled
      ✓ should return debug state

PASS background/core/__tests__/message-router.test.ts
  message-router
    validateSender
      ✓ should accept valid sender from same extension
      ✓ should reject sender with different extension ID
      ✓ should reject sender without ID
    isUnifiedMessage
      ✓ should return true for message with from and to fields
      ✓ should return false for message without from field (1 ms)
      ✓ should return false for message without to field
      ✓ should return false for non-object messages (1 ms)
    routeMessage
      ✓ should route message to content script (102 ms)
      ✓ should route message to sidebar (102 ms)
      ✓ should not route message without from/to fields (1 ms)
      ✓ should not route message from unauthorized sender (1 ms)
      ✓ should handle error when no active tab found (102 ms)
      ✓ should handle tab sendMessage error (103 ms)
      ✓ should handle runtime sendMessage error (103 ms)
      ✓ should not route message to background
    forwardToActiveTab
      ✓ should forward message to active tab (1 ms)
      ✓ should throw error when no active tab (10 ms)
      ✓ should throw error when tab has no ID (1 ms)
    broadcastToExtension
      ✓ should broadcast message to extension (1 ms)
      ✓ should handle error when no listeners (sidebar not open)
      ✓ should not throw on broadcast errors

PASS src/visual-editor/core/__tests__/editor-coordinator-html.test.ts
  EditorCoordinator HTML Editor Integration
    handleEditHtmlAction
      ✓ should initialize HTML editor when Edit HTML action is triggered (16 ms)
      ✓ should update element HTML when changes are saved (11 ms)
      ✓ should not update element when editor is cancelled (1 ms)
      ✓ should track HTML changes in state (6 ms)
      ✓ should show success notification after HTML update (3 ms)
      ✓ should remove context menu before opening editor (2 ms)
      ✓ should handle complex HTML structures (5 ms)
      ✓ should update element HTML content (1 ms)
      ✓ should not update if new HTML is same as current (1 ms)
      ✓ should handle editor errors gracefully (20 ms)
    Context Menu Integration
      ✓ should handle Edit HTML menu action (38 ms)
      ✓ should pass correct original state to HTML editor (8 ms)
    Multiple Edit Actions
      ✓ should handle sequential HTML edits (10 ms)
      ✓ should handle switching between text and HTML editing (13 ms)
    State Management
      ✓ should track HTML changes in visual editor state (2 ms)
      ✓ should use correct selector for HTML changes (2 ms)

PASS src/visual-editor/core/__tests__/editor-coordinator.test.ts (6.069 s)
  EditorCoordinator
    Constructor
      ✓ should initialize with all dependencies (10 ms)
      ✓ should store all dependencies as instance properties (2 ms)
      ✓ should initialize internal state properties (10 ms)
    setupModuleIntegrations
      ✓ should connect event handlers to context menu (3 ms)
      ✓ should connect context menu to action handlers (55 ms)
      ✓ should connect UI components to callbacks (2 ms)
      ✓ should register cleanup handlers (5 ms)
    setupStateListeners
      ✓ should register state change listener (1 ms)
      ✓ should update local state when state changes (4 ms)
      ✓ should update toolbar on state change (2 ms)
    setupEventListeners & removeEventListeners
      ✓ should setup all event listeners (2 ms)
      ✓ should remove all event listeners (2 ms)
      ✓ should handle placeholder events without errors (4 ms)
    setupKeyboardHandlers
      ✓ should setup keyboard event listener (2 ms)
      ✓ should handle Ctrl+Z for undo (2 ms)
      ✓ should handle Cmd+Z for undo on Mac (1 ms)
      ✓ should handle Ctrl+Y for redo (6 ms)
      ✓ should handle Ctrl+Shift+Z for redo (1 ms)
      ✓ should handle Ctrl+Shift+C for copy selector (1 ms)
      ✓ should handle Delete key for element deletion (1 ms)
      ✓ should not handle Delete key when in editing mode (1 ms)
      ✓ should not handle shortcuts when no element is selected (2 ms)
    setupMessageHandlers
      ✓ should setup message event listener (1 ms)
      ✓ should handle ABSMARTLY_VISUAL_EDITOR_EXIT message (2 ms)
      ✓ should ignore messages not from window (1 ms)
    handleMenuAction
      ✓ should handle edit action (4 ms)
      ✓ should handle edit-element action (9 ms)
      ✓ should handle editHtml action (3 ms)
      ✓ should handle edit-html action (3 ms)
      ✓ should handle rearrange action (3 ms)
      ✓ should handle resize action (3 ms)
      ✓ should handle select-relative action (2 ms)
      ✓ should handle selectRelative action (8 ms)
      ✓ should handle hide action (7 ms)
      ✓ should handle delete action (2 ms)
      ✓ should handle copy action (3 ms)
      ✓ should handle copy-selector action (5 ms)
      ✓ should handle copySelector action (2 ms)
      ✓ should handle move-up action (9 ms)
      ✓ should handle move-down action (2 ms)
      ✓ should handle insert-block action (4 ms)
      ✓ should handle unknown action with notification (1 ms)
      ✓ should preserve original state for all actions (3 ms)
    handleEditAction
      ✓ should setup element for editing (2 ms)
      ✓ should handle blur event and create change (10 ms)
      ✓ should handle Enter key to finish editing (2 ms)
      ✓ should handle Shift+Enter without finishing editing (1 ms)
      ✓ should handle Escape key to cancel editing (1 ms)
      ✓ should prevent click events during editing (3 ms)
    handleEditHtmlAction
      ✓ should open HTML editor and handle changes (5 ms)
    handleSelectRelativeElement
      ✓ should show relative element selector panel (6 ms)
      ✓ should remove context menu before showing selector (3 ms)
    startMutationObserver & stopMutationObserver
      ✓ should create and start mutation observer (3 ms)
      ✓ should ignore mutations when isInternalChange is true (1 ms)
      ✓ should stop and disconnect mutation observer
      ✓ should handle stopMutationObserver when observer is null (1 ms)
    makeElementsEditable & makeElementsNonEditable
      ✓ should make all non-extension elements editable (6 ms)
      ✓ should make all elements non-editable (1 ms)
    showContextMenu & removeContextMenu
      ✓ should show context menu for selected element (1 ms)
      ✓ should not show context menu when no element is selected
      ✓ should remove context menu elements from DOM (1 ms)
    isExtensionElement
      ✓ should identify elements with absmartly in id (1 ms)
      ✓ should identify elements with absmartly in className
      ✓ should identify elements with absmartly parent (1 ms)
      ✓ should handle SVG elements with baseVal className (4 ms)
      ✓ should return false for non-extension elements (1 ms)
    setupAll
      ✓ should call all setup methods in correct order (2 ms)
    teardownAll
      ✓ should call all teardown methods in correct order (3 ms)
    Integration Tests
      ✓ should handle complete edit workflow (3 ms)
      ✓ should handle keyboard shortcuts integration (1 ms)
      ✓ should handle state changes and update UI (1 ms)
    Event Cleanup
      ✓ should register keydown event cleanup handler (1 ms)
      ✓ should register message event cleanup handler (4 ms)
      ✓ should handle message event for visual editor exit

PASS src/components/__tests__/SettingsView-config.test.tsx (6.123 s)
  SettingsView - Config Defaults
    Initial state with DEFAULT_CONFIG
      ✓ should initialize queryPrefix state with DEFAULT_CONFIG.queryPrefix (105 ms)
      ✓ should use DEFAULT_CONFIG.queryPrefix when loading config without queryPrefix (17 ms)
      ✓ should use loaded queryPrefix when config provides a value (16 ms)
      ✓ should fall back to DEFAULT_CONFIG.queryPrefix when loaded queryPrefix is empty (18 ms)
    Saving configuration with DEFAULT_CONFIG fallback
      ✓ should use DEFAULT_CONFIG.queryPrefix when saving with empty queryPrefix (23 ms)
    DEFAULT_CONFIG values match expected defaults
      ✓ should have queryPrefix default of "_" (1 ms)
      ✓ should have persistQueryToCookie default of true
      ✓ should have injectSDK default of false
      ✓ should have sdkUrl default of empty string (1 ms)
    Config loading logic
      ✓ should handle partial config and fill in defaults (18 ms)
      ✓ should correctly apply OR operator for queryPrefix fallback (1 ms)
      ✓ should correctly apply ?? operator for boolean config values

PASS src/sdk-bridge/__tests__/core/orchestrator.test.ts
  Orchestrator
    constructor
      ✓ should initialize with default config (4 ms)
      ✓ should initialize with custom config
    start
      ✓ should wait for DOMContentLoaded if document is loading (1 ms)
      ✓ should start immediately if document is ready
    waitForSDKAndInitialize
      ✓ should detect and cache SDK context on first attempt (1 ms)
      ✓ should use cached context on subsequent attempts
      ✓ should stop if plugin is already loaded (1 ms)
      ✓ should stop if plugin is active-but-inaccessible
      ✓ should send SDK_CONTEXT_READY when context is found (1 ms)
      ✓ should retry if no context found
      ✓ should stop after max attempts (1 ms)
      ✓ should wait for context.ready() if context is pending (1 ms)
      ✓ should handle context.ready() rejection
    setupMessageListener
      ✓ should setup message listener only once (1 ms)
      ✓ should ignore messages without source
      ✓ should ignore messages from wrong source (1 ms)
      ✓ should handle messages from correct source
    handleExtensionMessage
      ✓ should handle APPLY_OVERRIDES message (1 ms)
      ✓ should handle PREVIEW_CHANGES message
      ✓ should handle REMOVE_PREVIEW message (1 ms)
      ✓ should handle INJECT_CUSTOM_CODE message
      ✓ should warn on unknown message type (1 ms)
    handleInitializePlugin
      ✓ should prevent multiple initializations
      ✓ should skip if plugin already loaded (1 ms)
      ✓ should skip if no context available
      ✓ should skip if plugin already registered with context (1 ms)
      ✓ should inject experiment code
      ✓ should send PLUGIN_INITIALIZED message
      ✓ should handle injection error gracefully (1 ms)
    handleSDKEvent
      ✓ should send SDK_EVENT message
    getContext
      ✓ should return cached context (3 ms)
      ✓ should return null if no context
    getState
      ✓ should return initialization state
      ✓ should return copy of state (1 ms)
    exposeVariantAssignments
      ✓ should expose __absmartlyGetVariantAssignments function
      ✓ should return empty assignments if no context
      ✓ should wait for context.ready() if pending (1 ms)
      ✓ should get variant assignments
      ✓ should include variant 0 in assignments (1 ms)
      ✓ should exclude variant -1 from assignments
      ✓ should handle peek errors gracefully
    exposeContextPath
      ✓ should expose __absmartlyGetContextPath function (1 ms)
      ✓ should detect context if not cached
      ✓ should return cached context path (1 ms)
      ✓ should return not found if no context

PASS src/utils/__tests__/storage-cleanup.test.ts
  storage-cleanup
    clearExperimentLocalStorage
      ✓ should use experiment-new-variants key when experimentId is 0
      ✓ should use experiment-{id}-variants key for regular experiments (1 ms)
      ✓ should handle large experiment IDs
    clearAllExperimentStorage
      ✓ should clear both session and local storage for new experiments
      ✓ should clear both session and local storage for real experiments

s/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      209 |
      210 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 211 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      212 |
      213 |     this._isActive = false
      214 |

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:211:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:351:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:217:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:226:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:233:13)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'finalize',
        data: null,
        timestamp: '2025-10-28T20:52:15.278Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'finalize',
      data: null,
      timestamp: '2025-10-28T20:52:15.278Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 6 New count: 7

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.280Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:210:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/visual-editor.ts:211:13)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/visual-editor.test.ts:359:14)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      209 |
      210 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 211 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      212 |
      213 |     this._isActive = false
      214 |

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:211:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:359:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:217:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:226:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:233:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.296Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:210:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/visual-editor.ts:211:13)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/visual-editor.test.ts:373:14)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      209 |
      210 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 211 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      212 |
      213 |     this._isActive = false
      214 |

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:211:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:373:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:217:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:226:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:233:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.309Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:210:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/visual-editor.ts:211:13)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/visual-editor.test.ts:383:14)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      209 |
      210 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 211 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      212 |
      213 |     this._isActive = false
      214 |

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:211:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:383:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:217:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:226:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:233:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.322Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:210:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/visual-editor.ts:211:13)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/visual-editor.test.ts:402:14)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      209 |
      210 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 211 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      212 |
      213 |     this._isActive = false
      214 |

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:211:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:402:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:217:13)

  console.log
    [ABSmartly] Discarding unsaved changes on exit

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:222:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: true

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:233:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.327Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:210:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/visual-editor.ts:211:13)
        at VisualEditor.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:631:25)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:305:39
        at VisualEditor.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:312:13)
        at VisualEditor.mockConstructor [as stop] (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-mock/build/index.js:102:19)
        at VisualEditor.destroy (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/visual-editor.ts:247:10)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/visual-editor.test.ts:419:14)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      209 |
      210 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 211 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      212 |
      213 |     this._isActive = false
      214 |

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:211:13)
      at VisualEditor.destroy (src/visual-editor/core/visual-editor.ts:247:10)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:419:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:217:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:226:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:233:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: null,
        timestamp: '2025-10-28T20:52:15.342Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received but capture is paused

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:76:19)
          at Array.forEach (<anonymous>)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: [ { selector: '.test', type: 'text', value: 'Initial text' } ]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.366Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.369Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.375Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:210:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/visual-editor.ts:211:13)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/visual-editor.test.ts:493:14)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      209 |
      210 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 211 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      212 |
      213 |     this._isActive = false
      214 |

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:211:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:493:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:217:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:226:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:233:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
       Found 9 unit types

      at Object.<anonymous> (background/core/__tests__/api-client-integration.test.ts:190:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Saving changes - raw count: 2

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:475:13)

  console.log
    [ABSmartly] Squashing changes from 2 to consolidated list

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:352:13)

  console.log
    [ABSmartly] Squashed to 2 changes

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:382:13)

  console.log
    [ABSmartly] Squashed changes count: 2

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:479:13)

  console.log
    [ABSmartly] Storing original values in DOM for 2 changes

      at VisualEditor.storeOriginalValuesInDOM (src/visual-editor/core/visual-editor.ts:399:13)

  console.log
    [ABSmartly] Sending squashed changes to sidebar:

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:485:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Saving changes - raw count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:475:13)

  console.log
    [ABSmartly] Squashing changes from 0 to consolidated list

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:352:13)

  console.log
    [ABSmartly] Squashed to 0 changes

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:382:13)

  console.log
    [ABSmartly] Squashed changes count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:479:13)

  console.log
    [ABSmartly] Storing original values in DOM for 0 changes

      at VisualEditor.storeOriginalValuesInDOM (src/visual-editor/core/visual-editor.ts:399:13)

  console.log
    [ABSmartly] Sending squashed changes to sidebar:

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:485:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Saving changes - raw count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:475:13)

  console.log
    [ABSmartly] Squashing changes from 0 to consolidated list

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:352:13)

  console.log
    [ABSmartly] Squashed to 0 changes

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:382:13)

  console.log
    [ABSmartly] Squashed changes count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:479:13)

  console.log
    [ABSmartly] Storing original values in DOM for 0 changes

      at VisualEditor.storeOriginalValuesInDOM (src/visual-editor/core/visual-editor.ts:399:13)

  console.log
    [ABSmartly] Sending squashed changes to sidebar:

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:485:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.447Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.450Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #unique-header h1

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:210:13)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: null,
        timestamp: '2025-10-28T20:52:15.463Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/visual-editor.ts:211:13)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/visual-editor.test.ts:705:14)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      209 |
      210 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 211 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      212 |
      213 |     this._isActive = false
      214 |

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:211:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:705:14)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: null,
      timestamp: '2025-10-28T20:52:15.463Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:217:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:226:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:233:13)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    
    🔧 SDK Configuration:

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:18:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    API Endpoint (raw): https://demo-2.absmartly.com/v1

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:19:13)

  console.log
    API Endpoint (normalized): https://demo-2.absmartly.com

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:20:13)

  console.log
    [ABSmartly] Using unique ID (fastest): unique-span

      at getSelector (src/utils/selector-generator-visual.ts:108:17)

  console.log
    SDK Endpoint (with /v1): https://demo-2.absmartly.com/v1

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:21:13)

  console.log
    API Key: pq2xUUeL3L...

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:22:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    ✅ SDK instance created

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:46:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #test\:id span

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.474Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.478Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #product-list > div:nth-of-type(1) > div

      at getSelector (src/utils/selector-generator-visual.ts:427:19)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: null,
        timestamp: '2025-10-28T20:52:15.479Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: null,
      timestamp: '2025-10-28T20:52:15.479Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'exposure',
        data: { experiment: 'test' },
        timestamp: '2025-10-28T20:52:15.483Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'exposure',
      data: { experiment: 'test' },
      timestamp: '2025-10-28T20:52:15.483Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.484Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 1 New count: 2

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #product-list > div:nth-of-type(2) > div

      at getSelector (src/utils/selector-generator-visual.ts:427:19)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #container > div:nth-of-type(1)

      at getSelector (src/utils/selector-generator-visual.ts:427:19)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #container > div:nth-of-type(2)

      at getSelector (src/utils/selector-generator-visual.ts:427:19)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Already active, returning

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:161:15)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.499Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Already active, returning

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:161:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #container > div:nth-of-type(3)

      at getSelector (src/utils/selector-generator-visual.ts:427:19)

  console.log
    
    ========== CASE 2: Product Highlights Test ==========

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:206:13)

  console.log
    Target text: Our Group Sequential Testing (GST) engine allows you to run tests twice as fast

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:207:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.509Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:210:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/visual-editor.ts:211:13)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/visual-editor.test.ts:775:16
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/expect/build/index.js:1824:9)
        at Object.throwingMatcher [as toThrow] (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/expect/build/index.js:2235:93)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/visual-editor/core/__tests__/visual-editor.test.ts:778:14)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      209 |
      210 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 211 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      212 |
      213 |     this._isActive = false
      214 |

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:211:13)
      at src/visual-editor/core/__tests__/visual-editor.test.ts:775:16
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:778:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:217:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:226:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:233:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #content article > section > p

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.514Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Already active, returning

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:161:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [buildContextualSelector] ===== STARTING SCAN for p =====

      at buildContextualSelector (src/utils/selector-generator.ts:513:13)

  console.log
    [buildContextualSelector] Target element: HTMLParagraphElement {
      [Symbol(SameObject caches)]: [Object: null prototype] { attributes: NamedNodeMap {} }
    }

      at buildContextualSelector (src/utils/selector-generator.ts:514:13)

  console.log
    [buildContextualSelector] Target part: "p"

      at buildContextualSelector (src/utils/selector-generator.ts:515:13)

  console.log
    [buildContextualSelector] Scanning up to 12 parent levels...

      at buildContextualSelector (src/utils/selector-generator.ts:529:22)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #parent span

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [buildContextualSelector] Depth 1: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 2: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Saving changes - raw count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:475:13)

  console.log
    [ABSmartly] Squashing changes from 0 to consolidated list

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:352:13)

  console.log
    [ABSmartly] Using data attribute (slower but stable): [data-testid="submit-button"]

      at getSelector (src/utils/selector-generator-visual.ts:267:17)

  console.log
    [ABSmartly] Squashed to 0 changes

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:382:13)

  console.log
    [buildContextualSelector] Depth 3: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [Messaging] Sending to background: CLEAR_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [buildContextualSelector] Depth 4: DIV { 'data-framer-name': 'Content', id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 5: DIV { 'data-framer-name': 'Features Row 1', id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 6: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 7: DIV { 'data-framer-name': 'Wrapper', id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 8: DIV { 'data-framer-name': 'Product Highlights', id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 9: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 10: DIV { 'data-framer-name': null, id: 'main' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    ✅ Context created successfully

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:68:15)

  console.log
    [buildContextualSelector] Depth 11: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 12: BODY { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [ABSmartly] Squashed changes count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:479:13)

  console.log
    Has data: true

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:72:15)

  console.log
    [buildContextualSelector] Found semantic ancestors: [
      { depth: 5, score: 60, tag: 'DIV', dataFramerName: 'Features Row 1' },
      {
        depth: 8,
        score: 60,
        tag: 'DIV',
        dataFramerName: 'Product Highlights'
      },
      { depth: 4, score: 40, tag: 'DIV', dataFramerName: 'Content' },
      { depth: 7, score: 40, tag: 'DIV', dataFramerName: 'Wrapper' }
    ]

      at buildContextualSelector (src/utils/selector-generator.ts:553:13)

  console.log
    [ABSmartly] Storing original values in DOM for 0 changes

      at VisualEditor.storeOriginalValuesInDOM (src/visual-editor/core/visual-editor.ts:399:13)

  console.log
    [ABSmartly] Sending squashed changes to sidebar:

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:485:13)

  console.log
    Experiments available: 0

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:76:17)

  console.log
    [buildContextualSelector] Trying "div[data-framer-name="Features Row 1"] p" (ancestor depth 5): 21 matches

      at buildContextualSelector (src/utils/selector-generator.ts:612:24)

  console.log
    [buildContextualSelector] Selector matched 21 elements, finding disambiguating parent...

      at buildContextualSelector (src/utils/selector-generator.ts:621:26)

  console.log
    [buildContextualSelector] Checking depth 1:

      at buildContextualSelector (src/utils/selector-generator.ts:652:19)

  console.log
      Our ancestor: DIV[data-framer-name="null"]

      at buildContextualSelector (src/utils/selector-generator.ts:653:19)

  console.log
      Other matching elements' ancestors: [
      { tag: 'DIV', attr: null, isSame: true },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false }
    ]

      at buildContextualSelector (src/utils/selector-generator.ts:654:19)

  console.log
    [buildContextualSelector] Checking depth 2:

      at buildContextualSelector (src/utils/selector-generator.ts:652:19)

  console.log
      Our ancestor: DIV[data-framer-name="null"]

      at buildContextualSelector (src/utils/selector-generator.ts:653:19)

  console.log
      Other matching elements' ancestors: [
      { tag: 'DIV', attr: null, isSame: true },
      { tag: 'A', attr: 'Button', isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'A', attr: 'Standard Accent', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'A', attr: 'Button', isSame: false }
    ]

      at buildContextualSelector (src/utils/selector-generator.ts:654:19)

  console.log
    [buildContextualSelector] Checking depth 3:

      at buildContextualSelector (src/utils/selector-generator.ts:652:19)

  console.log
      Our ancestor: DIV[data-framer-name="null"]

      at buildContextualSelector (src/utils/selector-generator.ts:653:19)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
      Other matching elements' ancestors: [
      { tag: 'DIV', attr: null, isSame: true },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Collaboration', isSame: false },
      { tag: 'DIV', attr: 'Collaboration', isSame: false },
      { tag: 'DIV', attr: 'Full Support & Training', isSame: false },
      { tag: 'DIV', attr: 'Full Support & Training', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Button', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false }
    ]

      at buildContextualSelector (src/utils/selector-generator.ts:654:19)

  console.log
    [buildContextualSelector] Checking depth 4:

      at buildContextualSelector (src/utils/selector-generator.ts:652:19)

  console.log
      Our ancestor: DIV[data-framer-name="Content"]

      at buildContextualSelector (src/utils/selector-generator.ts:653:19)

  console.log
      Other matching elements' ancestors: [
      { tag: 'DIV', attr: 'Content', isSame: true },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false }
    ]

      at buildContextualSelector (src/utils/selector-generator.ts:654:19)

  console.log
      Checking semantic attr "Content": {
      otherAttrValues: [
        { isSameElement: true, attrValue: 'Content' },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: 'Features Row 1' },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: 'Features Row 1' },
        { isSameElement: false, attrValue: 'Features Row 1' },
        { isSameElement: false, attrValue: 'Features Row 1' },
        { isSameElement: false, attrValue: 'Features Row 1' },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: 'Features Row 1' }
      ],
      otherHaveDifferentValues: true
    }

      at buildContextualSelector (src/utils/selector-generator.ts:674:21)

  console.log
      Disambiguating ancestor "div[data-framer-name="Content"]" is BELOW semantic parent "div[data-framer-name="Features Row 1"]"

      at buildContextualSelector (src/utils/selector-generator.ts:696:25)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: null,
        timestamp: '2025-10-28T20:52:15.533Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: null,
      timestamp: '2025-10-28T20:52:15.533Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [ABSmartly] Using unique ID (fastest): submit-btn

      at getSelector (src/utils/selector-generator-visual.ts:108:17)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Saving changes - raw count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:475:13)

  console.log
    [ABSmartly] Squashing changes from 0 to consolidated list

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:352:13)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [ABSmartly] Using data attribute (slower but stable): [data-test="email-input"]

      at getSelector (src/utils/selector-generator-visual.ts:267:17)

  console.log
    [ABSmartly] Squashed to 0 changes

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:382:13)

  console.log
    [ABSmartly] Squashed changes count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:479:13)

  console.log
    [ABSmartly] Storing original values in DOM for 0 changes

      at VisualEditor.storeOriginalValuesInDOM (src/visual-editor/core/visual-editor.ts:399:13)

  console.log
    [ABSmartly] Sending squashed changes to sidebar:

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:485:13)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:704:11)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.545Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
      Testing with intermediate: "div[data-framer-name="Features Row 1"] div[data-framer-name="Content"] p": 17 matches

      at buildContextualSelector (src/utils/selector-generator.ts:711:34)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
      Building precise chain from "div[data-framer-name="Features Row 1"]" through 5 elements

      at buildContextualSelector (src/utils/selector-generator.ts:733:38)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
        [0] Added semantic with >: div[data-framer-name="Content"]

      at buildContextualSelector (src/utils/selector-generator.ts:750:42)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Using data attribute (slower but stable): [data-cy="login-button"]

      at getSelector (src/utils/selector-generator-visual.ts:267:17)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:704:11)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [ { selector: '.test', type: 'text', value: 'Test content' } ],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
        [1] Added with nth: div:nth-of-type(1)

      at buildContextualSelector (src/utils/selector-generator.ts:760:44)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #content span

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.549Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
        [2] Added with nth: div:nth-of-type(2)

      at buildContextualSelector (src/utils/selector-generator.ts:760:44)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
        [3] Added with nth: div:nth-of-type(2)

      at buildContextualSelector (src/utils/selector-generator.ts:760:44)

  console.log
        [4] Added: p

      at buildContextualSelector (src/utils/selector-generator.ts:763:44)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #parent div > span

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
      Testing precise chain: "div[data-framer-name="Features Row 1"] > div[data-framer-name="Content"] > div:nth-of-type(1) > div:nth-of-type(2) > div:nth-of-type(2) > p": 1 matches

      at buildContextualSelector (src/utils/selector-generator.ts:770:38)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [buildContextualSelector] ✓ Found unique selector with precise chain from semantic parent

      at buildContextualSelector (src/utils/selector-generator.ts:773:40)

  console.log
    
    [Test] Final selector: div[data-framer-name="Features Row 1"] > div[data-framer-name="Content"] > div:nth-of-type(1) > div:nth-of-type(2) > div:nth-of-type(2) > p

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:223:13)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: { test: 'data' },
        timestamp: '2025-10-28T20:52:15.558Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: { test: 'data' },
      timestamp: '2025-10-28T20:52:15.558Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
       Found 46 metrics

      at Object.<anonymous> (background/core/__tests__/api-client-integration.test.ts:212:15)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [Test] Selector matches 1 elements

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:224:13)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'exposure',
        data: { variant: 1 },
        timestamp: '2025-10-28T20:52:15.560Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'exposure',
      data: { variant: 1 },
      timestamp: '2025-10-28T20:52:15.560Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 1 New count: 2

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:704:11)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.568Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:704:11)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.571Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [Messaging] Sending to background: CLEAR_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #menu > li:nth-of-type(2)

      at getSelector (src/utils/selector-generator-visual.ts:427:19)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #list > span:nth-of-type(1)

      at getSelector (src/utils/selector-generator-visual.ts:427:19)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)
          at Array.map (<anonymous>)

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'exposure',
        data: { experiment: 'test_exp', variant: 1 },
        timestamp: '2025-10-28T20:52:15.579Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'exposure',
      data: { experiment: 'test_exp', variant: 1 },
      timestamp: '2025-10-28T20:52:15.579Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #list > span:nth-of-type(2)

      at getSelector (src/utils/selector-generator-visual.ts:427:19)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:704:11)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.582Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:704:11)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:53:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:54:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:156:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-28T20:52:15.585Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:157:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:186:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:190:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #list > span:nth-of-type(3)

      at getSelector (src/utils/selector-generator-visual.ts:427:19)
          at Array.map (<anonymous>)

  console.log
    [Messaging] Sending to content script: OPEN_EVENT_VIEWER

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #search-results > div:nth-of-type(1) > div:nth-of-type(1)

      at getSelector (src/utils/selector-generator-visual.ts:427:19)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #bhp-ab-gateway-desktop-atf-6 > div > div > div > ul > li:nth-of-type(1) > a > div > span

      at getSelector (src/utils/selector-generator-visual.ts:427:19)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #bhp-ab-gateway-desktop-atf-6 > div > div > div > ul > li:nth-of-type(2) > a > div > span

      at getSelector (src/utils/selector-generator-visual.ts:427:19)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Single tag selector too brittle, continuing search: span

      at getSelector (src/utils/selector-generator-visual.ts:357:17)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Using fallback with nth-child

      at getSelector (src/utils/selector-generator-visual.ts:437:11)

  console.log
    [ABSmartly] Found minimal fallback selector: span

      at getSelector (src/utils/selector-generator-visual.ts:500:15)

  console.log
    [ABSmartly] Using unique class selector: .btn-primary

      at getSelector (src/utils/selector-generator-visual.ts:217:19)

  console.log
    [ABSmartly] Single tag selector too brittle, continuing search: span

      at getSelector (src/utils/selector-generator-visual.ts:357:17)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Using fallback with nth-child

      at getSelector (src/utils/selector-generator-visual.ts:437:11)

  console.log
    [ABSmartly] Found minimal fallback selector: span

      at getSelector (src/utils/selector-generator-visual.ts:500:15)

  console.log
    [ABSmartly] Single tag selector too brittle, continuing search: h1

      at getSelector (src/utils/selector-generator-visual.ts:357:17)

  console.log
    [ABSmartly] Added parent context to structural tag: header > h1

      at getSelector (src/utils/selector-generator-visual.ts:377:19)

  console.log
    [ABSmartly] Single tag selector too brittle, continuing search: p

      at getSelector (src/utils/selector-generator-visual.ts:357:17)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Using fallback with nth-child

      at getSelector (src/utils/selector-generator-visual.ts:437:11)

  console.log
    [ABSmartly] Found minimal fallback selector: p

      at getSelector (src/utils/selector-generator-visual.ts:500:15)

  console.log
    [ABSmartly] Single tag selector too brittle, continuing search: span

      at getSelector (src/utils/selector-generator-visual.ts:357:17)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Using fallback with nth-child

      at getSelector (src/utils/selector-generator-visual.ts:437:11)

  console.log
    [ABSmartly] Found minimal fallback selector: span

      at getSelector (src/utils/selector-generator-visual.ts:500:15)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #icon-svg g > path

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #icon-svg g > circle

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #parent div > div > span

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #container div.unique-class > span

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:389:11)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:393:11)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #container > div:nth-of-type(2) > span

      at getSelector (src/utils/selector-generator-visual.ts:427:19)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #unique-child span

      at getSelector (src/utils/selector-generator-visual.ts:185:19)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: null,
        timestamp: '2025-10-28T20:52:15.647Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: null,
      timestamp: '2025-10-28T20:52:15.647Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [Messaging] Sending to content script: OPEN_EVENT_VIEWER

      at debugLog (src/utils/debug.ts:29:13)

  console.log
       Found 40 experiment tags

      at Object.<anonymous> (background/core/__tests__/api-client-integration.test.ts:234:15)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: { experiments: [Array] },
        timestamp: '2025-10-28T20:52:15.717Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: { experiments: [ 'exp1' ] },
      timestamp: '2025-10-28T20:52:15.717Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'exposure',
        data: { variant: 2 },
        timestamp: '2025-10-28T20:52:15.720Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'exposure',
      data: { variant: 2 },
      timestamp: '2025-10-28T20:52:15.720Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 1 New count: 2

      at src/components/EventsDebugPage.tsx:72:21

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    [Messaging] Sending to content script: OPEN_EVENT_VIEWER

      at debugLog (src/utils/debug.ts:29:13)

  console.warn
    Error: <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="utf-8">
    <title>Error</title>
    </head>
    <body>
    <pre>Cannot GET /v1/context</pre>
    </body>
    </html>
    
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@absmartly/javascript-sdk/lib/client.js:123:27
        at processTicksAndRejections (node:internal/process/task_queues:105:5) {
      _bail: true
    }

      at node_modules/@absmartly/javascript-sdk/lib/client.js:144:17

  console.log
    📡 Event fired: error

      at Context.eventLogger [as _eventLogger] (src/__tests__/sdk-api.test.ts:103:17)

  console.log
    
    🧪 Testing SDK Methods:

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:127:15)

  console.log
    Events captured so far: [ 'error' ]

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:128:15)

  console.log
    ⚠️  API connection failed - skipping ready event test

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:135:17)

  console.log
       This is expected if PLASMO_PUBLIC_ABSMARTLY_API_ENDPOINT is not accessible

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:136:17)

  console.log
       Current endpoint: https://demo-2.absmartly.com/v1

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:137:17)

  console.log
       Error event was captured successfully ✓

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:138:17)

  console.log
    
    ✅ Event logger is working (captured error event)

      at Object.<anonymous> (src/__tests__/sdk-api.test.ts:142:17)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'goal',
        data: {
          message: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',
          nested: [Object]
        },
        timestamp: '2025-10-28T20:52:15.786Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'goal',
      data: {
        message: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',
        nested: { deep: [Object] }
      },
      timestamp: '2025-10-28T20:52:15.786Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    
    ========== CASE 3: GST Engine Paragraph Test ==========

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:248:13)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: null,
        timestamp: '2025-01-01T14:30:45.123Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: null,
      timestamp: '2025-01-01T14:30:45.123Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
    Target text: Our Group Sequential Testing (GST) engine allows you to run tests twice as fast

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:249:13)

  console.log
    [buildContextualSelector] ===== STARTING SCAN for p =====

      at buildContextualSelector (src/utils/selector-generator.ts:513:13)

  console.log
    [buildContextualSelector] Target element: HTMLParagraphElement {
      [Symbol(SameObject caches)]: [Object: null prototype] { attributes: NamedNodeMap {} }
    }

      at buildContextualSelector (src/utils/selector-generator.ts:514:13)

  console.log
    [buildContextualSelector] Target part: "p"

      at buildContextualSelector (src/utils/selector-generator.ts:515:13)

  console.log
    [buildContextualSelector] Scanning up to 12 parent levels...

      at buildContextualSelector (src/utils/selector-generator.ts:529:22)

  console.log
    [buildContextualSelector] Depth 1: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 2: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 3: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'finalize',
        data: null,
        timestamp: '2025-10-28T20:52:15.804Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'finalize',
      data: null,
      timestamp: '2025-10-28T20:52:15.804Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
       Found 11 teams

      at Object.<anonymous> (background/core/__tests__/api-client-integration.test.ts:256:15)

  console.log
    [buildContextualSelector] Depth 4: DIV { 'data-framer-name': 'Content', id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 5: DIV { 'data-framer-name': 'Features Row 1', id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 6: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 7: DIV { 'data-framer-name': 'Wrapper', id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 8: DIV { 'data-framer-name': 'Product Highlights', id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 9: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [buildContextualSelector] Depth 10: DIV { 'data-framer-name': null, id: 'main' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 11: DIV { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Depth 12: BODY { 'data-framer-name': null, id: 'none' }

      at buildContextualSelector (src/utils/selector-generator.ts:532:15)

  console.log
    [buildContextualSelector] Found semantic ancestors: [
      { depth: 5, score: 60, tag: 'DIV', dataFramerName: 'Features Row 1' },
      {
        depth: 8,
        score: 60,
        tag: 'DIV',
        dataFramerName: 'Product Highlights'
      },
      { depth: 4, score: 40, tag: 'DIV', dataFramerName: 'Content' },
      { depth: 7, score: 40, tag: 'DIV', dataFramerName: 'Wrapper' }
    ]

      at buildContextualSelector (src/utils/selector-generator.ts:553:13)

  console.log
    [buildContextualSelector] Trying "div[data-framer-name="Features Row 1"] p" (ancestor depth 5): 21 matches

      at buildContextualSelector (src/utils/selector-generator.ts:612:24)

  console.log
    [buildContextualSelector] Selector matched 21 elements, finding disambiguating parent...

      at buildContextualSelector (src/utils/selector-generator.ts:621:26)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [buildContextualSelector] Checking depth 1:

      at buildContextualSelector (src/utils/selector-generator.ts:652:19)

  console.log
      Our ancestor: DIV[data-framer-name="null"]

      at buildContextualSelector (src/utils/selector-generator.ts:653:19)

  console.log
      Other matching elements' ancestors: [
      { tag: 'DIV', attr: null, isSame: true },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false }
    ]

      at buildContextualSelector (src/utils/selector-generator.ts:654:19)

  console.log
    [buildContextualSelector] Checking depth 2:

      at buildContextualSelector (src/utils/selector-generator.ts:652:19)

  console.log
      Our ancestor: DIV[data-framer-name="null"]

      at buildContextualSelector (src/utils/selector-generator.ts:653:19)

  console.log
      Other matching elements' ancestors: [
      { tag: 'DIV', attr: null, isSame: true },
      { tag: 'A', attr: 'Button', isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'A', attr: 'Standard Accent', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'A', attr: 'Button', isSame: false }
    ]

      at buildContextualSelector (src/utils/selector-generator.ts:654:19)

  console.log
    [buildContextualSelector] Checking depth 3:

      at buildContextualSelector (src/utils/selector-generator.ts:652:19)

  console.log
      Our ancestor: DIV[data-framer-name="null"]

      at buildContextualSelector (src/utils/selector-generator.ts:653:19)

  console.log
      Other matching elements' ancestors: [
      { tag: 'DIV', attr: null, isSame: true },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Feature', isSame: false },
      { tag: 'DIV', attr: 'Collaboration', isSame: false },
      { tag: 'DIV', attr: 'Collaboration', isSame: false },
      { tag: 'DIV', attr: 'Full Support & Training', isSame: false },
      { tag: 'DIV', attr: 'Full Support & Training', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Button', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Content', isSame: false }
    ]

      at buildContextualSelector (src/utils/selector-generator.ts:654:19)

  console.log
    [buildContextualSelector] Checking depth 4:

      at buildContextualSelector (src/utils/selector-generator.ts:652:19)

  console.log
      Our ancestor: DIV[data-framer-name="Content"]

      at buildContextualSelector (src/utils/selector-generator.ts:653:19)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
      Other matching elements' ancestors: [
      { tag: 'DIV', attr: 'Content', isSame: true },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: null, isSame: false },
      { tag: 'DIV', attr: 'Features Row 1', isSame: false }
    ]

      at buildContextualSelector (src/utils/selector-generator.ts:654:19)

  console.log
      Checking semantic attr "Content": {
      otherAttrValues: [
        { isSameElement: true, attrValue: 'Content' },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: 'Features Row 1' },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: 'Features Row 1' },
        { isSameElement: false, attrValue: 'Features Row 1' },
        { isSameElement: false, attrValue: 'Features Row 1' },
        { isSameElement: false, attrValue: 'Features Row 1' },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: null },
        { isSameElement: false, attrValue: 'Features Row 1' }
      ],
      otherHaveDifferentValues: true
    }

      at buildContextualSelector (src/utils/selector-generator.ts:674:21)

  console.log
      Disambiguating ancestor "div[data-framer-name="Content"]" is BELOW semantic parent "div[data-framer-name="Features Row 1"]"

      at buildContextualSelector (src/utils/selector-generator.ts:696:25)

  console.log
      Testing with intermediate: "div[data-framer-name="Features Row 1"] div[data-framer-name="Content"] p": 17 matches

      at buildContextualSelector (src/utils/selector-generator.ts:711:34)

  console.log
      Building precise chain from "div[data-framer-name="Features Row 1"]" through 5 elements

      at buildContextualSelector (src/utils/selector-generator.ts:733:38)

  console.log
        [0] Added semantic with >: div[data-framer-name="Content"]

      at buildContextualSelector (src/utils/selector-generator.ts:750:42)

  console.log
        [1] Added with nth: div:nth-of-type(1)

      at buildContextualSelector (src/utils/selector-generator.ts:760:44)

  console.log
        [2] Added with nth: div:nth-of-type(2)

      at buildContextualSelector (src/utils/selector-generator.ts:760:44)

  console.log
        [3] Added with nth: div:nth-of-type(2)

      at buildContextualSelector (src/utils/selector-generator.ts:760:44)

  console.log
        [4] Added: p

      at buildContextualSelector (src/utils/selector-generator.ts:763:44)

  console.log
      Testing precise chain: "div[data-framer-name="Features Row 1"] > div[data-framer-name="Content"] > div:nth-of-type(1) > div:nth-of-type(2) > div:nth-of-type(2) > p": 1 matches

      at buildContextualSelector (src/utils/selector-generator.ts:770:38)

  console.log
    [buildContextualSelector] ✓ Found unique selector with precise chain from semantic parent

      at buildContextualSelector (src/utils/selector-generator.ts:773:40)

  console.log
    
    [Test] Final selector: div[data-framer-name="Features Row 1"] > div[data-framer-name="Content"] > div:nth-of-type(1) > div:nth-of-type(2) > div:nth-of-type(2) > p

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:265:13)

  console.log
    [Test] Selector matches 1 elements

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:266:13)

  console.log
    Generated selector for Benefits (no semantic ancestors): div[data-framer-name="Benefits"]:nth-of-type(3)

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:312:13)

  console.log
    Generated selector for first Benefits: div[data-framer-name="Benefits"]:nth-of-type(1)

      at Object.<anonymous> (src/utils/__tests__/selector-generator-nth-type.test.ts:334:13)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Component mounted, fetching buffered events...

      at src/components/EventsDebugPage.tsx:34:13

  console.log
    [Messaging] Sending to background: GET_BUFFERED_EVENTS

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [EventsDebugPage] Registered message listeners

      at src/components/EventsDebugPage.tsx:89:13

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'ready',
        data: null,
        timestamp: '2025-10-28T20:52:15.928Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received, adding event: {
      eventName: 'ready',
      data: null,
      timestamp: '2025-10-28T20:52:15.928Z'
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:63:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Adding event to list. Current count: 0 New count: 1

      at src/components/EventsDebugPage.tsx:72:21
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] GET_BUFFERED_EVENTS response: undefined

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:40:17)

  console.log
    [EventsDebugPage] No buffered events found

      at fetchBufferedEvents (src/components/EventsDebugPage.tsx:45:19)

  console.log
       Found 53 users

      at Object.<anonymous> (background/core/__tests__/api-client-integration.test.ts:278:15)

  console.log
    [EventsDebugPage] Received runtime message: SDK_EVENT_BROADCAST {
      type: 'SDK_EVENT_BROADCAST',
      payload: {
        eventName: 'exposure',
        data: null,
        timestamp: '2025-10-28T20:52:15.938Z'
      }
    }

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:60:15)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] SDK_EVENT_BROADCAST received but capture is paused

      at handleRuntimeMessage (src/components/EventsDebugPage.tsx:76:19)
          at Array.forEach (<anonymous>)

  console.log
    [EventsDebugPage] Removing message listeners

      at src/components/EventsDebugPage.tsx:94:15
          at Array.forEach (<anonymous>)

  console.log
       Found 4 environments

      at Object.<anonymous> (background/core/__tests__/api-client-integration.test.ts:300:15)

  console.error
    [Security] Invalid API endpoint domain: evil.com. Only absmartly.com, absmartly.io domains are allowed.

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:72:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:66:35)

  console.error
    [Security] Invalid API endpoint domain: localhost. Only absmartly.com, absmartly.io domains are allowed.

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:72:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:70:35)

  console.error
    [Security] Invalid API endpoint domain: absmartly.com.evil.com. Only absmartly.com, absmartly.io domains are allowed.

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:72:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:74:35)

  console.error
    [Security] Invalid API endpoint domain: absmartly-phishing.com. Only absmartly.com, absmartly.io domains are allowed.

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:72:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:78:35)

  console.error
    [Security] Invalid API endpoint domain: 192.168.1.1. Only absmartly.com, absmartly.io domains are allowed.

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:72:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:82:35)

  console.error
    [Security] Failed to parse API endpoint URL: TypeError: Invalid URL: https://
        at new URLImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL-impl.js:20:13)
        at Object.exports.setup (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:54:12)
        at new URL (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:115:22)
        at validateAPIEndpoint (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/security.ts:64:17)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/__tests__/security.test.ts:86:35)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:78:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:86:35)

  console.error
    [Security] Invalid API endpoint domain: absmartly.org. Only absmartly.com, absmartly.io domains are allowed.

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:72:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:90:35)

  console.error
    [Security] Failed to parse API endpoint URL: TypeError: Invalid URL: not-a-url
        at new URLImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL-impl.js:20:13)
        at Object.exports.setup (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:54:12)
        at new URL (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:115:22)
        at validateAPIEndpoint (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/security.ts:64:17)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/__tests__/security.test.ts:96:35)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:78:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:96:35)

  console.error
    [Security] Failed to parse API endpoint URL: TypeError: Invalid URL: 
        at new URLImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL-impl.js:20:13)
        at Object.exports.setup (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:54:12)
        at new URL (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:115:22)
        at validateAPIEndpoint (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/security.ts:64:17)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/__tests__/security.test.ts:100:35)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:78:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:100:35)

  console.error
    [Security] Failed to parse API endpoint URL: TypeError: Invalid URL: api.absmartly.com
        at new URLImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL-impl.js:20:13)
        at Object.exports.setup (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:54:12)
        at new URL (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:115:22)
        at validateAPIEndpoint (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/security.ts:64:17)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/__tests__/security.test.ts:104:35)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:78:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:104:35)

  console.error
    [Security] Failed to parse API endpoint URL: TypeError: Invalid URL: https://?invalid
        at new URLImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL-impl.js:20:13)
        at Object.exports.setup (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:54:12)
        at new URL (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:115:22)
        at validateAPIEndpoint (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/security.ts:64:17)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/__tests__/security.test.ts:108:35)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:78:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:108:35)

  console.error
    [Security] SSRF attempt blocked: http://localhost

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:142:26)

  console.error
    [Security] SSRF attempt blocked: http://localhost:8080

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:146:26)

  console.error
    [Security] SSRF attempt blocked: http://127.0.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:150:26)

  console.error
    [Security] SSRF attempt blocked: http://127.0.0.1:3000

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:154:26)

  console.error
    [Security] SSRF attempt blocked: http://0.0.0.0

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:158:26)

  console.error
    [Security] SSRF attempt blocked: http://192.168.1.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:164:26)

  console.error
    [Security] SSRF attempt blocked: http://192.168.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:165:26)

  console.error
    [Security] SSRF attempt blocked: http://192.168.255.255

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:166:26)

  console.error
    [Security] SSRF attempt blocked: http://10.0.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:170:26)

  console.error
    [Security] SSRF attempt blocked: http://10.255.255.255

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:171:26)

  console.error
    [Security] SSRF attempt blocked: http://172.16.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:175:26)

  console.error
    [Security] SSRF attempt blocked: http://172.17.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:176:26)

  console.error
    [Security] SSRF attempt blocked: http://172.20.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:177:26)

  console.error
    [Security] SSRF attempt blocked: http://172.31.255.255

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:178:26)

  console.error
    [Security] SSRF attempt blocked: http://172.16.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.17.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.18.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.19.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.20.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.21.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.22.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.23.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.24.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.25.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.26.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.27.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.28.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.29.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.30.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] SSRF attempt blocked: http://172.31.0.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:183:28)

  console.error
    [Security] Failed to parse URL for SSRF check: TypeError: Invalid URL: not-a-url
        at new URLImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL-impl.js:20:13)
        at Object.exports.setup (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:54:12)
        at new URL (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:115:22)
        at isSSRFSafe (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/security.ts:97:23)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/__tests__/security.test.ts:190:26)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:114:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:190:26)

  console.error
    [Security] Failed to parse URL for SSRF check: TypeError: Invalid URL: 
        at new URLImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL-impl.js:20:13)
        at Object.exports.setup (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:54:12)
        at new URL (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:115:22)
        at isSSRFSafe (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/security.ts:97:23)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/__tests__/security.test.ts:194:26)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:114:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:194:26)

  console.error
    [Security] Failed to parse URL for SSRF check: TypeError: Invalid URL: http://?invalid
        at new URLImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL-impl.js:20:13)
        at Object.exports.setup (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:54:12)
        at new URL (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-environment-jsdom/node_modules/whatwg-url/lib/URL.js:115:22)
        at isSSRFSafe (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/security.ts:97:23)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/background/utils/__tests__/security.test.ts:198:26)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:114:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:198:26)

  console.error
    [Security] SSRF attempt blocked: http://localhost/avatar.png

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at validateAvatarUrl (background/utils/security.ts:146:8)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:224:41)

  console.error
    [Security] SSRF attempt blocked: http://192.168.1.1/avatar.png

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at validateAvatarUrl (background/utils/security.ts:146:8)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:230:41)

  console.error
    [Security] SSRF attempt blocked: http://127.0.0.1:8080/avatar.png

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at validateAvatarUrl (background/utils/security.ts:146:8)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:248:41)

  console.error
    [Security] Invalid sender ID: malicious-id (expected: test-extension-id-12345)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateExtensionSender (background/utils/security.ts:174:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:271:39)

  console.error
    [Security] Message received without sender ID

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateExtensionSender (background/utils/security.ts:169:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:275:39)

  console.error
    [Security] Message received without sender ID

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateExtensionSender (background/utils/security.ts:169:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:279:39)

  console.error
    [Security] Invalid sender ID: test-extension-id-1234 (expected: test-extension-id-12345)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateExtensionSender (background/utils/security.ts:174:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:283:39)

  console.error
    [Security] Invalid sender ID: TEST-EXTENSION-ID-12345 (expected: test-extension-id-12345)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateExtensionSender (background/utils/security.ts:174:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:287:39)

  console.error
    [Security] Invalid sender ID: test-extension-id-12345X (expected: test-extension-id-12345)

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateExtensionSender (background/utils/security.ts:174:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:291:39)

  console.error
    [Security] SSRF attempt blocked: http://%6c%6f%63%61%6c%68%6f%73%74

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:372:26)

  console.error
    [Security] SSRF attempt blocked: ftp://192.168.1.1

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:382:26)

  console.error
    [Security] Invalid API endpoint domain: absmartly.com.evil.com. Only absmartly.com, absmartly.io domains are allowed.

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:72:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:405:35)

  console.error
    [Security] Invalid API endpoint domain: xn--e1afmkfd.xn--p1ai. Only absmartly.com, absmartly.io domains are allowed.

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:72:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:409:35)

  console.error
    [Security] Invalid API endpoint domain: api.absmartly.com.. Only absmartly.com, absmartly.io domains are allowed.

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:72:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:413:43)

  console.error
    [Security] Message received without sender ID

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateExtensionSender (background/utils/security.ts:169:5)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:420:39)

  console.error
    [Security] SSRF attempt blocked: http://192.168.1.1/admin

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at validateAvatarUrl (background/utils/security.ts:146:8)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:445:43)

  console.error
    [Security] SSRF attempt blocked: http://192.168.1.1/admin

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at isSSRFSafe (background/utils/security.ts:108:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:449:35)

  console.error
    [Security] Invalid API endpoint domain: evil.com. Only absmartly.com, absmartly.io domains are allowed.

      45 | export const debugError = (...args: any[]) => {
      46 |   if (isDebugEnabled()) {
    > 47 |     console.error(...args)
         |             ^
      48 |   }
      49 | }
      50 |

      at debugError (src/utils/debug.ts:47:13)
      at validateAPIEndpoint (background/utils/security.ts:72:7)
      at Object.<anonymous> (background/utils/__tests__/security.test.ts:458:33)

  console.log
    [Messaging] Sending TEST_MESSAGE from sidebar to background {
      type: 'TEST_MESSAGE',
      from: 'sidebar',
      to: 'background',
      expectsResponse: true,
      payload: { data: 'test' },
      requestId: 'msg_1761684736250_1'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Sending ABSMARTLY_PREVIEW from sidebar to content {
      type: 'ABSMARTLY_PREVIEW',
      from: 'sidebar',
      to: 'content',
      expectsResponse: false,
      payload: { action: 'apply' },
      requestId: 'msg_1761684736272_1'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Sending TEST_1 from sidebar to background {
      type: 'TEST_1',
      from: 'sidebar',
      to: 'background',
      requestId: 'msg_1761684736274_1'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Sending TEST_2 from sidebar to background {
      type: 'TEST_2',
      from: 'sidebar',
      to: 'background',
      requestId: 'msg_1761684736275_2'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Sending TEST from sidebar to content {
      type: 'TEST',
      from: 'sidebar',
      to: 'content',
      requestId: 'msg_1761684736278_1'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Sending ABSMARTLY_PREVIEW from sidebar to content {
      type: 'ABSMARTLY_PREVIEW',
      from: 'sidebar',
      to: 'content',
      expectsResponse: false,
      payload: { action: 'apply' },
      requestId: 'msg_1761684736289_1'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging Test Mode] Sending message via postMessage {
      type: 'ABSMARTLY_PREVIEW',
      from: 'sidebar',
      to: 'content',
      expectsResponse: false,
      payload: { action: 'apply' },
      requestId: 'msg_1761684736289_1'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Sending API_REQUEST from sidebar to background {
      type: 'API_REQUEST',
      from: 'sidebar',
      to: 'background',
      expectsResponse: true,
      payload: { method: 'GET', path: '/test' },
      requestId: 'msg_1761684736293_1'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging Test Mode] Sending message via postMessage {
      type: 'API_REQUEST',
      from: 'sidebar',
      to: 'background',
      expectsResponse: true,
      payload: { method: 'GET', path: '/test' },
      requestId: 'msg_1761684736293_1'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1, experiment2: { variant: 2, env: 1 } }

      at saveOverrides (src/utils/overrides.ts:91:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1, experiment2: { variant: 2, env: 1 } }

      at saveOverrides (src/utils/overrides.ts:101:13)

  console.log
    [Messaging] Sending API_REQUEST from sidebar to background {
      type: 'API_REQUEST',
      from: 'sidebar',
      to: 'background',
      expectsResponse: true,
      requestId: 'msg_1761684736297_1'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging Test Mode] Sending message via postMessage {
      type: 'API_REQUEST',
      from: 'sidebar',
      to: 'background',
      expectsResponse: true,
      requestId: 'msg_1761684736297_1'
    }

      at debugLog (src/utils/debug.ts:29:13)

  console.warn
    Failed to get development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:92:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      145 |     return envName || null
      146 |   } catch (error) {
    > 147 |     console.warn('Failed to get development environment:', error)
          |             ^
      148 |     return null
      149 |   }
      150 | }

      at getDevelopmentEnvironment (src/utils/overrides.ts:147:13)
      at syncOverridesToCookie (src/utils/overrides.ts:159:20)
      at saveOverrides (src/utils/overrides.ts:106:5)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:123:7)

  console.log
    [ABsmartly] Syncing to cookie - overrides: { experiment1: 1, experiment2: { variant: 2, env: 1 } } devEnv: null

      at syncOverridesToCookie (src/utils/overrides.ts:160:13)

  console.log
    [ABsmartly] saveOverrides called with: {
      enabled: 1,
      disabled: -1,
      objectDisabled: { variant: -1, env: 1 },
      objectEnabled: { variant: 2, env: 1 }
    }

      at saveOverrides (src/utils/overrides.ts:91:13)

  console.log
    [ABsmartly] Cleaned overrides: { enabled: 1, objectEnabled: { variant: 2, env: 1 } }

      at saveOverrides (src/utils/overrides.ts:101:13)

  console.warn
    Failed to get development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:92:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      145 |     return envName || null
      146 |   } catch (error) {
    > 147 |     console.warn('Failed to get development environment:', error)
          |             ^
      148 |     return null
      149 |   }
      150 | }

      at getDevelopmentEnvironment (src/utils/overrides.ts:147:13)
      at syncOverridesToCookie (src/utils/overrides.ts:159:20)
      at saveOverrides (src/utils/overrides.ts:106:5)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:152:7)

  console.log
    [ABsmartly] Syncing to cookie - overrides: { enabled: 1, objectEnabled: { variant: 2, env: 1 } } devEnv: null

      at syncOverridesToCookie (src/utils/overrides.ts:160:13)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:91:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:101:13)

  console.warn
    Failed to get development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:92:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      145 |     return envName || null
      146 |   } catch (error) {
    > 147 |     console.warn('Failed to get development environment:', error)
          |             ^
      148 |     return null
      149 |   }
      150 | }

      at getDevelopmentEnvironment (src/utils/overrides.ts:147:13)
      at syncOverridesToCookie (src/utils/overrides.ts:159:20)
      at saveOverrides (src/utils/overrides.ts:106:5)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:167:9)

  console.log
    [ABsmartly] Syncing to cookie - overrides: { experiment1: 1 } devEnv: null

      at syncOverridesToCookie (src/utils/overrides.ts:160:13)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:91:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:101:13)

  console.warn
    Failed to get development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:92:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      145 |     return envName || null
      146 |   } catch (error) {
    > 147 |     console.warn('Failed to get development environment:', error)
          |             ^
      148 |     return null
      149 |   }
      150 | }

      at getDevelopmentEnvironment (src/utils/overrides.ts:147:13)
      at syncOverridesToCookie (src/utils/overrides.ts:159:20)
      at saveOverrides (src/utils/overrides.ts:106:5)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:183:7)

  console.log
    [ABsmartly] Syncing to cookie - overrides: { experiment1: 1 } devEnv: null

      at syncOverridesToCookie (src/utils/overrides.ts:160:13)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:91:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:101:13)

  console.error
    Failed to save development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:191:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      133 |     }
      134 |   } catch (error) {
    > 135 |     console.error('Failed to save development environment:', error)
          |             ^
      136 |   }
      137 | }
      138 |

      at saveDevelopmentEnvironment (src/utils/overrides.ts:135:13)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:221:7)

  console.error
    Failed to save development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:191:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      133 |     }
      134 |   } catch (error) {
    > 135 |     console.error('Failed to save development environment:', error)
          |             ^
      136 |   }
      137 | }
      138 |

      at saveDevelopmentEnvironment (src/utils/overrides.ts:135:13)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:242:7)

  console.error
    Failed to save development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:191:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      133 |     }
      134 |   } catch (error) {
    > 135 |     console.error('Failed to save development environment:', error)
          |             ^
      136 |   }
      137 | }
      138 |

      at saveDevelopmentEnvironment (src/utils/overrides.ts:135:13)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:255:9)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1, experiment2: { variant: 2, env: 1, id: 123 } }

      at saveOverrides (src/utils/overrides.ts:91:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1, experiment2: { variant: 2, env: 1, id: 123 } }

      at saveOverrides (src/utils/overrides.ts:101:13)

  console.error
    Failed to save overrides: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:266:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      106 |     await syncOverridesToCookie(cleanedOverrides)
      107 |   } catch (error) {
    > 108 |     console.error('Failed to save overrides:', error)
          |             ^
      109 |   }
      110 | }
      111 |

      at saveOverrides (src/utils/overrides.ts:108:13)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:330:7)

  console.error
    Failed to save development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:266:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      133 |     }
      134 |   } catch (error) {
    > 135 |     console.error('Failed to save development environment:', error)
          |             ^
      136 |   }
      137 | }
      138 |

      at saveDevelopmentEnvironment (src/utils/overrides.ts:135:13)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:345:7)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:91:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:101:13)

  console.error
    Failed to save overrides: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:266:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      106 |     await syncOverridesToCookie(cleanedOverrides)
      107 |   } catch (error) {
    > 108 |     console.error('Failed to save overrides:', error)
          |             ^
      109 |   }
      110 | }
      111 |

      at saveOverrides (src/utils/overrides.ts:108:13)
          at async Promise.all (index 0)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:368:7)

  console.error
    Failed to save development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/__tests__/overrides-storage.test.ts:266:41)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      133 |     }
      134 |   } catch (error) {
    > 135 |     console.error('Failed to save development environment:', error)
          |             ^
      136 |   }
      137 | }
      138 |

      at saveDevelopmentEnvironment (src/utils/overrides.ts:135:13)
          at async Promise.all (index 1)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:368:7)

  console.log
    [handleMenuAction] START - action: editHtml

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className:

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:362:13)

  console.log
    [handleEditAction] Element details: DIV test-element

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:363:13)

  console.log
    [handleMenuAction] START - action: edit

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: SPAN id: selected-element className:

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] Handling edit action for: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:297:17)

  console.log
    [handleEditAction] START for element: HTMLSpanElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:362:13)

  console.log
    [handleEditAction] Element details: SPAN selected-element

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:363:13)

  console.log
    [EditorCoordinator] Changes/Undo/Redo updated - total changes: 1

      at src/visual-editor/core/editor-coordinator.ts:143:17

  console.log
    [EditorCoordinator] Session changes (undo count): 1

      at src/visual-editor/core/editor-coordinator.ts:144:17

  console.log
    [EditorCoordinator] Redo count: 0

      at src/visual-editor/core/editor-coordinator.ts:145:17

  console.log
    [EditorCoordinator] Changes/Undo/Redo updated - total changes: 1

      at src/visual-editor/core/editor-coordinator.ts:143:17

  console.log
    [EditorCoordinator] Session changes (undo count): 1

      at src/visual-editor/core/editor-coordinator.ts:144:17

  console.log
    [EditorCoordinator] Redo count: 0

      at src/visual-editor/core/editor-coordinator.ts:145:17

  console.log
    [handleMenuAction] START - action: edit

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] Handling edit action for: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:297:17)

  console.log
    [handleMenuAction] START - action: edit-element

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] Handling edit action for: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:297:17)

  console.log
    [handleMenuAction] START - action: editHtml

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: edit-html

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: rearrange

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: resize

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: select-relative

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] Handling select-relative for element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:347:17)

  console.log
    [handleMenuAction] START - action: selectRelative

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] Handling select-relative for element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:347:17)

  console.log
    [handleMenuAction] START - action: hide

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: delete

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: copy

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: copy-selector

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: copySelector

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: move-up

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: move-down

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] START - action: insert-block

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [EditorCoordinator] insert-block action triggered

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:340:17)

  console.log
    [EditorCoordinator] insertNewBlock callback called

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:342:17)

  console.log
    [handleMenuAction] START - action: edit

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:280:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:281:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:282:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:283:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:284:13)

  console.log
    [handleMenuAction] Handling edit action for: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:297:17)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:362:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:363:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:362:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:363:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:362:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:363:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:362:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:363:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:362:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:363:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:362:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:363:13)

  console.log
    [handleSelectRelativeElement] Called with element: HTMLDivElement {}

      at EditorCoordinator.handleSelectRelativeElement (src/visual-editor/core/editor-coordinator.ts:498:13)

  console.log
    [handleSelectRelativeElement] Element details: DIV test-element test-class

      at EditorCoordinator.handleSelectRelativeElement (src/visual-editor/core/editor-coordinator.ts:499:13)

  console.error
    [SettingsView] Error checking permissions: TypeError: Cannot read properties of undefined (reading 'contains')
        at checkPermissions (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:141:51)
        at checkCookiePermission (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:201:43)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:53:5
        at commitHookEffectListMount (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:23150:26)
        at commitPassiveMountOnFiber (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24931:11)
        at commitPassiveMountEffects_complete (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24891:9)
        at commitPassiveMountEffects_begin (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24878:7)
        at commitPassiveMountEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24866:3)
        at flushPassiveEffectsImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:27039:3)
        at flushPassiveEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26984:14)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26769:9
        at flushActQueue (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2667:24)
        at act (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2582:11)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/act-compat.js:47:25
        at renderRoot (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:190:26)
        at render (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:292:10)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/__tests__/SettingsView-config.test.tsx:33:13)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      151 |       return { hasCookies, hasHost }
      152 |     } catch (error) {
    > 153 |       console.error('[SettingsView] Error checking permissions:', error)
          |               ^
      154 |       return { hasCookies: false, hasHost: false }
      155 |     }
      156 |   }

      at checkPermissions (src/components/SettingsView.tsx:153:15)
      at checkCookiePermission (src/components/SettingsView.tsx:201:43)
      at src/components/SettingsView.tsx:53:5
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom.development.js:23150:26)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom.development.js:24931:11)
      at commitPassiveMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24891:9)
      at commitPassiveMountEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24878:7)
      at commitPassiveMountEffects (node_modules/react-dom/cjs/react-dom.development.js:24866:3)
      at flushPassiveEffectsImpl (node_modules/react-dom/cjs/react-dom.development.js:27039:3)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom.development.js:26984:14)
      at node_modules/react-dom/cjs/react-dom.development.js:26769:9
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/components/__tests__/SettingsView-config.test.tsx:33:13)

  console.log
    [handleSelectRelativeElement] Called with element: HTMLDivElement {}

      at EditorCoordinator.handleSelectRelativeElement (src/visual-editor/core/editor-coordinator.ts:498:13)

  console.log
    [handleSelectRelativeElement] Element details: DIV test-element test-class

      at EditorCoordinator.handleSelectRelativeElement (src/visual-editor/core/editor-coordinator.ts:499:13)

  console.log
    [EditorCoordinator] setupAll called

      at EditorCoordinator.setupAll (src/visual-editor/core/editor-coordinator.ts:1022:13)

  console.log
    [EditorCoordinator] setupAll completed

      at EditorCoordinator.setupAll (src/visual-editor/core/editor-coordinator.ts:1032:13)

  console.log
    [EditorCoordinator] Starting teardownAll { restoreOriginalValues: true }

      at EditorCoordinator.teardownAll (src/visual-editor/core/editor-coordinator.ts:1037:13)

  console.log
    [EditorCoordinator] teardownAll completed

      at EditorCoordinator.teardownAll (src/visual-editor/core/editor-coordinator.ts:1050:13)

  console.log
    [EditorCoordinator] setupAll called

      at EditorCoordinator.setupAll (src/visual-editor/core/editor-coordinator.ts:1022:13)

  console.log
    [EditorCoordinator] setupAll completed

      at EditorCoordinator.setupAll (src/visual-editor/core/editor-coordinator.ts:1032:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:362:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:363:13)

  console.log
    [EditorCoordinator] Changes/Undo/Redo updated - total changes: 1

      at src/visual-editor/core/editor-coordinator.ts:143:17

  console.log
    [EditorCoordinator] Session changes (undo count): 1

      at src/visual-editor/core/editor-coordinator.ts:144:17

  console.log
    [EditorCoordinator] Redo count: 0

      at src/visual-editor/core/editor-coordinator.ts:145:17

  console.error
    [SettingsView] Error checking permissions: TypeError: Cannot read properties of undefined (reading 'contains')
        at checkPermissions (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:141:51)
        at checkCookiePermission (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:201:43)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:53:5
        at commitHookEffectListMount (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:23150:26)
        at commitPassiveMountOnFiber (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24931:11)
        at commitPassiveMountEffects_complete (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24891:9)
        at commitPassiveMountEffects_begin (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24878:7)
        at commitPassiveMountEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24866:3)
        at flushPassiveEffectsImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:27039:3)
        at flushPassiveEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26984:14)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26769:9
        at flushActQueue (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2667:24)
        at act (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2582:11)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/act-compat.js:47:25
        at renderRoot (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:190:26)
        at render (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:292:10)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/__tests__/SettingsView-config.test.tsx:48:13)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      151 |       return { hasCookies, hasHost }
      152 |     } catch (error) {
    > 153 |       console.error('[SettingsView] Error checking permissions:', error)
          |               ^
      154 |       return { hasCookies: false, hasHost: false }
      155 |     }
      156 |   }

      at checkPermissions (src/components/SettingsView.tsx:153:15)
      at checkCookiePermission (src/components/SettingsView.tsx:201:43)
      at src/components/SettingsView.tsx:53:5
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom.development.js:23150:26)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom.development.js:24931:11)
      at commitPassiveMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24891:9)
      at commitPassiveMountEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24878:7)
      at commitPassiveMountEffects (node_modules/react-dom/cjs/react-dom.development.js:24866:3)
      at flushPassiveEffectsImpl (node_modules/react-dom/cjs/react-dom.development.js:27039:3)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom.development.js:26984:14)
      at node_modules/react-dom/cjs/react-dom.development.js:26769:9
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/components/__tests__/SettingsView-config.test.tsx:48:13)

  console.error
    [SettingsView] Error checking permissions: TypeError: Cannot read properties of undefined (reading 'contains')
        at checkPermissions (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:141:51)
        at checkCookiePermission (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:201:43)
        at loadConfig (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:120:37)

      151 |       return { hasCookies, hasHost }
      152 |     } catch (error) {
    > 153 |       console.error('[SettingsView] Error checking permissions:', error)
          |               ^
      154 |       return { hasCookies: false, hasHost: false }
      155 |     }
      156 |   }

      at checkPermissions (src/components/SettingsView.tsx:153:15)
      at checkCookiePermission (src/components/SettingsView.tsx:201:43)
      at loadConfig (src/components/SettingsView.tsx:120:37)

  console.log
    [SettingsView] Permissions not granted, skipping auto auth check

      at loadConfig (src/components/SettingsView.tsx:128:19)

  console.error
    [SettingsView] Error checking permissions: TypeError: Cannot read properties of undefined (reading 'contains')
        at checkPermissions (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:141:51)
        at checkCookiePermission (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:201:43)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:53:5
        at commitHookEffectListMount (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:23150:26)
        at commitPassiveMountOnFiber (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24931:11)
        at commitPassiveMountEffects_complete (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24891:9)
        at commitPassiveMountEffects_begin (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24878:7)
        at commitPassiveMountEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24866:3)
        at flushPassiveEffectsImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:27039:3)
        at flushPassiveEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26984:14)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26769:9
        at flushActQueue (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2667:24)
        at act (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2582:11)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/act-compat.js:47:25
        at renderRoot (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:190:26)
        at render (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:292:10)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/__tests__/SettingsView-config.test.tsx:64:13)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      151 |       return { hasCookies, hasHost }
      152 |     } catch (error) {
    > 153 |       console.error('[SettingsView] Error checking permissions:', error)
          |               ^
      154 |       return { hasCookies: false, hasHost: false }
      155 |     }
      156 |   }

      at checkPermissions (src/components/SettingsView.tsx:153:15)
      at checkCookiePermission (src/components/SettingsView.tsx:201:43)
      at src/components/SettingsView.tsx:53:5
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom.development.js:23150:26)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom.development.js:24931:11)
      at commitPassiveMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24891:9)
      at commitPassiveMountEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24878:7)
      at commitPassiveMountEffects (node_modules/react-dom/cjs/react-dom.development.js:24866:3)
      at flushPassiveEffectsImpl (node_modules/react-dom/cjs/react-dom.development.js:27039:3)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom.development.js:26984:14)
      at node_modules/react-dom/cjs/react-dom.development.js:26769:9
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/components/__tests__/SettingsView-config.test.tsx:64:13)

  console.error
    [SettingsView] Error checking permissions: TypeError: Cannot read properties of undefined (reading 'contains')
        at checkPermissions (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:141:51)
        at checkCookiePermission (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:201:43)
        at loadConfig (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:120:37)

      151 |       return { hasCookies, hasHost }
      152 |     } catch (error) {
    > 153 |       console.error('[SettingsView] Error checking permissions:', error)
          |               ^
      154 |       return { hasCookies: false, hasHost: false }
      155 |     }
      156 |   }

      at checkPermissions (src/components/SettingsView.tsx:153:15)
      at checkCookiePermission (src/components/SettingsView.tsx:201:43)
      at loadConfig (src/components/SettingsView.tsx:120:37)

  console.log
    [SettingsView] Permissions not granted, skipping auto auth check

      at loadConfig (src/components/SettingsView.tsx:128:19)

  console.error
    [SettingsView] Error checking permissions: TypeError: Cannot read properties of undefined (reading 'contains')
        at checkPermissions (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:141:51)
        at checkCookiePermission (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:201:43)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:53:5
        at commitHookEffectListMount (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:23150:26)
        at commitPassiveMountOnFiber (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24931:11)
        at commitPassiveMountEffects_complete (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24891:9)
        at commitPassiveMountEffects_begin (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24878:7)
        at commitPassiveMountEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24866:3)
        at flushPassiveEffectsImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:27039:3)
        at flushPassiveEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26984:14)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26769:9
        at flushActQueue (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2667:24)
        at act (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2582:11)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/act-compat.js:47:25
        at renderRoot (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:190:26)
        at render (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:292:10)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/__tests__/SettingsView-config.test.tsx:80:13)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      151 |       return { hasCookies, hasHost }
      152 |     } catch (error) {
    > 153 |       console.error('[SettingsView] Error checking permissions:', error)
          |               ^
      154 |       return { hasCookies: false, hasHost: false }
      155 |     }
      156 |   }

      at checkPermissions (src/components/SettingsView.tsx:153:15)
      at checkCookiePermission (src/components/SettingsView.tsx:201:43)
      at src/components/SettingsView.tsx:53:5
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom.development.js:23150:26)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom.development.js:24931:11)
      at commitPassiveMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24891:9)
      at commitPassiveMountEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24878:7)
      at commitPassiveMountEffects (node_modules/react-dom/cjs/react-dom.development.js:24866:3)
      at flushPassiveEffectsImpl (node_modules/react-dom/cjs/react-dom.development.js:27039:3)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom.development.js:26984:14)
      at node_modules/react-dom/cjs/react-dom.development.js:26769:9
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/components/__tests__/SettingsView-config.test.tsx:80:13)

  console.error
    [SettingsView] Error checking permissions: TypeError: Cannot read properties of undefined (reading 'contains')
        at checkPermissions (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:141:51)
        at checkCookiePermission (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:201:43)
        at loadConfig (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:120:37)

      151 |       return { hasCookies, hasHost }
      152 |     } catch (error) {
    > 153 |       console.error('[SettingsView] Error checking permissions:', error)
          |               ^
      154 |       return { hasCookies: false, hasHost: false }
      155 |     }
      156 |   }

      at checkPermissions (src/components/SettingsView.tsx:153:15)
      at checkCookiePermission (src/components/SettingsView.tsx:201:43)
      at loadConfig (src/components/SettingsView.tsx:120:37)

  console.log
    [SettingsView] Permissions not granted, skipping auto auth check

      at loadConfig (src/components/SettingsView.tsx:128:19)

  console.error
    [SettingsView] Error checking permissions: TypeError: Cannot read properties of undefined (reading 'contains')
        at checkPermissions (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:141:51)
        at checkCookiePermission (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:201:43)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:53:5
        at commitHookEffectListMount (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:23150:26)
        at commitPassiveMountOnFiber (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24931:11)
        at commitPassiveMountEffects_complete (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24891:9)
        at commitPassiveMountEffects_begin (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24878:7)
        at commitPassiveMountEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24866:3)
        at flushPassiveEffectsImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:27039:3)
        at flushPassiveEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26984:14)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26769:9
        at flushActQueue (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2667:24)
        at act (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2582:11)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/act-compat.js:47:25
        at renderRoot (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:190:26)
        at render (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:292:10)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/__tests__/SettingsView-config.test.tsx:94:34)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      151 |       return { hasCookies, hasHost }
      152 |     } catch (error) {
    > 153 |       console.error('[SettingsView] Error checking permissions:', error)
          |               ^
      154 |       return { hasCookies: false, hasHost: false }
      155 |     }
      156 |   }

      at checkPermissions (src/components/SettingsView.tsx:153:15)
      at checkCookiePermission (src/components/SettingsView.tsx:201:43)
      at src/components/SettingsView.tsx:53:5
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom.development.js:23150:26)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom.development.js:24931:11)
      at commitPassiveMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24891:9)
      at commitPassiveMountEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24878:7)
      at commitPassiveMountEffects (node_modules/react-dom/cjs/react-dom.development.js:24866:3)
      at flushPassiveEffectsImpl (node_modules/react-dom/cjs/react-dom.development.js:27039:3)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom.development.js:26984:14)
      at node_modules/react-dom/cjs/react-dom.development.js:26769:9
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/components/__tests__/SettingsView-config.test.tsx:94:34)

  console.error
    [SettingsView] Error checking permissions: TypeError: Cannot read properties of undefined (reading 'contains')
        at checkPermissions (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:141:51)
        at checkCookiePermission (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:201:43)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:53:5
        at commitHookEffectListMount (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:23150:26)
        at commitPassiveMountOnFiber (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24931:11)
        at commitPassiveMountEffects_complete (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24891:9)
        at commitPassiveMountEffects_begin (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24878:7)
        at commitPassiveMountEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:24866:3)
        at flushPassiveEffectsImpl (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:27039:3)
        at flushPassiveEffects (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26984:14)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react-dom/cjs/react-dom.development.js:26769:9
        at flushActQueue (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2667:24)
        at act (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/react/cjs/react.development.js:2582:11)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/act-compat.js:47:25
        at renderRoot (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:190:26)
        at render (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/@testing-library/react/dist/pure.js:292:10)
        at Object.<anonymous> (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/__tests__/SettingsView-config.test.tsx:134:13)
        at Promise.finally.completed (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/node_modules/jest-runner/build/testWorker.js:497:12)

      151 |       return { hasCookies, hasHost }
      152 |     } catch (error) {
    > 153 |       console.error('[SettingsView] Error checking permissions:', error)
          |               ^
      154 |       return { hasCookies: false, hasHost: false }
      155 |     }
      156 |   }

      at checkPermissions (src/components/SettingsView.tsx:153:15)
      at checkCookiePermission (src/components/SettingsView.tsx:201:43)
      at src/components/SettingsView.tsx:53:5
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom.development.js:23150:26)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom.development.js:24931:11)
      at commitPassiveMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24891:9)
      at commitPassiveMountEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24878:7)
      at commitPassiveMountEffects (node_modules/react-dom/cjs/react-dom.development.js:24866:3)
      at flushPassiveEffectsImpl (node_modules/react-dom/cjs/react-dom.development.js:27039:3)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom.development.js:26984:14)
      at node_modules/react-dom/cjs/react-dom.development.js:26769:9
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/components/__tests__/SettingsView-config.test.tsx:134:13)

  console.error
    [SettingsView] Error checking permissions: TypeError: Cannot read properties of undefined (reading 'contains')
        at checkPermissions (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:141:51)
        at checkCookiePermission (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:201:43)
        at loadConfig (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/src/components/SettingsView.tsx:120:37)

      151 |       return { hasCookies, hasHost }
      152 |     } catch (error) {
    > 153 |       console.error('[SettingsView] Error checking permissions:', error)
          |               ^
      154 |       return { hasCookies: false, hasHost: false }
      155 |     }
      156 |   }

      at checkPermissions (src/components/SettingsView.tsx:153:15)
      at checkCookiePermission (src/components/SettingsView.tsx:201:43)
      at loadConfig (src/components/SettingsView.tsx:120:37)

  console.log
    [SettingsView] Permissions not granted, skipping auto auth check

      at loadConfig (src/components/SettingsView.tsx:128:19)

  console.log
    [Messaging] Setting up content script test mode listener

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Setting up content script test mode listener

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Content script received message from sidebar: ABSMARTLY_PREVIEW

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Setting up content script test mode listener

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Content script received message from sidebar: ABSMARTLY_PREVIEW

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Setting up content script test mode listener

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Setting up content script test mode listener

      at debugLog (src/utils/debug.ts:29:13)

  console.log
    [Messaging] Sending CUSTOM_MESSAGE from sidebar to background {
      type: 'CUSTOM_MESSAGE',
      from: 'sidebar',
      to: 'background',
      expectsResponse: true,
      requestId: 'custom-id',
      payload: { nested: { data: [Array] } },
      customField: 'custom value'
    }

      at debugLog (src/utils/debug.ts:29:13)

PASS src/lib/__tests__/messaging.test.ts (15.164 s)
  Messaging System
    sendMessage - Production Mode
      ✓ should send message to background via chrome.runtime.sendMessage (26 ms)
      ✓ should send message to content via chrome.tabs.sendMessage (2 ms)
      ✓ should generate unique requestId for each message (3 ms)
      ✓ should throw error when no active tab found for content messages (8 ms)
    sendMessage - Test Mode (iframe)
      ✓ should send message via window.parent.postMessage in test mode (8 ms)
      ✓ should handle response for messages expecting response in test mode (3 ms)
      ✓ should timeout if no response received in test mode (10006 ms)
    setupContentScriptMessageListener
      ✓ should set up window message listener for sidebar iframe (5 ms)
      ✓ should forward postMessage to chrome.runtime.onMessage listeners (3 ms)
      ✓ should send response back to sidebar iframe via postMessage (1 ms)
      ✓ should ignore messages not from sidebar iframe (1 ms)
      ✓ should not set up listener if sidebar iframe not found (1 ms)
    Message Routing
      ✓ should preserve all message fields when routing (2 ms)

Summary of all failing tests
FAIL src/__tests__/manifest-permissions.test.ts
  ● Manifest Permissions › Security Best Practices › should use HTTPS for all host permissions

    expect(received).toMatch(expected)

    Expected pattern: /^https:\/\//
    Received string:  "http://localhost/*"

      132 |       // All host permissions should use HTTPS for security
      133 |       manifest.host_permissions.forEach((permission: string) => {
    > 134 |         expect(permission).toMatch(/^https:\/\//)
          |                            ^
      135 |       })
      136 |     })
      137 |

      at src/__tests__/manifest-permissions.test.ts:134:28
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/__tests__/manifest-permissions.test.ts:133:33)


Test Suites: 1 failed, 52 passed, 53 total
Tests:       1 failed, 1 skipped, 1427 passed, 1429 total
Snapshots:   0 total
Time:        16.086 s
Ran all test suites.

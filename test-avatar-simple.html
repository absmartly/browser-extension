<!DOCTYPE html>
<html>
<head>
    <title>Avatar Display Test</title>
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        .status { margin: 10px 0; padding: 10px; background: #f0f0f0; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Avatar Display Test</h1>
    
    <div id="status" class="status">Loading extension...</div>
    
    <script>
        const statusDiv = document.getElementById('status');
        
        // Check if extension is loaded
        if (typeof chrome !== 'undefined' && chrome.runtime && chrome.runtime.id) {
            statusDiv.textContent = 'Extension loaded. Extension ID: ' + chrome.runtime.id;
            statusDiv.className = 'status success';
            
            // Instructions
            const instructions = document.createElement('div');
            instructions.innerHTML = `
                <h2>Instructions:</h2>
                <ol>
                    <li>Open the extension popup by clicking the extension icon</li>
                    <li>Go to Settings</li>
                    <li>Check if the user avatar is displayed</li>
                    <li>Open Developer Tools (F12) and check the Console tab for any errors</li>
                    <li>Look for these console messages:
                        <ul>
                            <li>"Constructed picture URL from picture.base_url: ..."</li>
                            <li>"Avatar fetched successfully" (if successful)</li>
                            <li>"Failed to fetch avatar: ..." (if failed)</li>
                        </ul>
                    </li>
                </ol>
                
                <h3>Expected Avatar URL Format:</h3>
                <code>https://dev-1.absmartly.com/files/avatars/f7bd44c4acd4/crop/original.png</code>
            `;
            document.body.appendChild(instructions);
        } else {
            statusDiv.textContent = 'Extension not loaded. Please install and reload this page.';
            statusDiv.className = 'status error';
        }
    </script>
</body>
</html>
🚀 Starting global test setup...
✅ Extension already built
⚠️  Note: Using existing build. Delete build/chrome-mv3-dev/manifest.json to force rebuild.
✅ Copied seed.html to build directory
✅ Copied seed.js to build directory
✅ Copied local-test-page.html to build directory
✅ Loaded environment variables from .env.dev.local
✅ API credentials found in environment
✅ Global setup completed successfully
---

Running 1 test using 1 worker

✅ Test page loaded (test mode enabled)
  📋 Console messages so far: 3
Extension ID: hmdfdmlfegajkklhbiijdpkdbaccnplj

📂 STEP 1: Injecting sidebar
  ✘  1 [chromium] › tests/e2e/visual-editor-complete.spec.ts:82:7 › Visual Editor Complete Workflow › Complete workflow: sidebar → experiment → visual editor → actions → save → verify (12.5s)


  1) [chromium] › tests/e2e/visual-editor-complete.spec.ts:82:7 › Visual Editor Complete Workflow › Complete workflow: sidebar → experiment → visual editor → actions → save → verify › Inject sidebar 

    TimeoutError: locator.waitFor: Timeout 10000ms exceeded.
    Call log:
    [2m  - waiting for locator('#absmartly-sidebar-iframe').contentFrame().locator('body') to be visible[22m
    [2m    25 × locator resolved to hidden <body class="neterror">…</body>[22m


       at e2e/utils/test-helpers.ts:43

      41 |
      42 |   const sidebar = page.frameLocator('#absmartly-sidebar-iframe')
    > 43 |   await sidebar.locator('body').waitFor({ timeout: 10000 })
         |                                 ^
      44 |
      45 |   return sidebar
      46 | }
        at injectSidebar (/Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/tests/e2e/utils/test-helpers.ts:43:33)
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/tests/e2e/visual-editor-complete.spec.ts:89:17
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/tests/e2e/visual-editor-complete.spec.ts:87:5

  1 failed
    [chromium] › tests/e2e/visual-editor-complete.spec.ts:82:7 › Visual Editor Complete Workflow › Complete workflow: sidebar → experiment → visual editor → actions → save → verify 

To open last HTML report run:
[36m[39m
[36m  npx playwright show-report[39m
[36m[39m

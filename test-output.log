
> absmartly-browser-extension@0.0.1 test:e2e
> playwright test tests/e2e/variable-sync.spec.ts --reporter=list

🚀 Starting global test setup...
✅ Extension already built
⚠️  Note: Using existing build. Delete build/chrome-mv3-dev/manifest.json to force rebuild.
✅ Copied seed.html to build directory
✅ Copied local-test-page.html to build directory
✅ Loaded environment variables from .env.local
✅ API credentials found in environment
✅ Global setup completed successfully
---

Running 1 test using 1 worker

✅ Test page loaded (test mode enabled)
Extension ID: elelnihlihbhpkobodjiodoefdjpdcjp

📂 STEP 1: Injecting sidebar
✅ Sidebar visible

📋 STEP 2: Creating new experiment
  Clicked Create New Experiment button
  Selected "From Scratch"
  Filled experiment name: Variable Sync Test 1760089853303
  Selecting Unit Type...
  Selected unit type
  Selecting Application...
  Selected application
✅ Experiment form filled

💉 STEP 3: Adding injection code
  Expanded Code Injection section
  ✘  1 [chromium] › tests/e2e/variable-sync.spec.ts:37:7 › Variable Sync - __inject_html and DOM Changes Preservation › Should preserve __inject_html and DOM changes when adding custom variables (9.0s)


  1) [chromium] › tests/e2e/variable-sync.spec.ts:37:7 › Variable Sync - __inject_html and DOM Changes Preservation › Should preserve __inject_html and DOM changes when adding custom variables › Add __inject_html code 

    TimeoutError: locator.waitFor: Timeout 5000ms exceeded.
    Call log:
    [2m  - waiting for locator('#absmartly-sidebar-iframe').contentFrame().locator('textarea').filter({ hasText: /<script>/ }).or(locator('textarea[placeholder*="<script>"]')).first() to be visible[22m


      130 |       ).first()
      131 |
    > 132 |       await headStartTextarea.waitFor({ state: 'visible', timeout: 5000 })
          |                               ^
      133 |       await headStartTextarea.fill('<script>console.log("Test injection code!")</script>')
      134 |       console.log('  Added injection code to Head Start')
      135 |
        at /Users/joalves/git_tree/absmartly-browser-extension/tests/e2e/variable-sync.spec.ts:132:31
        at /Users/joalves/git_tree/absmartly-browser-extension/tests/e2e/variable-sync.spec.ts:111:5

  1 failed
    [chromium] › tests/e2e/variable-sync.spec.ts:37:7 › Variable Sync - __inject_html and DOM Changes Preservation › Should preserve __inject_html and DOM changes when adding custom variables 

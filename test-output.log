
> absmartly-browser-extension@0.0.1 test
> npm run test:unit && npm run test:e2e


> absmartly-browser-extension@0.0.1 test:unit
> jest

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:88:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:88:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:88:15)

PASS src/visual-editor/core/__tests__/undo-redo-manager.test.ts
  UndoRedoManager
    Basic functionality
      ✓ should start with empty stacks (3 ms)
      ✓ should add changes to undo stack (1 ms)
      ✓ should clear redo stack when new change is added
    Individual change tracking (no auto-squashing)
      ✓ should track multiple changes to same element individually (1 ms)
      ✓ should track changes to different selectors individually
      ✓ should track changes to different types individually
    Undo functionality
      ✓ should undo a single change
      ✓ should undo multiple changes in correct order (1 ms)
      ✓ should return null when undo stack is empty
    Redo functionality
      ✓ should redo a single change
      ✓ should redo multiple changes in correct order
      ✓ should return null when redo stack is empty
    squashChanges() method
      ✓ should squash multiple changes to same element (1 ms)
      ✓ should not squash changes to different selectors
      ✓ should not squash changes to different types
      ✓ should squash mixed changes correctly
      ✓ should return empty array when no changes
      ✓ should squash style changes correctly
    Reference isolation
      ✓ should deep copy changes to prevent mutation
      ✓ should deep copy old values to prevent mutation
      ✓ should isolate undo and redo stacks
    Stack size limit
      ✓ should respect max stack size
      ✓ should not exceed max size without squashing
    Clear functionality
      ✓ should clear all stacks
    Complex scenarios
      ✓ should handle alternating undo/redo operations with individual changes (1 ms)
  E2E scenario simulation
    ✓ should handle the exact E2E test flow: 3 text changes, 3 undos, 3 redos
  Change counting accuracy
    ✓ should correctly count undo changes with pointer approach (47 ms)
    ✓ should count changes correctly after adding new change mid-history (1 ms)
    ✓ should maintain accurate counts with mixed operations (1 ms)
    ✓ should count squashed changes correctly regardless of undo/redo state (2 ms)
    ✓ should handle edge case: canUndo/canRedo at boundaries

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1, experiment2: { variant: 2, env: 1 } }

      at saveOverrides (src/utils/overrides.ts:215:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1, experiment2: { variant: 2, env: 1 } }

      at saveOverrides (src/utils/overrides.ts:225:13)

  console.warn
    Failed to get development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:70:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      269 |     return envName || null
      270 |   } catch (error) {
    > 271 |     console.warn('Failed to get development environment:', error)
          |             ^
      272 |     return null
      273 |   }
      274 | }

      at getDevelopmentEnvironment (src/utils/overrides.ts:271:13)
      at syncOverridesToCookie (src/utils/overrides.ts:283:20)
      at saveOverrides (src/utils/overrides.ts:230:5)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:94:13)

  console.log
    [ABsmartly] Syncing to cookie - overrides: { experiment1: 1, experiment2: { variant: 2, env: 1 } } devEnv: null

      at syncOverridesToCookie (src/utils/overrides.ts:284:13)

  console.log
    [ABsmartly] saveOverrides called with: {
      enabled: 1,
      disabled: -1,
      objectDisabled: { variant: -1, env: 1 },
      objectEnabled: { variant: 2, env: 1 }
    }

      at saveOverrides (src/utils/overrides.ts:215:13)

  console.log
    [ABsmartly] Cleaned overrides: { enabled: 1, objectEnabled: { variant: 2, env: 1 } }

      at saveOverrides (src/utils/overrides.ts:225:13)

  console.warn
    Failed to get development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:70:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      269 |     return envName || null
      270 |   } catch (error) {
    > 271 |     console.warn('Failed to get development environment:', error)
          |             ^
      272 |     return null
      273 |   }
      274 | }

      at getDevelopmentEnvironment (src/utils/overrides.ts:271:13)
      at syncOverridesToCookie (src/utils/overrides.ts:283:20)
      at saveOverrides (src/utils/overrides.ts:230:5)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:119:13)

  console.log
    [ABsmartly] Syncing to cookie - overrides: { enabled: 1, objectEnabled: { variant: 2, env: 1 } } devEnv: null

      at syncOverridesToCookie (src/utils/overrides.ts:284:13)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:215:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:225:13)

  console.warn
    Failed to get development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:70:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      269 |     return envName || null
      270 |   } catch (error) {
    > 271 |     console.warn('Failed to get development environment:', error)
          |             ^
      272 |     return null
      273 |   }
      274 | }

      at getDevelopmentEnvironment (src/utils/overrides.ts:271:13)
      at syncOverridesToCookie (src/utils/overrides.ts:283:20)
      at saveOverrides (src/utils/overrides.ts:230:5)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:130:17)

  console.log
    [ABsmartly] Syncing to cookie - overrides: { experiment1: 1 } devEnv: null

      at syncOverridesToCookie (src/utils/overrides.ts:284:13)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:215:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:225:13)

  console.warn
    Failed to get development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:70:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      269 |     return envName || null
      270 |   } catch (error) {
    > 271 |     console.warn('Failed to get development environment:', error)
          |             ^
      272 |     return null
      273 |   }
      274 | }

      at getDevelopmentEnvironment (src/utils/overrides.ts:271:13)
      at syncOverridesToCookie (src/utils/overrides.ts:283:20)
      at saveOverrides (src/utils/overrides.ts:230:5)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:143:13)

  console.log
    [ABsmartly] Syncing to cookie - overrides: { experiment1: 1 } devEnv: null

      at syncOverridesToCookie (src/utils/overrides.ts:284:13)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:215:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:225:13)

  console.error
    Failed to save development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:149:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      257 |     }
      258 |   } catch (error) {
    > 259 |     console.error('Failed to save development environment:', error)
          |             ^
      260 |   }
      261 | }
      262 |

      at saveDevelopmentEnvironment (src/utils/overrides.ts:259:13)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:171:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.error
    Failed to save development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:149:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      257 |     }
      258 |   } catch (error) {
    > 259 |     console.error('Failed to save development environment:', error)
          |             ^
      260 |   }
      261 | }
      262 |

      at saveDevelopmentEnvironment (src/utils/overrides.ts:259:13)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:188:13)

  console.error
    Failed to save development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:149:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      257 |     }
      258 |   } catch (error) {
    > 259 |     console.error('Failed to save development environment:', error)
          |             ^
      260 |   }
      261 | }
      262 |

      at saveDevelopmentEnvironment (src/utils/overrides.ts:259:13)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:197:17)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1, experiment2: { variant: 2, env: 1, id: 123 } }

      at saveOverrides (src/utils/overrides.ts:215:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1, experiment2: { variant: 2, env: 1, id: 123 } }

      at saveOverrides (src/utils/overrides.ts:225:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.error
    Failed to save overrides: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:207:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      230 |     await syncOverridesToCookie(cleanedOverrides)
      231 |   } catch (error) {
    > 232 |     console.error('Failed to save overrides:', error)
          |             ^
      233 |   }
      234 | }
      235 |

      at saveOverrides (src/utils/overrides.ts:232:13)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:252:13)

  console.error
    Failed to save development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:207:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      257 |     }
      258 |   } catch (error) {
    > 259 |     console.error('Failed to save development environment:', error)
          |             ^
      260 |   }
      261 | }
      262 |

      at saveDevelopmentEnvironment (src/utils/overrides.ts:259:13)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:262:13)

  console.log
    [ABsmartly] saveOverrides called with: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:215:13)

  console.log
    [ABsmartly] Cleaned overrides: { experiment1: 1 }

      at saveOverrides (src/utils/overrides.ts:225:13)

  console.error
    Failed to save overrides: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:207:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      230 |     await syncOverridesToCookie(cleanedOverrides)
      231 |   } catch (error) {
    > 232 |     console.error('Failed to save overrides:', error)
          |             ^
      233 |   }
      234 | }
      235 |

      at saveOverrides (src/utils/overrides.ts:232:13)
          at async Promise.all (index 0)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:279:13)

  console.error
    Failed to save development environment: Error: Storage error
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/__tests__/overrides-storage.test.ts:207:47)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      257 |     }
      258 |   } catch (error) {
    > 259 |     console.error('Failed to save development environment:', error)
          |             ^
      260 |   }
      261 | }
      262 |

      at saveDevelopmentEnvironment (src/utils/overrides.ts:259:13)
          at async Promise.all (index 1)
      at Object.<anonymous> (src/__tests__/overrides-storage.test.ts:279:13)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

PASS src/__tests__/overrides-storage.test.ts
  Storage Functions
    loadOverridesFromStorage
      ✓ should load overrides from storage successfully (3 ms)
      ✓ should return empty object when no overrides in storage
      ✓ should handle storage errors gracefully (1 ms)
    saveOverrides
      ✓ should save valid overrides to storage and sync to cookie (76 ms)
      ✓ should filter out disabled experiments (variant -1) (6 ms)
      ✓ should handle chrome API not available (6 ms)
      ✓ should handle tab query errors gracefully (2 ms)
      ✓ should handle storage errors gracefully (1 ms)
    saveDevelopmentEnvironment
      ✓ should save development environment to storage and cookie
      ✓ should handle special characters in environment name (1 ms)
      ✓ should handle chrome API not available
      ✓ should handle errors gracefully (1 ms)
    getDevelopmentEnvironment
      ✓ should load development environment from storage
      ✓ should return null when no environment in storage
      ✓ should return null for empty string
      ✓ should handle storage errors gracefully
    integration scenarios
      ✓ should save and load overrides correctly (1 ms)
      ✓ should save and load development environment correctly (1 ms)
      ✓ should handle concurrent operations (1 ms)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:88:15)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #unique-header h1

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

  console.log
    [ABSmartly] Using unique ID (fastest): unique-span

      at getSelector (src/utils/selector-generator-visual.ts:104:25)

PASS src/visual-editor/core/__tests__/state-manager.test.ts
  StateManager
    Constructor and Initial State
      ✓ should initialize with correct default state (10 ms)
      ✓ should initialize with initial changes from config
      ✓ should store config correctly (1 ms)
    State Getters
      ✓ should return immutable state copy
      ✓ should return immutable config copy (1 ms)
    State Updates
      ✓ should update state with partial updates
      ✓ should replace entire state with setState (2 ms)
      ✓ should maintain immutability during updates
    State Change Listeners
      ✓ should notify listeners on state changes (5 ms)
      ✓ should return unsubscribe function (1 ms)
      ✓ should handle multiple unsubscribes safely
      ✓ should not notify on setState calls (1 ms)
    Element Selection and Hover
      ✓ should set selected element (1 ms)
      ✓ should clear selected element
      ✓ should set hovered element (1 ms)
      ✓ should clear hovered element (1 ms)
      ✓ should handle same element for selected and hovered
    Changes Management
      ✓ should add change to empty changes array (1 ms)
      ✓ should add multiple changes
      ✓ should maintain immutability when adding changes (1 ms)
      ✓ should set changes array (1 ms)
      ✓ should replace existing changes when setting
    Undo/Redo Stack Management
      Undo Stack
        ✓ should push action to undo stack
        ✓ should push multiple actions to undo stack
        ✓ should clear redo stack when pushing to undo stack (5 ms)
        ✓ should pop action from undo stack (1 ms)
        ✓ should return null when popping from empty undo stack
        ✓ should maintain immutability of undo stack (1 ms)
      Redo Stack
        ✓ should push action to redo stack
        ✓ should push multiple actions to redo stack (1 ms)
        ✓ should pop action from redo stack (3 ms)
        ✓ should return null when popping from empty redo stack
        ✓ should maintain immutability of redo stack (1 ms)
    Original Values Management
      ✓ should set original value (1 ms)
      ✓ should get original value (3 ms)
      ✓ should return undefined for non-existent key
      ✓ should overwrite existing original value (1 ms)
      ✓ should handle different data types as values
    Mode State Management
      ✓ should allow both rearranging and resizing to be true simultaneously (1 ms)
      Rearranging Mode
        ✓ should set rearranging mode to true (1 ms)
        ✓ should set rearranging mode to false (1 ms)
        ✓ should notify listeners when rearranging mode changes (1 ms)
      Resizing Mode
        ✓ should set resizing mode to true
        ✓ should set resizing mode to false (1 ms)
        ✓ should notify listeners when resizing mode changes
    Dragged Element Management
      ✓ should set dragged element
      ✓ should clear dragged element
      ✓ should notify listeners when dragged element changes
      ✓ should handle setting same element multiple times
    Deactivation
      ✓ should deactivate the state manager
      ✓ should notify listeners when deactivated
      ✓ should allow multiple deactivation calls (2 ms)
    Complex State Transitions
      ✓ should handle editing workflow: select element, start resizing, make changes
      ✓ should handle drag and drop workflow (1 ms)
      ✓ should handle undo/redo workflow
    Concurrent State Updates
      ✓ should handle rapid sequential updates (3 ms)
      ✓ should maintain state consistency with batch updates (1 ms)
    Edge Cases
      ✓ should handle null and undefined values gracefully
      ✓ should handle empty changes array operations
      ✓ should handle setting original values with special keys
      ✓ should handle large undo/redo stacks (63 ms)
      ✓ should handle many state change listeners (30 ms)
      ✓ should handle state reset to initial values (1 ms)
    Memory and Performance
      ✓ should not leak memory with listeners
      ✓ should handle complex objects in state (shallow immutability) (1 ms)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #test\:id span

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #product-list > div:nth-of-type(1) > div

      at getSelector (src/utils/selector-generator-visual.ts:389:29)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #product-list > div:nth-of-type(2) > div

      at getSelector (src/utils/selector-generator-visual.ts:389:29)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:101:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:101:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:101:15)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #container > div:nth-of-type(1)

      at getSelector (src/utils/selector-generator-visual.ts:389:29)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #container > div:nth-of-type(2)

      at getSelector (src/utils/selector-generator-visual.ts:389:29)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #container > div:nth-of-type(3)

      at getSelector (src/utils/selector-generator-visual.ts:389:29)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #content article > section > p

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #parent span

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

PASS src/__tests__/overrides.test.ts
  overrides.ts
    ENV_TYPE constants
      ✓ should have correct environment type values
    parseCookieFormat
      ✓ should return empty overrides for null/empty input
      ✓ should parse simple running experiment format (1 ms)
      ✓ should parse development experiment format with env
      ✓ should parse full format with env and id
      ✓ should parse dev environment prefix
      ✓ should handle URL encoded dev environment names
      ✓ should handle URL encoded experiment names
      ✓ should handle mixed formats in the same cookie (3 ms)
      ✓ should skip malformed entries
      ✓ should handle empty experiments string with dev env
      ✓ should handle malformed cookie gracefully (1 ms)
      ✓ should handle special characters in experiment names
    serializeToCookieFormat
      ✓ should serialize simple running experiments
      ✓ should serialize development experiments with env
      ✓ should serialize API fetch experiments with full format
      ✓ should handle mixed experiment types
      ✓ should include dev environment prefix when provided (1 ms)
      ✓ should URL encode dev environment names
      ✓ should URL encode experiment names with special characters
      ✓ should handle object experiments with production env as simple format
      ✓ should handle development experiments without id (1 ms)
      ✓ should return empty string for empty overrides without dev env
      ✓ should include dev env prefix even with empty experiments
    round-trip tests (serialize then parse)
      ✓ should preserve simple running experiments
      ✓ should preserve development experiments (1 ms)
      ✓ should preserve API fetch experiments with IDs
      ✓ should preserve mixed experiment types (1 ms)
      ✓ should preserve dev environment names
      ✓ should preserve experiment names with special characters
    getCookieOverridesScript
      ✓ should generate script that parses cookie correctly
      ✓ should generate script that handles empty cookie
    setCookieOverridesScript
      ✓ should generate script to set cookie with overrides
      ✓ should generate script to clear cookie when no overrides
      ✓ should filter out disabled experiments (variant -1) (1 ms)
      ✓ should set expiration date 30 days in future
    edge cases and error handling
      ✓ should handle very long experiment names
      ✓ should handle invalid numeric values gracefully
      ✓ should handle empty experiment names
      ✓ should handle empty values
      ✓ should handle maximum cookie size considerations (1 ms)
      ✓ should handle Unicode characters in experiment names
      ✓ should handle malformed dev environment

  console.log
    [ABSmartly] Using data attribute (slower but stable): [data-testid="submit-button"]

      at getSelector (src/utils/selector-generator-visual.ts:248:25)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Using unique ID (fastest): submit-btn

      at getSelector (src/utils/selector-generator-visual.ts:104:25)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:101:15)

  console.log
    [ABSmartly] Using data attribute (slower but stable): [data-test="email-input"]

      at getSelector (src/utils/selector-generator-visual.ts:248:25)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [ABSmartly] Using data attribute (slower but stable): [data-cy="login-button"]

      at getSelector (src/utils/selector-generator-visual.ts:248:25)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #content span

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:106:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:106:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:106:15)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #parent div > span

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #menu > li:nth-of-type(2)

      at getSelector (src/utils/selector-generator-visual.ts:389:29)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #list > span:nth-of-type(1)

      at getSelector (src/utils/selector-generator-visual.ts:389:29)
          at Array.map (<anonymous>)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #list > span:nth-of-type(2)

      at getSelector (src/utils/selector-generator-visual.ts:389:29)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #list > span:nth-of-type(3)

      at getSelector (src/utils/selector-generator-visual.ts:389:29)
          at Array.map (<anonymous>)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementPASS src/__tests__/inject-sdk-plugin.test.ts
  inject-sdk-plugin.js - parseCookieOverrides
    basic functionality
      ✓ should return empty result for null/empty input
      ✓ should parse simple running experiments
      ✓ should parse development experiments with env flag
      ✓ should parse API fetch experiments with full format (1 ms)
    dev environment handling
      ✓ should parse dev environment prefix
      ✓ should handle URL encoded dev environment names
      ✓ should handle special characters in dev environment
      ✓ should handle empty dev environment
      ✓ should handle dev environment without experiments
    mixed formats
      ✓ should handle mixed experiment formats in same cookie
      ✓ should handle mixed formats with dev environment
    URL encoding and special characters
      ✓ should handle URL encoded experiment names
      ✓ should handle experiment names with special characters
      ✓ should handle Unicode characters in experiment names (1 ms)
    error handling and edge cases
      ✓ should skip malformed experiment entries
      ✓ should handle invalid numeric values
      ✓ should handle empty experiment segments
      ✓ should handle malformed dev environment segment
      ✓ should gracefully handle complete parsing failure
      ✓ should handle very long cookie values (1 ms)
      ✓ should handle zero values correctly
      ✓ should handle negative numbers
      ✓ should handle extra commas in values
    backward compatibility
      ✓ should maintain compatibility with old simple format
      ✓ should maintain compatibility with variant,env format
      ✓ should handle legacy format mixed with new format
    real-world scenarios
      ✓ should handle realistic production cookie
      ✓ should handle realistic development cookie with environment
      ✓ should handle cookie size near browser limits (1 ms)

PASS src/utils/__tests__/selector-generator-visual.test.ts
  isAutoGenerated
    ✓ should detect ABSmartly-added attributes (14 ms)
    ✓ should detect IDs starting with numbers
    ✓ should detect framework-specific patterns (4 ms)
    ✓ should detect hex strings and random patterns (1 ms)
  getSelector - Performance Priority
    Priority 1: Unique IDs (fastest)
      ✓ should return ID selector for element with unique ID (31 ms)
      ✓ should use unique ID directly when element has one (2 ms)
      ✓ should escape special characters in IDs (3 ms)
    Priority 2: Duplicate IDs with simple parent (1.08x slower)
      ✓ should handle duplicate IDs with parent context (18 ms)
      ✓ should disambiguate duplicate IDs at same level (13 ms)
    Priority 3: Tag paths with parent IDs (2-3x slower)
      ✓ should build tag path from parent ID (2 ms)
      ✓ should prefer descendant over child combinator for performance (1 ms)
    Priority 4: Data attributes (30-40x slower)
      ✓ should use data-testid when no stable ID available (10 ms)
      ✓ should prefer unique ID over data-testid for performance (5 ms)
      ✓ should use data-test when data-testid not available (1 ms)
      ✓ should use data-cy for Cypress tests (1 ms)
      ✓ should ignore data-absmartly attributes (3 ms)
    Priority 5: Avoiding nth-child (100x+ slower)
      ✓ should not add nth-child for single children (4 ms)
      ✓ should use nth-of-type when absolutely necessary (2 ms)
      ✓ should handle multiple identical siblings efficiently (16 ms)
  getSelector - Complex Real-World Cases
    E-commerce layouts (Amazon-like)
      ✓ should handle product cards with duplicate IDs (7 ms)
      ✓ should handle deeply nested product listings (8 ms)
    Auto-generated IDs and classes
      ✓ should ignore all types of auto-generated IDs (9 ms)
      ✓ should handle Tailwind and CSS module classes (3 ms)
    Edge cases
      ✓ should handle empty element gracefully (4 ms)
      ✓ should handle body element (1 ms)
      ✓ should handle elements at max depth (4 ms)
      ✓ should handle special HTML5 semantic elements (7 ms)
      ✓ should handle SVG elements (2 ms)
    Performance considerations
      ✓ should prefer descendant selector over child combinator
      ✓ should minimize use of nth-child selectors (6 ms)
      ✓ should create shortest possible unique selector (1 ms)

PASS src/visual-editor/ui/__tests__/notifications.test.ts
  Notifications
    show() method
      ✓ should create and display a notification with title only (61 ms)
      ✓ should create a notification with title and message (9 ms)
      ✓ should display success notification with correct styling (3 ms)
      ✓ should display error notification with correct styling (1 ms)
      ✓ should display info notification with correct styling (1 ms)
      ✓ should default to info type when no type specified (6 ms)
      ✓ should apply correct CSS positioning and styling (12 ms)
      ✓ should append notification to document body (3 ms)
    Auto-dismiss functionality
      ✓ should auto-dismiss notification after 3 seconds (6 ms)
      ✓ should not auto-dismiss if manually removed first (3 ms)
    Multiple notification handling
      ✓ should create new notifications when called multiple times (1 ms)
      ✓ should update currentNotification reference (1 ms)
    remove() method
      ✓ should remove notification with slide-down animation (3 ms)
      ✓ should handle removal when no notification exists (1 ms)
      ✓ should handle multiple remove calls gracefully
    Animation styles management
      ✓ should add animation styles to document head (1 ms)
      ✓ should not duplicate animation styles (2 ms)
      ✓ should include slideUp animation keyframes (1 ms)
      ✓ should include slideDown animation keyframes
    Background color mapping
      ✓ should return correct color for success type (4 ms)
      ✓ should return correct color for error type (2 ms)
      ✓ should return correct color for info type
    Memory management
      ✓ should clear currentNotification reference on removal (1 ms)
      ✓ should clear currentNotification on auto-dismiss (1 ms)
    DOM manipulation safety
      ✓ should handle missing document.body gracefully (15 ms)
      ✓ should handle HTML content safely (1 ms)
    Z-index and positioning
      ✓ should use maximum z-index for overlay (1 ms)
      ✓ should center notification horizontally
      ✓ should position notification at bottom of viewport (1 ms)
    Accessibility considerations
      ✓ should use appropriate semantic markup
      ✓ should be readable with system fonts (1 ms)
      ✓ should have sufficient contrast with white text
    Edge cases
      ✓ should handle empty title (3 ms)
      ✓ should handle empty message with title (2 ms)
      ✓ should handle very long content (2 ms)
      ✓ should handle special characters in content (4 ms)
    Performance considerations
      ✓ should reuse style element across instances (1 ms)
      ✓ should track currentNotification reference correctly with rapid calls (4 ms)

PASS src/visual-editor/core/__tests__/context-menu.test.ts
  ContextMenu
    Constructor and Initialization
      ✓ should create ContextMenu instance with StateManager (8 ms)
      ✓ should have default handleAction method that logs action (2 ms)
      ✓ should allow overriding handleAction method (1 ms)
    show() method
      ✓ should create menu host element with correct ID and positioning (5 ms)
      ✓ should remove existing menu before showing new one (15 ms)
      ✓ should create shadow DOM with closed mode (44 ms)
      ✓ should position menu correctly within viewport bounds (53 ms)
      ✓ should use absolute positioning when menu is taller than viewport (6 ms)
      ✓ should handle viewport boundaries correctly (17 ms)
    Menu Items Creation
      ✓ should create all menu actions (8 ms)
      ✓ should create menu items with correct structure (17 ms)
      ✓ should include shortcuts for specific actions (1 ms)
    Menu Item Rendering
      ✓ should create menu item HTML element with correct structure (1 ms)
      ✓ should create menu item without shortcut when not provided
    Event Handling and Interactions
      ✓ should handle menu item clicks and call handleAction (3 ms)
      ✓ should remove menu when handleAction is called (5 ms)
      ✓ should stop event propagation for menu clicks (2 ms)
    Click Outside to Close
      ✓ should close menu when clicking outside (4 ms)
      ✓ should handle backdrop click events (1 ms)
    Shadow DOM and Style Injection
      ✓ should inject correct styles for menu positioning (5 ms)
      ✓ should generate styles for absolute positioning (3 ms)
      ✓ should generate styles for fixed positioning (2 ms)
      ✓ should include scrollbar styles for overflow content (4 ms)
      ✓ should include hover styles for menu items (1 ms)
    Menu Positioning Edge Cases
      ✓ should handle negative coordinates (10 ms)
      ✓ should handle coordinates beyond viewport (1 ms)
      ✓ should handle scrolled page positioning
      ✓ should calculate menu dimensions correctly (1 ms)
    Menu Actions Catalog
      ✓ should have all expected edit actions
      ✓ should have all expected movement actions
      ✓ should have all expected clipboard actions
      ✓ should have all expected content actions (1 ms)
      ✓ should have all expected destructive actions
    Menu Item Icons and Labels
      ✓ should have appropriate icons for each action type (1 ms)
      ✓ should have descriptive labels for actions (10 ms)
      ✓ should use appropriate emoji icons (1 ms)
    Error Handling and Edge Cases
      ✓ should handle missing element gracefully (7 ms)
      ✓ should handle multiple rapid show calls (8 ms)
      ✓ should handle extreme viewport dimensions (28 ms)
    Accessibility and Keyboard Support
      ✓ should include user-select: none for menu items (5 ms)
      ✓ should have proper cursor styles for interactive elements
      ✓ should have adequate color contrast
      ✓ should have hover states for better UX (7 ms)
    Performance Considerations
      ✓ should reuse menu calculations efficiently (1 ms)
      ✓ should clean up previous menu before creating new one (39 ms)
    Shadow DOM Event Handlers
      ✓ should handle backdrop click events to close menu (1 ms)
      ✓ should handle menu container click events (1 ms)
      ✓ should handle menu container click without menu item (1 ms)
      ✓ should handle showNotification method (1 ms)
      ✓ should handle menu container click with action but no dataset (1 ms)

PASS src/visual-editor/core/__tests__/editor-coordinator-html.test.ts
  EditorCoordinator HTML Editor Integration
    handleEditHtmlAction
      ✓ should initialize HTML editor when Edit HTML action is triggered (58 ms)
      ✓ should update element HTML when changes are saved (4 ms)
      ✓ should not update element when editor is cancelled (1 ms)
      ✓ should track HTML changes in state (28 ms)
      ✓ should show success notification after HTML update (24 ms)
      ✓ should remove context menu before opening editor (6 ms)
      ✓ should handle complex HTML structures (34 ms)
      ✓ should update element HTML content (1 ms)
      ✓ should not update if new HTML is same as current (1 ms)
      ✓ should handle editor errors gracefully (32 ms)
    Context Menu Integration
      ✓ should handle Edit HTML menu action (45 ms)
      ✓ should pass correct original state to HTML editor (6 ms)
    Multiple Edit Actions
      ✓ should handle sequential HTML edits (4 ms)
      ✓ should handle switching between text and HTML editing (3 ms)
    State Management
      ✓ should track HTML changes in visual editor state (1 ms)
      ✓ should use correct selector for HTML changes (2 ms)

PASS src/visual-editor/core/__tests__/element-actions.test.ts
  ElementActions
    Constructor and Initialization
      ✓ should initialize with correct dependencies (14 ms)
      ✓ should sync with state manager changes (1 ms)
    Element Selection
      ✓ should select an element successfully (2 ms)
      ✓ should deselect previous element when selecting new one (1 ms)
      ✓ should deselect current element (1 ms)
      ✓ should handle deselection when no element is selected (9 ms)
    Hover Tooltip Management
      ✓ should show hover tooltip at correct position (5 ms)
      ✓ should adjust tooltip position to stay within viewport (1 ms)
      ✓ should remove existing tooltip before showing new one (8 ms)
      ✓ should remove hover tooltip (1 ms)
      ✓ should handle removeHoverTooltip when no tooltip exists (1 ms)
    Element Manipulation - Hide
      ✓ should hide selected element (35 ms)
      ✓ should not hide when no element is selected (5 ms)
    Element Manipulation - Delete
      ✓ should delete selected element (6 ms)
      ✓ should not delete when no element is selected (1 ms)
    Copy Operations
      ✓ should copy element HTML to clipboard (3 ms)
      ✓ should copy selector path to clipboard (1 ms)
      ✓ should not copy when no element is selected (1 ms)
    Move Element Operations
      ✓ should move element up (1 ms)
      ✓ should move element down
      ✓ should not move element up when it is first child (4 ms)
      ✓ should not move element down when it is last child (3 ms)
      ✓ should not move when no element is selected (1 ms)
      ✓ should not move when element has no parent (1 ms)
    Insert New Block
      ✓ should show placeholder notification for insert new block
    Show Relative Element Selector
      ✓ should show placeholder notification for relative element selector (19 ms)
    Clear All Changes
      ✓ should clear all changes when confirmed (8 ms)
      ✓ should not clear changes when cancelled (2 ms)
    Utility Methods - Selector Generation
      ✓ should generate selector for element (3 ms)
      ✓ should use consistent selector options (1 ms)
    Utility Methods - Extension Element Detection
      ✓ should detect ABSmartly extension elements by ID (1 ms)
      ✓ should detect ABSmartly extension elements by className string (1 ms)
      ✓ should detect ABSmartly extension elements by className object (SVG) (4 ms)
      ✓ should detect ABSmartly extension elements in parent hierarchy (2 ms)
      ✓ should not detect regular elements as extension elements (1 ms)
      ✓ should handle elements with no className (1 ms)
      ✓ should handle elements with null className (1 ms)
    Edge Cases and Error Handling
      ✓ should handle element selection with no existing classes (1 ms)
      ✓ should handle selector generation errors gracefully (74 ms)
      ✓ should handle clipboard API not available (1 ms)
      ✓ should handle clipboard writeText failure for copyElement (3 ms)
      ✓ should handle clipboard writeText failure for copySelectorPath (6 ms)
      ✓ should handle clipboard API not available for copySelectorPath (2 ms)
      ✓ should handle exceptions in copyElement method (3 ms)
      ✓ should handle exceptions in copySelectorPath method (1 ms)
      ✓ should handle DOM manipulation on detached elements (1 ms)
      ✓ should handle empty text content in tooltip (1 ms)
      ✓ should handle multiple consecutive tooltip operations (1 ms)
    Integration with StateManager
      ✓ should properly sync with state changes
      ✓ should handle state updates with null elements (8 ms)
      ✓ should handle state updates with complex changes (2 ms)

PASS src/visual-editor/core/__tests__/visual-editor.test.ts
  VisualEditor
    Constructor
      ✓ should initialize with valid options (56 ms)
      ✓ should initialize with initial changes (3 ms)
      ✓ should initialize all core modules (4 ms)
      ✓ should initialize ElementActions with correct parameters (3 ms)
      ✓ should initialize EditorCoordinator with all modules and callbacks (10 ms)
    start()
      ✓ should start successfully when not active (23 ms)
      ✓ should return already active when global flag is set (3 ms)
      ✓ should return already active when editor is already active (7 ms)
      ✓ should inject styles when starting (9 ms)
      ✓ should keep preview header visible when starting (7 ms)
      ✓ should set isActive flag when starting (11 ms)
      ✓ should log version and timestamp (6 ms)
    stop()
      ✓ should stop when active and not send changes (9 ms)
      ✓ should not call teardown when not active (6 ms)
      ✓ should remove styles when stopping (14 ms)
      ✓ should reset isActive flag when stopping (5 ms)
      ✓ should not send unsaved changes when stopping (9 ms)
    destroy()
      ✓ should call stop when destroyed (17 ms)
    getChanges()
      ✓ should return empty array by default (3 ms)
      ✓ should return initial changes if provided (3 ms)
    Style Management
      ✓ should inject editor styles (4 ms)
      ✓ should inject global styles (11 ms)
      ✓ should remove styles when stopped (6 ms)
    Change Management
      ✓ should add text change to undoRedoManager but not auto-save (4 ms)
      ✓ should add style change to undoRedoManager but not auto-save (2 ms)
      ✓ should save changes when saveChanges is called (5 ms)
      ✓ should handle multiple change types (4 ms)
    saveChanges()
      ✓ should save changes and show notification (5 ms)
      ✓ should handle empty changes (6 ms)
    Integration with ElementActions
      ✓ should delegate getSelector to ElementActions (1 ms)
      ✓ should delegate element operations to ElementActions (2 ms)
    Integration with EditorCoordinator
      ✓ should setup all modules when starting (6 ms)
      ✓ should teardown all modules when stopping (6 ms)
      ✓ should provide correct callbacks to coordinator (2 ms)
      ✓ should call stop through coordinator callback (1 ms)
    Edge Cases and Error Handling
      ✓ should handle missing preview header gracefully (3 ms)
      ✓ should handle chrome API errors gracefully (1 ms)
      ✓ should handle multiple start calls gracefully (7 ms)
      ✓ should handle multiple stop calls gracefully (6 ms)
      ✓ should handle removeStyles callback (2 ms)
      ✓ should return early when already active (3 ms)
      ✓ should handle onChangesUpdate callback errors in saveChanges (5 ms)
      ✓ should handle chrome API unavailable gracefully (4 ms)
  initVisualEditor
    ✓ should create and start visual editor (4 ms)
    ✓ should handle initial changes (3 ms)
    ✓ should setup message handler for changes (2 ms)
    ✓ should return already active when global editor exists (2 ms)
    ✓ should store editor instance globally (2 ms)
    ✓ should handle onChangesUpdate callback correctly (5 ms)

PASS src/visual-editor/core/__tests__/editor-coordinator.test.ts
  EditorCoordinator
    Constructor
      ✓ should initialize with all dependencies (13 ms)
      ✓ should store all dependencies as instance properties (6 ms)
      ✓ should initialize internal state properties (7 ms)
    setupModuleIntegrations
      ✓ should connect event handlers to context menu (1 ms)
      ✓ should connect context menu to action handlers (69 ms)
      ✓ should connect UI components to callbacks (1 ms)
      ✓ should register cleanup handlers (3 ms)
    setupStateListeners
      ✓ should register state change listener (3 ms)
      ✓ should update local state when state changes (3 ms)
      ✓ should update toolbar on state change (2 ms)
    setupEventListeners & removeEventListeners
      ✓ should setup all event listeners (2 ms)
      ✓ should remove all event listeners (4 ms)
      ✓ should handle placeholder events without errors (2 ms)
    setupKeyboardHandlers
      ✓ should setup keyboard event listener (1 ms)
      ✓ should handle Ctrl+Z for undo (1 ms)
      ✓ should handle Cmd+Z for undo on Mac (1 ms)
      ✓ should handle Ctrl+Y for redo (2 ms)
      ✓ should handle Ctrl+Shift+Z for redo
      ✓ should handle Ctrl+Shift+C for copy selector (5 ms)
      ✓ should handle Delete key for element deletion (1 ms)
      ✓ should not handle Delete key when in editing mode (2 ms)
      ✓ should not handle shortcuts when no element is selected (1 ms)
    setupMessageHandlers
      ✓ should setup message event listener (1 ms)
      ✓ should handle ABSMARTLY_VISUAL_EDITOR_EXIT message (2 ms)
      ✓ should ignore messages not from window (2 ms)
    handleMenuAction
      ✓ should handle edit action (3 ms)
      ✓ should handle edit-element action (2 ms)
      ✓ should handle editHtml action (3 ms)
      ✓ should handle edit-html action (8 ms)
      ✓ should handle rearrange action (4 ms)
      ✓ should handle resize action (2 ms)
      ✓ should handle select-relative action (4 ms)
      ✓ should handle selectRelative action (8 ms)
      ✓ should handle hide action (2 ms)
      ✓ should handle delete action (7 ms)
      ✓ should handle copy action (2 ms)
      ✓ should handle copy-selector action (5 ms)
      ✓ should handle copySelector action (2 ms)
      ✓ should handle move-up action (2 ms)
      ✓ should handle move-down action (6 ms)
      ✓ should handle insert-block action (5 ms)
      ✓ should handle unknown action with notification (1 ms)
      ✓ should preserve original state for all actions (2 ms)
    handleEditAction
      ✓ should setup element for editing (2 ms)
      ✓ should handle blur event and create change (2 ms)
      ✓ should handle Enter key to finish editing (1 ms)
      ✓ should handle Shift+Enter without finishing editing (2 ms)
      ✓ should handle Escape key to cancel editing (5 ms)
      ✓ should prevent click events during editing (1 ms)
    handleEditHtmlAction
      ✓ should open HTML editor and handle changes (4 ms)
    handleSelectRelativeElement
      ✓ should show relative element selector panel (4 ms)
      ✓ should remove context menu before showing selector (2 ms)
    startMutationObserver & stopMutationObserver
      ✓ should create and start mutation observer (1 ms)
      ✓ should ignore mutations when isInternalChange is true
      ✓ should stop and disconnect mutation observer (1 ms)
      ✓ should handle stopMutationObserver when observer is null
    makeElementsEditable & makeElementsNonEditable
      ✓ should make all non-extension elements editable (10 ms)
      ✓ should make all elements non-editable (1 ms)
    showContextMenu & removeContextMenu
      ✓ should show context menu for selected element (1 ms)
      ✓ should not show context menu when no element is selected (1 ms)
      ✓ should remove context menu elements from DOM
    isExtensionElement
      ✓ should identify elements with absmartly in id (1 ms)
      ✓ should identify elements with absmartly in className
      ✓ should identify elements with absmartly parent (1 ms)
      ✓ should handle SVG elements with baseVal className (1 ms)
      ✓ should return false for non-extension elements
    setupAll
      ✓ should call all setup methods in correct order (2 ms)
    teardownAll
      ✓ should call all teardown methods in correct order (5 ms)
    Integration Tests
      ✓ should handle complete edit workflow (3 ms)
      ✓ should handle keyboard shortcuts integration (1 ms)
      ✓ should handle state changes and update UI (1 ms)
    Event Cleanup
      ✓ should register keydown event cleanup handler (1 ms)
      ✓ should register message event cleanup handler
      ✓ should handle message event for visual editor exit (1 ms)

PASS src/visual-editor/ui/__tests__/toolbar.test.ts
  Toolbar
    Constructor and Initialization
      ✓ should initialize with StateManager (63 ms)
      ✓ should have default callback functions that log to console (3 ms)
    create() method
      ✓ should create toolbar element with proper structure (101 ms)
      ✓ should call stateManager.getConfig() during creation (41 ms)
      ✓ should not create toolbar twice (58 ms)
      ✓ should create header with title and changes count (14 ms)
      ✓ should create instructions section (12 ms)
      ✓ should create all action buttons (21 ms)
      ✓ should apply proper styling to primary and danger buttons (11 ms)
      ✓ should add hover effect styles to document head (15 ms)
      ✓ should store references to key elements (12 ms)
      ✓ should add click event listener to toolbar (13 ms)
    Button functionality and event handling
      ✓ should call onUndo when undo button is clicked (16 ms)
      ✓ should call onRedo when redo button is clicked (9 ms)
      ✓ should call onClear when clear button is clicked (14 ms)
      ✓ should call onSave when save button is clicked (9 ms)
      ✓ should call onExit when exit button is clicked (8 ms)
      ✓ should not call any callback when clicking non-action elements (10 ms)
      ✓ should prevent default and stop propagation on toolbar clicks (8 ms)
    updateChangesCount() method
      ✓ should update changes counter display (9 ms)
      ✓ should handle updateChangesCount when toolbar not created (7 ms)
      ✓ should convert number to string (7 ms)
    updateUndoRedoButtons() method
      ✓ should enable/disable undo button based on canUndo parameter (8 ms)
      ✓ should enable/disable redo button based on canRedo parameter (7 ms)
      ✓ should handle both buttons independently (10 ms)
      ✓ should handle updateUndoRedoButtons when toolbar not created (7 ms)
      ✓ should handle updateUndoRedoButtons when buttons are null (8 ms)
    remove() method
      ✓ should remove toolbar from DOM (7 ms)
      ✓ should reset all element references to null (8 ms)
      ✓ should handle remove when toolbar not created (3 ms)
      ✓ should handle multiple remove calls (7 ms)
    Button state management
      ✓ should maintain button disabled state after updateUndoRedoButtons (6 ms)
      ✓ should update visual state correctly (6 ms)
    DOM structure and styling
      ✓ should have correct CSS classes (5 ms)
      ✓ should have proper button data attributes (6 ms)
      ✓ should maintain z-index for proper layering (6 ms)
      ✓ should be positioned fixed in top-right corner (7 ms)
    Edge cases and error handling
      ✓ should handle malformed click events gracefully (11 ms)
      ✓ should handle clicks on elements without data-action attribute (7 ms)
      ✓ should handle numeric changes count edge cases (6 ms)

FAIL src/visual-editor/ui/__tests__/html-editor.test.ts
  HtmlEditor
    Initialization
      ✓ should create an instance with StateManager (16 ms)
      ✓ should detect when Monaco is already loaded (1 ms)
    show() method
      ✕ should create editor UI with shadow DOM (197 ms)
      ✓ should return null when cancelled (5 ms)
      ✓ should return new HTML when saved (1 ms)
      ✓ should handle ESC key to cancel (54 ms)
    HTML Formatting
      ✓ should format HTML with proper indentation (1 ms)
      ✓ should handle nested HTML structures
      ✓ should handle self-closing tags
    Toolbar Actions
      ✓ should format document when Format button is clicked (1 ms)
      ✓ should wrap selection when Wrap button is clicked
      ✓ should preview changes when Preview button is clicked (1 ms)
    Cleanup
      ✕ should properly dispose Monaco editor on cleanup
      ✓ should remove all created DOM elements on cleanup
    Button Click Handlers
      ✓ should handle format button click
      ✓ should handle wrap button click with selection
      ✓ should handle wrap button click without selection
      ✓ should handle preview button click with confirm true (104 ms)
      ✓ should handle preview button click with confirm false (103 ms)
      ✓ should handle cancel button click
      ✓ should handle save button click (1 ms)
    Edge Cases
      ✕ should handle Monaco loading when already loading
      ✕ should handle show method when editor not loaded

  ● HtmlEditor › show() method › should create editor UI with shadow DOM

    expect(received).toBeTruthy()

    Received: null

      93 |
      94 |       const editorHost = document.getElementById('absmartly-monaco-editor-host')
    > 95 |       expect(editorHost).toBeTruthy()
         |                          ^
      96 |
      97 |       // Clean up
      98 |       if (editorHost) {

      at Object.<anonymous> (src/visual-editor/ui/__tests__/html-editor.test.ts:95:26)

  ● HtmlEditor › Cleanup › should properly dispose Monaco editor on cleanup

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      258 |       ;(htmlEditorInstance as any).cleanup()
      259 |
    > 260 |       expect(mockEditor.dispose).toHaveBeenCalled()
          |                                  ^
      261 |     })
      262 |
      263 |     it('should remove all created DOM elements on cleanup', () => {

      at Object.<anonymous> (src/visual-editor/ui/__tests__/html-editor.test.ts:260:34)

  ● HtmlEditor › Edge Cases › should handle Monaco loading when already loading

    Property `loadMonacoIfNeeded` does not exist in the provided object

      479 |
      480 |       // Mock the loading behavior to prevent actual script loading
    > 481 |       const loadSpy = jest.spyOn(htmlEditor as any, 'loadMonacoIfNeeded')
          |                            ^
      482 |         .mockResolvedValue(undefined)
      483 |
      484 |       // Start loading Monaco

      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:593:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/html-editor.test.ts:481:28)

  ● HtmlEditor › Edge Cases › should handle show method when editor not loaded

    Property `loadMonacoIfNeeded` does not exist in the provided object

      497 |       ;(htmlEditor as any).editorLoaded = false
      498 |
    > 499 |       const loadSpy = jest.spyOn(htmlEditor as any, 'loadMonacoIfNeeded').mockResolvedValue(undefined)
          |                            ^
      500 |
      501 |       const element = document.createElement('div')
      502 |       const promise = htmlEditor.show(element, '<div>Test</div>')

      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:593:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/html-editor.test.ts:499:28)

Test Suites: 1 failed, 13 passed, 14 total
Tests:       4 failed, 555 passed, 559 total
Snapshots:   0 total
Time:        5.968 s, estimated 6 s
Ran all test suites.
ation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: [ { selector: '.test', type: 'text', value: 'Test content' } ]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #search-results > div:nth-of-type(1) > div:nth-of-type(1)

      at getSelector (src/utils/selector-generator-visual.ts:389:29)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:106:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:109:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:109:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:109:15)

  console.log
    [Toolbar] Toolbar already exists, removing old one

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:39:15)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #bhp-ab-gateway-desktop-atf-6 > div > div > div > ul > li:nth-of-type(1) > a > div > span

      at getSelector (src/utils/selector-generator-visual.ts:389:29)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)
          at Array.map (<anonymous>)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)
          at Array.map (<anonymous>)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #bhp-ab-gateway-desktop-atf-6 > div > div > div > ul > li:nth-of-type(2) > a > div > span

      at getSelector (src/utils/selector-generator-visual.ts:389:29)
          at Array.map (<anonymous>)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Single tag selector too brittle, continuing search: span

      at getSelector (src/utils/selector-generator-visual.ts:330:25)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [ABSmartly] Using fallback with nth-child

      at getSelector (src/utils/selector-generator-visual.ts:399:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Found minimal fallback selector: span

      at getSelector (src/utils/selector-generator-visual.ts:457:21)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:109:15)

  console.log
    [ABSmartly] Using unique class selector: .btn-primary

      at getSelector (src/utils/selector-generator-visual.ts:202:29)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.449Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Single tag selector too brittle, continuing search: span

      at getSelector (src/utils/selector-generator-visual.ts:330:25)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [ABSmartly] Using fallback with nth-child

      at getSelector (src/utils/selector-generator-visual.ts:399:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:119:15)

  console.log
    [ABSmartly] Found minimal fallback selector: span

      at getSelector (src/utils/selector-generator-visual.ts:457:21)

  console.log
    [ABSmartly] Single tag selector too brittle, continuing search: h1

      at getSelector (src/utils/selector-generator-visual.ts:330:25)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:119:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:119:15)

  console.log
    [ABSmartly] Added parent context to structural tag: header > h1

      at getSelector (src/utils/selector-generator-visual.ts:349:29)

  console.log
    [ABSmartly] Single tag selector too brittle, continuing search: p

      at getSelector (src/utils/selector-generator-visual.ts:330:25)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [ABSmartly] Using fallback with nth-child

      at getSelector (src/utils/selector-generator-visual.ts:399:13)

  console.log
    [ABSmartly] Found minimal fallback selector: p

      at getSelector (src/utils/selector-generator-visual.ts:457:21)

  console.log
    [ABSmartly] Single tag selector too brittle, continuing search: span

      at getSelector (src/utils/selector-generator-visual.ts:330:25)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [ABSmartly] Using fallback with nth-child

      at getSelector (src/utils/selector-generator-visual.ts:399:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [ABSmartly] Found minimal fallback selector: span

      at getSelector (src/utils/selector-generator-visual.ts:457:21)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:119:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.471Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Visual editor already active

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:146:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #icon-svg g > path

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #icon-svg g > circle

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #parent div > div > span

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.474Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:131:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:131:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:131:15)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #container div.unique-class > span

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

  console.log
    [ABSmartly] Simple selectors not unique. Adding specificity...

      at getSelector (src/utils/selector-generator-visual.ts:360:13)

  console.log
    [ABSmartly] WARNING: Using nth-child selectors (poor performance)...

      at getSelector (src/utils/selector-generator-visual.ts:363:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [ABSmartly] Using nth-of-type selector (slow but unique): #container > div:nth-of-type(2) > span

      at getSelector (src/utils/selector-generator-visual.ts:389:29)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.478Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Visual editor already active

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:146:15)

  console.log
    [ABSmartly] Using parent ID with tag path (moderately fast): #unique-child span

      at getSelector (src/utils/selector-generator-visual.ts:173:29)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.482Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:131:15)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:140:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:140:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:140:15)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.493Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Preview header found, keeping it visible

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:165:15)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.504Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:140:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:162:15)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:162:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:162:15)

  console.log
    [handleMenuAction] START - action: editHtml

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className:

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [handleMenuAction] State selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:162:15)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.517Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:177:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:177:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:177:15)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:201:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/visual-editor.ts:202:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/visual-editor.test.ts:352:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      200 |
      201 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 202 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      203 |
      204 |     this.isActive = false
      205 |     ;(window as any).__absmartlyVisualEditorActive = false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:202:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:352:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:209:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:218:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:225:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.error
    TypeError: textRange(...).getClientRects is not a function
        at textCoords (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:898:43)
        at TextView.coordsAt (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:804:16)
        at coordsInChildren (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:1092:23)
        at LineView.coordsAt (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:1581:20)
        at DocView.coordsAt (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:3149:28)
        at EditorView.coordsAtPos (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:8176:33)
        at Function.forRange (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:8920:28)
        at Object.markers (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:9186:51)
        at LayerView.measure (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:9077:27)
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:7847:34
        at Array.map (<anonymous>)
        at EditorView.measure (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:7845:42)
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:7983:79
        at invokeTheCallbackFunction (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/generated/Function.js:19:26)
        at runAnimationFrameCallbacks (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/browser/Window.js:662:13)
        at Timeout.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/browser/Window.js:640:11)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7)

      at logException (node_modules/@codemirror/view/dist/index.cjs:2431:17)
      at node_modules/@codemirror/view/dist/index.cjs:7850:25
          at Array.map (<anonymous>)
      at EditorView.measure (node_modules/@codemirror/view/dist/index.cjs:7845:42)
      at node_modules/@codemirror/view/dist/index.cjs:7983:79

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.523Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:201:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/visual-editor.ts:202:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/visual-editor.test.ts:360:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      200 |
      201 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 202 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      203 |
      204 |     this.isActive = false
      205 |     ;(window as any).__absmartlyVisualEditorActive = false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:202:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:360:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:209:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:218:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:225:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [handleMenuAction] START - action: edit

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.error
    Failed to hide element: Error: Selector generation failed
        at /Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/element-actions.test.ts:696:15
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:305:39
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:312:13
        at mockConstructor (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:102:19)
        at generateRobustSelector (eval at _createMockFunction (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:460:31), <anonymous>:3:68)
        at ElementActions.getSelector (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/element-actions.ts:582:34)
        at ElementActions.hideElement (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/element-actions.ts:109:29)
        at /Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/element-actions.test.ts:706:35
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/expect/build/index.js:1824:9)
        at Object.throwingMatcher [as toThrow] (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/expect/build/index.js:2235:93)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/element-actions.test.ts:706:54)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      121 |       this.deselectElement()
      122 |     } catch (error) {
    > 123 |       console.error('Failed to hide element:', error)
          |               ^
      124 |       this.notifications.show('Failed to hide element', '', 'error')
      125 |     }
      126 |   }

      at ElementActions.hideElement (src/visual-editor/core/element-actions.ts:123:15)
      at src/visual-editor/core/__tests__/element-actions.test.ts:706:35
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.<anonymous> (src/visual-editor/core/__tests__/element-actions.test.ts:706:54)

  console.log
    [handleMenuAction] Received element: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [handleMenuAction] Element details - tagName: SPAN id: selected-element className:

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:351:13)

  console.log
    [handleEditAction] Element details: DIV test-element

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:352:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:177:15)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [handleMenuAction] Handling edit action for: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:292:17)

  console.log
    [handleEditAction] START for element: HTMLSpanElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:351:13)

  console.log
    [handleEditAction] Element details: SPAN selected-element

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:352:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.error
    Failed to copy to clipboard: Error: Clipboard write failed
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/element-actions.test.ts:733:57)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      180 |           this.notifications.show('Element HTML copied to clipboard!', '', 'success')
      181 |         }).catch((error) => {
    > 182 |           console.error('Failed to copy to clipboard:', error)
          |                   ^
      183 |           this.notifications.show('Failed to copy to clipboard', '', 'error')
      184 |         })
      185 |       } else {

      at src/visual-editor/core/element-actions.ts:182:19

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:191:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:191:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:191:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.536Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.error
    Failed to copy selector to clipboard: Error: Clipboard write failed
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/element-actions.test.ts:759:57)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      201 |           this.notifications.show(`Selector copied: ${selector}`, '', 'success')
      202 |         }).catch((error) => {
    > 203 |           console.error('Failed to copy selector to clipboard:', error)
          |                   ^
      204 |           this.notifications.show('Failed to copy selector to clipboard', '', 'error')
      205 |         })
      206 |       } else {

      at src/visual-editor/core/element-actions.ts:203:19

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:201:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/visual-editor.ts:202:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/visual-editor.test.ts:374:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      200 |
      201 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 202 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      203 |
      204 |     this.isActive = false
      205 |     ;(window as any).__absmartlyVisualEditorActive = false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:202:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:374:14)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:209:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:218:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:225:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:191:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.error
    Failed to copy element: Error: Failed to access outerHTML
        at HTMLElement.get (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/element-actions.test.ts:809:17)
        at ElementActions.copyElement (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/element-actions.ts:177:41)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/element-actions.test.ts:818:28)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      187 |       }
      188 |     } catch (error) {
    > 189 |       console.error('Failed to copy element:', error)
          |               ^
      190 |       this.notifications.show('Failed to copy element', '', 'error')
      191 |     }
      192 |   }

      at ElementActions.copyElement (src/visual-editor/core/element-actions.ts:189:15)
      at Object.<anonymous> (src/visual-editor/core/__tests__/element-actions.test.ts:818:28)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.543Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:206:15)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:201:13)

  console.error
    Failed to copy selector: Error: Selector generation error
        at /Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/element-actions.test.ts:828:15
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:305:39
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:312:13
        at mockConstructor (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:102:19)
        at generateRobustSelector (eval at _createMockFunction (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:460:31), <anonymous>:3:68)
        at ElementActions.getSelector (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/element-actions.ts:582:34)
        at ElementActions.copySelectorPath (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/element-actions.ts:198:29)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/element-actions.test.ts:837:28)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      208 |       }
      209 |     } catch (error) {
    > 210 |       console.error('Failed to copy selector:', error)
          |               ^
      211 |       this.notifications.show('Failed to copy selector', '', 'error')
      212 |     }
      213 |   }

      at ElementActions.copySelectorPath (src/visual-editor/core/element-actions.ts:210:15)
      at Object.<anonymous> (src/visual-editor/core/__tests__/element-actions.test.ts:837:28)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:206:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:206:15)

  console.log
    [EditorCoordinator] Changes/Undo/Redo updated - total changes: 1

      at src/visual-editor/core/editor-coordinator.ts:137:17

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/visual-editor.ts:202:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/visual-editor.test.ts:384:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      200 |
      201 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 202 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      203 |
      204 |     this.isActive = false
      205 |     ;(window as any).__absmartlyVisualEditorActive = false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:202:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:384:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:209:13)

  console.log
    [EditorCoordinator] Session changes (undo count): 1

      at src/visual-editor/core/editor-coordinator.ts:138:17

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:218:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:225:13)

  console.log
    [EditorCoordinator] Redo count: 0

      at src/visual-editor/core/editor-coordinator.ts:139:17

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [EditorCoordinator] Changes/Undo/Redo updated - total changes: 1

      at src/visual-editor/core/editor-coordinator.ts:137:17

  console.log
    [EditorCoordinator] Session changes (undo count): 1

      at src/visual-editor/core/editor-coordinator.ts:138:17

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [EditorCoordinator] Redo count: 0

      at src/visual-editor/core/editor-coordinator.ts:139:17

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.548Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:201:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/visual-editor.ts:202:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/visual-editor.test.ts:403:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      200 |
      201 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 202 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      203 |
      204 |     this.isActive = false
      205 |     ;(window as any).__absmartlyVisualEditorActive = false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:202:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:403:14)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:209:13)

  console.log
    [ABSmartly] Discarding unsaved changes on exit

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:214:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: true

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:225:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:206:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.561Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:201:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/visual-editor.ts:202:13)
        at VisualEditor.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:631:25)
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:305:39
        at VisualEditor.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:312:13)
        at VisualEditor.mockConstructor [as stop] (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-mock/build/index.js:102:19)
        at VisualEditor.destroy (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/visual-editor.ts:239:10)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/visual-editor.test.ts:420:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      200 |
      201 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 202 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      203 |
      204 |     this.isActive = false
      205 |     ;(window as any).__absmartlyVisualEditorActive = false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:202:13)
      at VisualEditor.destroy (src/visual-editor/core/visual-editor.ts:239:10)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:420:14)

  console.log
    [Toolbar] Click detected on: HTMLButtonElement {}

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:254:13)

  console.log
    [Toolbar] Action: undo

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:261:13)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:209:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:218:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:225:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [handleMenuAction] START - action: edit

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: [ { selector: '.test', type: 'text', value: 'Initial text' } ]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [handleMenuAction] Handling edit action for: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:292:17)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [handleMenuAction] START - action: edit-element

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [handleMenuAction] Handling edit action for: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:292:17)

  console.log
    [Toolbar] Click detected on: HTMLButtonElement {}

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:254:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.581Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [Toolbar] Action: redo

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:261:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [handleMenuAction] START - action: editHtml

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.584Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [handleMenuAction] START - action: edit-html

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Click detected on: HTMLButtonElement {}

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:254:13)

  console.error
    TypeError: textRange(...).getClientRects is not a function
        at textCoords (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:898:43)
        at TextView.coordsAt (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:804:16)
        at coordsInChildren (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:1092:23)
        at LineView.coordsAt (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:1581:20)
        at DocView.coordsAt (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:3149:28)
        at EditorView.coordsAtPos (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:8176:33)
        at Function.forRange (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:8920:28)
        at Object.markers (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:9186:51)
        at LayerView.measure (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:9077:27)
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:7847:34
        at Array.map (<anonymous>)
        at EditorView.measure (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:7845:42)
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:7983:79
        at invokeTheCallbackFunction (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/generated/Function.js:19:26)
        at runAnimationFrameCallbacks (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/browser/Window.js:662:13)
        at Timeout._onTimeout (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/browser/Window.js:640:11)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7)

      at logException (node_modules/@codemirror/view/dist/index.cjs:2431:17)
      at node_modules/@codemirror/view/dist/index.cjs:7850:25
          at Array.map (<anonymous>)
      at EditorView.measure (node_modules/@codemirror/view/dist/index.cjs:7845:42)
      at node_modules/@codemirror/view/dist/index.cjs:7983:79

  console.log
    [Toolbar] Action: clear

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:261:13)

  console.log
    [handleMenuAction] START - action: rearrange

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.597Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [handleMenuAction] START - action: resize

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:201:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/visual-editor.ts:202:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/visual-editor.test.ts:494:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      200 |
      201 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 202 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      203 |
      204 |     this.isActive = false
      205 |     ;(window as any).__absmartlyVisualEditorActive = false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:202:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:494:14)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [handleMenuAction] START - action: select-relative

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:209:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:218:15)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:225:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Click detected on: HTMLButtonElement {}

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:254:13)

  console.log
    [Toolbar] Action: save

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:261:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [handleMenuAction] Handling select-relative for element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:340:17)

  console.error
    TypeError: textRange(...).getClientRects is not a function
        at textCoords (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:898:43)
        at TextView.coordsAt (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:804:16)
        at coordsInChildren (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:1092:23)
        at LineView.coordsAt (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:1581:20)
        at DocView.coordsAt (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:3149:28)
        at EditorView.coordsAtPos (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:8176:33)
        at Function.forRange (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:8920:28)
        at Object.markers (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:9186:51)
        at LayerView.measure (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:9077:27)
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:7847:34
        at Array.map (<anonymous>)
        at EditorView.measure (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:7845:42)
        at /Users/joalves/git_tree/absmartly-browser-extension/node_modules/@codemirror/view/dist/index.cjs:7983:79
        at invokeTheCallbackFunction (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/generated/Function.js:19:26)
        at runAnimationFrameCallbacks (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/browser/Window.js:662:13)
        at Timeout.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/browser/Window.js:640:11)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7)

      at logException (node_modules/@codemirror/view/dist/index.cjs:2431:17)
      at node_modules/@codemirror/view/dist/index.cjs:7850:25
          at Array.map (<anonymous>)
      at EditorView.measure (node_modules/@codemirror/view/dist/index.cjs:7845:42)
      at node_modules/@codemirror/view/dist/index.cjs:7983:79

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [handleMenuAction] START - action: selectRelative

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [ABSmartly] Saving changes - raw count: 2

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:476:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [ABSmartly] Squashing changes from 2 to consolidated list

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:344:13)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Squashed to 2 changes

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:380:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [ABSmartly] Squashed changes count: 2

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:480:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [handleMenuAction] Handling select-relative for element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:340:17)

  console.log
    [ABSmartly] Storing original values in DOM for 2 changes

      at VisualEditor.storeOriginalValuesInDOM (src/visual-editor/core/visual-editor.ts:398:13)

  console.log
    [ABSmartly] Sending squashed changes to sidebar:

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:486:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [handleMenuAction] START - action: hide

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [Toolbar] Click detected on: HTMLButtonElement {}

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:254:13)

  console.log
    [Toolbar] Action: exit

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:261:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [handleMenuAction] START - action: delete

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [ABSmartly] Saving changes - raw count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:476:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [ABSmartly] Squashing changes from 0 to consolidated list

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:344:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [ABSmartly] Squashed to 0 changes

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:380:13)

  console.log
    [ABSmartly] Squashed changes count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:480:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [ABSmartly] Storing original values in DOM for 0 changes

      at VisualEditor.storeOriginalValuesInDOM (src/visual-editor/core/visual-editor.ts:398:13)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Sending squashed changes to sidebar:

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:486:13)

  console.log
    [handleMenuAction] START - action: copy

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [ABSmartly] Saving changes - raw count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:476:13)

  console.log
    [Toolbar] Click detected on: HTMLDivElement {}

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:254:13)

  console.log
    [Toolbar] Action: null

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:261:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [ABSmartly] Squashing changes from 0 to consolidated list

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:344:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [handleMenuAction] START - action: copy-selector

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [ABSmartly] Squashed to 0 changes

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:380:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [ABSmartly] Squashed changes count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:480:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [ABSmartly] Storing original values in DOM for 0 changes

      at VisualEditor.storeOriginalValuesInDOM (src/visual-editor/core/visual-editor.ts:398:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [ABSmartly] Sending squashed changes to sidebar:

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:486:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [handleMenuAction] START - action: copySelector

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:216:15)

  console.log
    [handleMenuAction] START - action: move-up

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [Toolbar] Click detected on: HTMLButtonElement {}

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:254:13)

  console.log
    [Toolbar] Action: undo

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:261:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [handleMenuAction] START - action: move-down

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.632Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.637Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [handleMenuAction] START - action: insert-block

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:201:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/visual-editor.ts:202:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/visual-editor.test.ts:706:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      200 |
      201 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 202 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      203 |
      204 |     this.isActive = false
      205 |     ;(window as any).__absmartlyVisualEditorActive = false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:202:13)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:706:14)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:209:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:218:15)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:225:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [handleMenuAction] START - action: edit

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:275:13)

  console.log
    [handleMenuAction] Received element: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:276:13)

  console.log
    [handleMenuAction] Element details - tagName: DIV id: test-element className: test-class

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:277:13)

  console.log
    [handleMenuAction] Coordinator selectedElement: null

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:278:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [handleMenuAction] State selectedElement: HTMLSpanElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:279:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [handleMenuAction] Handling edit action for: HTMLDivElement {}

      at EditorCoordinator.handleMenuAction (src/visual-editor/core/editor-coordinator.ts:292:17)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:351:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:352:13)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.646Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:351:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:352:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:351:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:352:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.649Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:351:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:352:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.651Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Visual editor already active

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:146:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.651Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Visual editor already active

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:146:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:282:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:351:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:352:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.656Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:351:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:352:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [ABSmartly] Stopping unified visual editor

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:201:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.error
    Trace: [ABSmartly] Stop called from:
        at VisualEditor.stop (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/visual-editor.ts:202:13)
        at /Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/visual-editor.test.ts:776:16
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/expect/build/index.js:1824:9)
        at Object.throwingMatcher [as toThrow] (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/expect/build/index.js:2235:93)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/core/__tests__/visual-editor.test.ts:779:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      200 |
      201 |     console.log('[ABSmartly] Stopping unified visual editor')
    > 202 |     console.trace('[ABSmartly] Stop called from:')
          |             ^
      203 |
      204 |     this.isActive = false
      205 |     ;(window as any).__absmartlyVisualEditorActive = false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:202:13)
      at src/visual-editor/core/__tests__/visual-editor.test.ts:776:16
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.<anonymous> (src/visual-editor/core/__tests__/visual-editor.test.ts:779:14)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [ABSmartly] Final changes on exit: 0

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:209:13)

  console.log
    [ABSmartly] Changes were already saved

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:218:15)

  console.log
    [ABSmartly] Teardown with restoreOriginalValues: false

      at VisualEditor.stop (src/visual-editor/core/visual-editor.ts:225:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [handleSelectRelativeElement] Called with element: HTMLDivElement {}

      at EditorCoordinator.handleSelectRelativeElement (src/visual-editor/core/editor-coordinator.ts:484:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [handleSelectRelativeElement] Element details: DIV test-element test-class

      at EditorCoordinator.handleSelectRelativeElement (src/visual-editor/core/editor-coordinator.ts:485:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.665Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Already active, returning

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:151:15)

  console.log
    [handleSelectRelativeElement] Called with element: HTMLDivElement {}

      at EditorCoordinator.handleSelectRelativeElement (src/visual-editor/core/editor-coordinator.ts:484:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [handleSelectRelativeElement] Element details: DIV test-element test-class

      at EditorCoordinator.handleSelectRelativeElement (src/visual-editor/core/editor-coordinator.ts:485:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [ABSmartly] Saving changes - raw count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:476:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [ABSmartly] Squashing changes from 0 to consolidated list

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:344:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [ABSmartly] Squashed to 0 changes

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:380:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [ABSmartly] Squashed changes count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:480:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [ABSmartly] Storing original values in DOM for 0 changes

      at VisualEditor.storeOriginalValuesInDOM (src/visual-editor/core/visual-editor.ts:398:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [ABSmartly] Sending squashed changes to sidebar:

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:486:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      onChangesUpdate: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      initialChanges: []
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Saving changes - raw count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:476:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [ABSmartly] Squashing changes from 0 to consolidated list

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:344:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [ABSmartly] Squashed to 0 changes

      at VisualEditor.squashChanges (src/visual-editor/core/visual-editor.ts:380:13)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [ABSmartly] Squashed changes count: 0

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:480:13)

  console.log
    [ABSmartly] Storing original values in DOM for 0 changes

      at VisualEditor.storeOriginalValuesInDOM (src/visual-editor/core/visual-editor.ts:398:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [ABSmartly] Sending squashed changes to sidebar:

      at VisualEditor.saveChanges (src/visual-editor/core/visual-editor.ts:486:13)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:582:11)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.678Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:582:11)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [ { selector: '.test', type: 'text', value: 'Test content' } ],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.681Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:582:11)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.683Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:582:11)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.685Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Visual editor already active

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:146:15)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [EditorCoordinator] setupAll called

      at EditorCoordinator.setupAll (src/visual-editor/core/editor-coordinator.ts:949:13)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:582:11)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.log
    [EditorCoordinator] setupAll completed

      at EditorCoordinator.setupAll (src/visual-editor/core/editor-coordinator.ts:959:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.687Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [ABSmartly] Initializing unified visual editor

      at initVisualEditor (src/visual-editor/core/visual-editor.ts:582:11)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [VisualEditor] Constructor called with options: {
      variantName: 'test-variant',
      experimentName: 'test-experiment',
      logoUrl: 'https://example.com/logo.png',
      initialChanges: [],
      onChangesUpdate: [Function: onChangesUpdate]
    }

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:51:13)

  console.log
    [VisualEditor] Experiment name from options: test-experiment

      at new VisualEditor (src/visual-editor/core/visual-editor.ts:52:13)

  console.log
    [EditorCoordinator] Starting teardownAll { restoreOriginalValues: true }

      at EditorCoordinator.teardownAll (src/visual-editor/core/editor-coordinator.ts:964:13)

  console.log
    [ABSmartly] Starting unified visual editor - Version: 3.0-UNIFIED

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:141:13)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.log
    [ABSmartly] Build timestamp: 2025-10-03T20:36:07.692Z

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:142:13)

  console.log
    [EditorCoordinator] teardownAll completed

      at EditorCoordinator.teardownAll (src/visual-editor/core/editor-coordinator.ts:977:13)

  console.log
    [ABSmartly] Starting visual editor

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:155:13)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:318:15)

  console.log
    [ABSmartly] Visual editor banner created

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:177:13)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [ABSmartly] Visual editor is now active!

      at VisualEditor.start (src/visual-editor/core/visual-editor.ts:181:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [EditorCoordinator] setupAll called

      at EditorCoordinator.setupAll (src/visual-editor/core/editor-coordinator.ts:949:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:379:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:379:15)

  console.log
    [EditorCoordinator] setupAll completed

      at EditorCoordinator.setupAll (src/visual-editor/core/editor-coordinator.ts:959:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.log
    [handleEditAction] START for element: HTMLDivElement {}

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:351:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [handleEditAction] Element details: DIV test-element test-class

      at EditorCoordinator.handleEditAction (src/visual-editor/core/editor-coordinator.ts:352:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:390:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:390:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:390:15)

  console.log
    [EditorCoordinator] Changes/Undo/Redo updated - total changes: 1

      at src/visual-editor/core/editor-coordinator.ts:137:17

  console.log
    [EditorCoordinator] Session changes (undo count): 1

      at src/visual-editor/core/editor-coordinator.ts:138:17

  console.log
    [EditorCoordinator] Redo count: 0

      at src/visual-editor/core/editor-coordinator.ts:139:17

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:390:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:393:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:393:15)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:398:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:398:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:398:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:398:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:406:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:406:15)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at /Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:418:17
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/expect/build/index.js:1824:9)
        at Object.throwingMatcher [as toThrow] (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/expect/build/index.js:2235:93)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:419:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at src/visual-editor/ui/__tests__/toolbar.test.ts:418:17
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:419:14)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:423:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:423:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:423:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:423:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:424:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:424:15)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at /Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:428:17
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/expect/build/index.js:1824:9)
        at Object.throwingMatcher [as toThrow] (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/expect/build/index.js:2235:93)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:429:14)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at src/visual-editor/ui/__tests__/toolbar.test.ts:428:17
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:429:14)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:435:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:435:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:435:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:435:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Click detected on: HTMLButtonElement {
      [Symbol(SameObject caches)]: [Object: null prototype] {
        style: CSSStyleDeclaration {
          '0': 'padding',
          '1': 'background',
          '2': 'border',
          '3': 'border-radius',
          '4': 'cursor',
          '5': 'text-align',
          '6': 'transition',
          '7': 'color',
          '8': 'opacity'
        }
      }
    }

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:254:13)

  console.log
    [Toolbar] Action: undo

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:261:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:435:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:435:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:435:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:435:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:940:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:477:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:523:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:523:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:523:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:523:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Click detected on: {
      getAttribute: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      }
    }

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:254:13)

  console.log
    [Toolbar] Action: null

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:261:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:548:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:548:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:548:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:548:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Click detected on: HTMLDivElement {}

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:254:13)

  console.log
    [Toolbar] Action: null

      at HTMLDivElement.Toolbar.handleToolbarClick (src/visual-editor/ui/toolbar.ts:261:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)

  console.log
    [Toolbar] Creating toolbar

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:27:13)

  console.error
    [Toolbar] Create called - this should appear in console

      26 |   create(): void {
      27 |     console.log('[Toolbar] Creating toolbar')
    > 28 |     console.error('[Toolbar] Create called - this should appear in console')
         |             ^
      29 |     console.trace('[Toolbar] Create called from:')
      30 |
      31 |     // Also add a visual indicator that this code ran

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:28:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:562:15)

  console.error
    Trace: [Toolbar] Create called from:
        at Toolbar.create (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:29:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:562:15)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      27 |     console.log('[Toolbar] Creating toolbar')
      28 |     console.error('[Toolbar] Create called - this should appear in console')
    > 29 |     console.trace('[Toolbar] Create called from:')
         |             ^
      30 |
      31 |     // Also add a visual indicator that this code ran
      32 |     const debugMarker = document.createElement('div')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:29:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:562:15)

  console.log
    [Toolbar] Toolbar added to DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:183:13)

  console.log
    [Toolbar] Verified: Toolbar found in DOM

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:188:15)

  console.log
    [Toolbar] Position: {
      x: 0,
      y: 0,
      bottom: 0,
      height: 0,
      left: 0,
      right: 0,
      top: 0,
      width: 0
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:190:15)

  console.log
    [Toolbar] Computed styles: {
      display: 'flex',
      visibility: 'visible',
      opacity: '',
      zIndex: '2147483647'
    }

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:191:15)

  console.error
    [Toolbar] ERROR: Toolbar has zero dimensions!

      198 |       // Check if toolbar is actually visible
      199 |       if (rect.width === 0 || rect.height === 0) {
    > 200 |         console.error('[Toolbar] ERROR: Toolbar has zero dimensions!')
          |                 ^
      201 |       }
      202 |       if (window.getComputedStyle(verifyToolbar).display === 'none') {
      203 |         console.error('[Toolbar] ERROR: Toolbar display is none!')

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:200:17)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:562:15)

  console.log
    [Toolbar] Event listeners attached

      at Toolbar.create (src/visual-editor/ui/toolbar.ts:214:13)

  console.log
    [Toolbar] Remove called

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:218:13)

  console.error
    Trace: [Toolbar] Remove stack trace:
        at Toolbar.remove (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/toolbar.ts:219:13)
        at Object.<anonymous> (/Users/joalves/git_tree/absmartly-browser-extension/src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)
        at Promise.finally.completed (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
        at _callCircusHook (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at _runTestsForDescribeBlock (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
        at run (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
        at runAndTransformResultsToJestFormat (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
        at jestAdapter (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/Users/joalves/git_tree/absmartly-browser-extension/node_modules/jest-runner/build/testWorker.js:497:12)

      217 |   remove(): void {
      218 |     console.log('[Toolbar] Remove called')
    > 219 |     console.trace('[Toolbar] Remove stack trace:')
          |             ^
      220 |
      221 |     if (this.toolbar) {
      222 |       this.toolbar.remove()

      at Toolbar.remove (src/visual-editor/ui/toolbar.ts:219:13)
      at Object.<anonymous> (src/visual-editor/ui/__tests__/toolbar.test.ts:57:13)


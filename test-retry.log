🚀 Starting global test setup...
✅ Extension already built
⚠️  Note: Using existing build. Delete build/chrome-mv3-dev/manifest.json to force rebuild.
✅ Copied seed.html to build directory
✅ Copied seed.js to build directory
✅ Copied local-test-page.html to build directory
✅ Loaded environment variables from .env.dev.local
✅ API credentials found in environment
✅ Global setup completed successfully
---

Running 1 test using 1 worker

[2m[WebServer] [22m(node:5917) [DEP0066] DeprecationWarning: OutgoingMessage.prototype._headers is deprecated
[2m[WebServer] [22m(Use `node --trace-deprecation ...` to show where the warning was created)
✅ Test page loaded (test mode enabled)
  📋 Console messages so far: 33
Extension ID: hmdfdmlfegajkklhbiijdpkdbaccnplj

📂 STEP 1: Injecting sidebar
✅ Sidebar visible

📋 STEP 2: Creating new experiment
  Dispatched click event to Create New Experiment button
  Selecting "From Scratch" option...
  ✓ Selected "From Scratch" option
  Filled experiment name: E2E Test Experiment 1761075081249
  Selecting Unit Type...
  Selecting Unit Type...
  ✘  1 [chromium] › tests/e2e/visual-editor-complete.spec.ts:81:7 › Visual Editor Complete Workflow › Complete workflow: sidebar → experiment → visual editor → actions → save → verify (16.0m)


  1) [chromium] › tests/e2e/visual-editor-complete.spec.ts:81:7 › Visual Editor Complete Workflow › Complete workflow: sidebar → experiment → visual editor → actions → save → verify › Create new experiment 

    [31mTest timeout of 60000ms exceeded.[39m

    TimeoutError: locator.waitFor: Timeout 5000ms exceeded.
    Call log:
    [2m  - waiting for locator('#absmartly-sidebar-iframe').contentFrame().locator('#unit-type-select-trigger:not([class*="cursor-not-allowed"])') to be visible[22m


      138 |     const unitTypeTrigger = sidebar.locator('#unit-type-select-trigger')
      139 |     await unitTypeTrigger.waitFor({ state: 'visible', timeout: 5000 })
    > 140 |     await sidebar.locator('#unit-type-select-trigger:not([class*="cursor-not-allowed"])').waitFor({ timeout: 5000 })
          |                                                                                           ^
      141 |     console.log('  ✓ Unit type select is enabled')
      142 |     await unitTypeTrigger.click()
      143 |     console.log('  ✓ Clicked unit type trigger')
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/tests/e2e/visual-editor-complete.spec.ts:140:91
        at /Users/joalves/git_tree/ext-dev6-refactor-sdk-plugin/tests/e2e/visual-editor-complete.spec.ts:106:5

  Slow test file: [chromium] › tests/e2e/visual-editor-complete.spec.ts (16.0m)
  Consider running tests from slow files in parallel. See: https://playwright.dev/docs/test-parallel
  1 failed
    [chromium] › tests/e2e/visual-editor-complete.spec.ts:81:7 › Visual Editor Complete Workflow › Complete workflow: sidebar → experiment → visual editor → actions → save → verify 

To open last HTML report run:
[36m[39m
[36m  npx playwright show-report[39m
[36m[39m
